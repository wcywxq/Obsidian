---
title: this 指向
url: https://www.yuque.com/wcywxq/mxunh7/gg150b
---

- 作为构造函数被 `new` 调用：`this` 指向当前类实例
- 作为对象的方法使用：`this` 指向当前对象
- 作为函数直接调用：
  - 在非严格模式下，`this` 会绑定到全局对象(浏览器下是 `window`、`node` 环境是 `global`)
  - 严格模式下，`this` 会绑定到 `undefined`，因为严格模式下不允许 `this` 指向全局对象
- 被 `call`、`apply`、`bind` 调用：
  - `call`：第一个参数可以显示地绑定 `this`，后续参数将传入参数列表
  - `apply`：第一个参数可以显示地绑定 `this`，第二个参数接受一个参数数组
  - `bind`：只接受一个参数，返回一个新的函数，且在调用新函数时，将给定参数列表作为原函数的参数序列的前若干项
- 箭头函数中的 `this`：箭头函数没有构造函数 `constructor`，因此不能使用 `new` 调用，同时也无法通过 `call`、`apply`、`bind` 修改，因此箭头函数的 `this` 是根据其上下文的 `this` 来决定的 <a name="cLwpw"></a>

## this 绑定的优先级

`this` 存在多个使用场景，那么多个场景同时出现时，就需要考虑到 `this` 的优先级，`this` 会根据优先级来确定指向。

优先级：`new` 绑定 `>` 显示绑定 `>` 隐式绑定 `>` 默认绑定

因此 `this` 的判断顺序：

- `new` 绑定： 函数是否在 `new` 中调用？如果是的话 `this` 绑定的是新创建的对象；
- 显式绑定： 函数是否是通过 `bind`、`call`、`apply` 调用？如果是的话，`this` 绑定的是指定的对象；
- 隐式绑定： 函数是否在某个上下文对象中调用？如果是的话，`this` 绑定的是那个上下文对象；
- 如果都不是的话，使用默认绑定。如果在严格模式下，就绑定到 `undefined`，否则绑定到全局对象； <a name="oeLfa"></a>

## 对照表

|  | 非严格模式 | 严格模式 |
| --- | --- | --- |
| 全局作用域 | window | window |
| 普通函数 | window | undefined |
| 箭头函数 | 父级上下文的 this | 父级上下文的 this |
| 对象的函数属性 | 当前对象 | 当前对象 |
| call/apply/bind | 通过设置第一个参数改变 this，第一个参数为 null 或 undefined 时会自动替换为指向全局对象，原始值会被包装 | 通过设置第一个参数改变 this |
