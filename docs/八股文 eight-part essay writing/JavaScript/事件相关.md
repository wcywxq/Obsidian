---
title: 事件相关
url: https://www.yuque.com/wcywxq/mxunh7/nt0p86
---

<a name="E5yo3"></a>

## on 和 addEventListener 区别

- addEventListener 可以给一个事件注册多个 listener，而 on 在同一时间只能指向唯一对象
- addEventListener 对任何 DOM 都是有效的，而 onclick 仅限于 html
- on 事件解绑需要将其设置为 none，而 addEventListener 需要使用 removeEventListener <a name="Hs9Sz"></a>

### 例子

```javascript
window.onload = function () {
  const container = document.querySelector('#container')
  container.onclick = function () {
    console.log('first onclick event')
  }
  container.onclick = function () {
    console.log('second onclick event')
  }
}

// 执行 -> second onclick event

// on 绑定
window.onresize = function () {}
// on 解绑	
```

```javascript
window.onload = function () {
  const container = document.querySelector('#container')
  container.addEventListener('click', function () {
     console.log('first onclick event')
  }, false)
  container.addEventListener('click', function () {
     console.log('second onclick event')
  }, false)
}

// 执行 -> first onclick event
// 执行 -> second onclick event
```

<a name="Gl0La"></a>

## 事件冒泡和事件捕获

`addEventListener`函数的第三个参数默认为 `false`，也就是允许冒泡，如果改为 `true`，那么就只会在捕获阶段执行 <a name="ythef"></a>

### 事件冒泡

- 执行顺序：自底向上。(`目标元素 -> window`)
- 案例：

```javascript
window.addEventListener('click', () => {
	// 事件触发顺序为冒泡顺序
}) // 第三个参数默认为 false
```

<a name="e41oA"></a>

### 事件捕获

- 执行顺序：自顶向下。(`window -> 目标元素`)
- 案例：

```javascript
window.addEventListener('click', () => {
	// 事件触发顺序为捕获顺序
}, true)
```

<a name="VzJmc"></a>

### 事件的执行顺序

1. 事件捕获，从 `window -> document` 依次向下执行
2. 处理目标事件
3. 事件冒泡 <a name="KaMr4"></a>

### 应用场景

- 事件委托(事件代理) <a name="joDIp"></a>

## 原生自定义事件

通过两个构造函数可以实现原生的自定义事件：`new CustomEvent` 和 `new Event` <a name="Sv8Ta"></a>

### new Event

第一个参数是事件名称，第二个参数是修饰符，通过 `dispatchEvent`派发，`addEventListener`调用

```javascript
let event = new Event('xx', { cancelable: false, bubbles: true })
document.dispatchEvent(event)
```

<a name="xucug"></a>

### new CustomEvent

接收三个参数：第一个是事件名称，第二个参数是 `detail`，是一个对象，内部是参数键值对，通过 `e.detail`拿到传递的参数

```javascript
let event = new CustomEvent('xx', detail: { 要传的参数 }, {
  cancelable: false,
  bubbles: true
})
document.dispatchEvent(event)
```
