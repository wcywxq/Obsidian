---
title: 虚拟 dom
url: https://www.yuque.com/wcywxq/mxunh7/hmvf8u
---

在原生的 `JavaScript` 程序中，我们直接对 `DOM` 进行创建和更改，而 `DOM` 元素通过我们监听的事件和我们的应用程序进行通讯。
而 `React` 会先将你的代码转换成一个 `JavaScript` 对象，然后这个 `JavaScript` 对象再转换成真实 `DOM`。这个 `JavaScript` 对象就是所谓的虚拟 `DOM`。
当我们需要创建或更新元素时， `React` 首先会让这个 `VitrualDom` 对象进行创建和更改，然后再将 `VitrualDom` 对象渲染成真实 `DOM`。
当我们需要对 `DOM` 进行事件监听时，首先对 `VitrualDom` 进行事件监听， `VitrualDom` 会代理原生的 `DOM` 事件从而做出响应。

<a name="k4XyL"></a>

### 虚拟 dom 的引入与直接操作原生 dom 相比，哪一个效率更高

虚拟 `DOM` 相对原生的 `DOM` 不一定是效率更高，如果只修改一个按钮的文案，那么虚拟 `DOM` 的操作无论如何都不可能比真实的 `DOM` 操作更快。在首次渲染大量 `DOM` 时，由于多了一层虚拟 `DOM` 的计算，虚拟 `DOM` 也会比 `innerHTML` 插入慢。它能保证性能下限，在真实 `DOM` 操作的时候进行针对性的优化时，还是更快的。所以要根据具体的场景进行探讨。

在整个 `DOM` 操作的演化过程中，其实主要矛盾并不在于性能，而在于开发者写得爽不爽，在于研发体验/研发效率。虚拟 `DOM` 不是别的，正是前端开发们为了追求更好的研发体验和研发效率而创造出来的高阶产物。虚拟 `DOM` 并不一定会带来更好的性能，`React` 官方也从来没有把虚拟 `DOM` 作为性能层面的卖点对外输出过。**虚拟 **`**DOM**`** 的优越之处在于：它能够在提供更爽、更高效的研发模式（也就是函数式的 **`**UI**`** 编程方式）的同时，仍然保持一个还不错的性能。**
