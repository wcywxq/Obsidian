---
title: 可缓存的请求函数
url: https://www.yuque.com/wcywxq/sd8kbc/gftlci
---

```javascript
const map = new Map()
const time = 2 * 60 * 60 * 1000

async function cacheRequest(url, options) {
  let startTime = Date.now()
  if (map.has(url) && startTime - map.get(url).time <= time) {
    return map.get(url)
  } else {
    const res = await request(options) // request 请求函数
    map.set(url, { res, time: Date.now() })
    startTime = Date.now()
    return res
  }
}
```
