{
  "id": 71314643,
  "slug": "nowm78",
  "title": "自我介绍",
  "book_id": 24987782,
  "book": {
    "id": 24987782,
    "type": "Book",
    "slug": "aggvdq",
    "name": "项目梳理",
    "user_id": 732231,
    "description": "用来梳理一些项目的内容",
    "creator_id": 732231,
    "public": 0,
    "items_count": 23,
    "likes_count": 0,
    "watches_count": 1,
    "content_updated_at": "2022-12-25T07:59:52.340Z",
    "updated_at": "2023-11-07T15:52:14.000Z",
    "created_at": "2022-03-03T15:06:25.000Z",
    "namespace": "wcywxq/aggvdq",
    "user": {
      "id": 732231,
      "type": "User",
      "login": "wcywxq",
      "name": "magic",
      "description": null,
      "avatar_url": "https://cdn.nlark.com/yuque/0/2020/png/732231/1606968271774-avatar/886ad88b-d2cc-4c9e-a674-f70eb51a679c.png",
      "books_count": 18,
      "public_books_count": 0,
      "followers_count": 0,
      "following_count": 0,
      "created_at": "2020-01-08T14:21:31.000Z",
      "updated_at": "2023-11-13T09:32:35.000Z",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.book"
  },
  "user_id": 732231,
  "creator": {
    "id": 732231,
    "type": "User",
    "login": "wcywxq",
    "name": "magic",
    "description": null,
    "avatar_url": "https://cdn.nlark.com/yuque/0/2020/png/732231/1606968271774-avatar/886ad88b-d2cc-4c9e-a674-f70eb51a679c.png",
    "books_count": 18,
    "public_books_count": 0,
    "followers_count": 0,
    "following_count": 0,
    "created_at": "2020-01-08T14:21:31.000Z",
    "updated_at": "2023-11-13T09:32:35.000Z",
    "_serializer": "v2.user"
  },
  "format": "lake",
  "body": "面试官您好，我叫王宣棋，于2019年本科毕业，毕业之后去往了第一家公司：\n\n- 上海连尚网络科技有限公司，主要从事的职位是 web 前端研发工程师，部门隶属于连信事业群，主要负责消息内容审核相关的业务，做的大都是中后台相关内容，主要技术栈用的是 vue。\n- 在2021年8月份因个人原因选择到北京发展，入职滴滴出行网约车乘客前端技术部-网约车小程序，主要负责冒泡页方向(打车表单相关页面)、webx方向(一种营销增长解决方案，小程序SDK) 的需求跟进和迭代工作，在团队内部积极推动 ts 重构的工作，到目前位置主小程序的 ts 覆盖率已达到近 70%，主要使用的技术栈是 mpx(vue + wx)  + webx。\n- 在平时积极参与团队内部开源项目 mpx 的社区共建，基于小程序的分包能力 + tailwind css/windicss，构建了相关插件，主要功能是支持分包输出 css 能力，同时支持自定义配置并磨平差异。\n<a name=\"Lqxk9\"></a>\n## 难点\n\n1. typescript 联合类型 ts 推导报错，采用类型谓词的方式，通过构建通用保护函数，解决 ts 推导报错的问题。\n2. 针对项目中的部分定时器的 ts 类型报错问题，通过删除 @types/node 中的相关类型定义来解决问题\n3. 针对如何让 mpx 框架支持 tailwind 样式同时最核心的分包问题，最开始的方案是在模版解析的时刻去做相应配置抽取，最后 merge 到一起。后面发现实际上直接通过处理打包后生成的小程序项目，经过相关操作即可完成这一目的，为了支持 perge(抹平差异)，调研了相关方案，最后发现 windicss 更适合，因此最终采用了两套配置方案。核心功能复用的 tailwind cli 和 windi cli，根据微信支持的配置项 styleIsolation 来决定样式隔离的功能，这一步是分包输出目的的核心。\n4. 小程序扫码打开性能优化，在之前的业务中，我们扫码打开小程序相关二维码会流经一次中间页跳转的功能，其目的有几个：处理数据、拼接参数和埋点上报，随着主小程序框架 mpx 升级 webpack5 使得构建速度加快，封皮页需要做到扫码打开 h5 页面不经过中间页跳转的速度优化。整块的难点在于 h5 的生命周期钩子和小程序的生命周期钩子略有差异，需处理好顺序问题，关键点在于微信缓存会导致小程序关闭后二次扫码时会有缓存，这块需要在合适的时机解决缓存问题。整块因为减少了一次中间 redirect，因此性能打开速度提升了 80% 左右。\n5. 小程序上线平台遇到的问题，包括一些流程上的问题，并发量目前较小，后续会考虑相关问题.\n6. 因为腾讯国际业务加速服务 Anycast-IP 的下架，需对小程序香港域名替换，在使用了统一请求库 mpx-fetch 的业务，在主项目中通过统一拦截器处理，对于使用原生的请求方式的业务，需要推动各个业务方在对应逻辑代码上逐一进行域名环境判断替换。针对 h5 业务，通过拼接 query 标识来区分是否为香港环境。\n7. 利用 ts + proxy 增强 api 类型推导功能\n\n[王宣棋－本科2.5年－web前端研发工程师-13100970071(2).pdf](https://www.yuque.com/attachments/yuque/0/2022/pdf/732231/1652247489254-f8bb07e3-4aec-4cde-b6c9-f7ad4cff16d1.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2022%2Fpdf%2F732231%2F1652247489254-f8bb07e3-4aec-4cde-b6c9-f7ad4cff16d1.pdf%22%2C%22name%22%3A%22%E7%8E%8B%E5%AE%A3%E6%A3%8B%EF%BC%8D%E6%9C%AC%E7%A7%912.5%E5%B9%B4%EF%BC%8Dweb%E5%89%8D%E7%AB%AF%E7%A0%94%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88-13100970071(2).pdf%22%2C%22size%22%3A608247%2C%22type%22%3A%22application%2Fpdf%22%2C%22ext%22%3A%22pdf%22%2C%22status%22%3A%22done%22%2C%22taskId%22%3A%22u5a5bc5e9-3d90-42d6-889f-399bf7e7b18%22%2C%22taskType%22%3A%22upload%22%2C%22id%22%3A%22u2b2569c0%22%2C%22card%22%3A%22file%22%7D)\n",
  "body_draft": "",
  "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u3957082a\" class=\"ne-p\"><span class=\"ne-text\">面试官您好，我叫王宣棋，于2019年本科毕业，毕业之后去往了第一家公司：</span></p><ul class=\"ne-ul\"><li id=\"u4768852b\"><span class=\"ne-text\">上海连尚网络科技有限公司，主要从事的职位是 web 前端研发工程师，部门隶属于连信事业群，主要负责消息内容审核相关的业务，做的大都是中后台相关内容，主要技术栈用的是 vue。</span></li><li id=\"u715a3a2d\"><span class=\"ne-text\">在2021年8月份因个人原因选择到北京发展，入职滴滴出行网约车乘客前端技术部-网约车小程序，主要负责冒泡页方向(打车表单相关页面)、webx方向(一种营销增长解决方案，小程序SDK) 的需求跟进和迭代工作，在团队内部积极推动 ts 重构的工作，到目前位置主小程序的 ts 覆盖率已达到近 70%，主要使用的技术栈是 mpx(vue + wx)  + webx。</span></li><li id=\"u42452fd4\"><span class=\"ne-text\">在平时积极参与团队内部开源项目 mpx 的社区共建，基于小程序的分包能力 + tailwind css/windicss，构建了相关插件，主要功能是支持分包输出 css 能力，同时支持自定义配置并磨平差异。</span></li></ul><h2 id=\"Lqxk9\"><span class=\"ne-text\">难点</span></h2><ol class=\"ne-ol\"><li id=\"uad3f8a1e\"><span class=\"ne-text\">typescript 联合类型 ts 推导报错，采用类型谓词的方式，通过构建通用保护函数，解决 ts 推导报错的问题。</span></li><li id=\"uea9041ef\"><span class=\"ne-text\">针对项目中的部分定时器的 ts 类型报错问题，通过删除 @types/node 中的相关类型定义来解决问题</span></li><li id=\"u7d3f1ab4\"><span class=\"ne-text\">针对如何让 mpx 框架支持 tailwind 样式同时最核心的分包问题，最开始的方案是在模版解析的时刻去做相应配置抽取，最后 merge 到一起。后面发现实际上直接通过处理打包后生成的小程序项目，经过相关操作即可完成这一目的，为了支持 perge(抹平差异)，调研了相关方案，最后发现 windicss 更适合，因此最终采用了两套配置方案。核心功能复用的 tailwind cli 和 windi cli，根据微信支持的配置项 styleIsolation 来决定样式隔离的功能，这一步是分包输出目的的核心。</span></li><li id=\"u7abffe32\"><span class=\"ne-text\">小程序扫码打开性能优化，在之前的业务中，我们扫码打开小程序相关二维码会流经一次中间页跳转的功能，其目的有几个：处理数据、拼接参数和埋点上报，随着主小程序框架 mpx 升级 webpack5 使得构建速度加快，封皮页需要做到扫码打开 h5 页面不经过中间页跳转的速度优化。整块的难点在于 h5 的生命周期钩子和小程序的生命周期钩子略有差异，需处理好顺序问题，关键点在于微信缓存会导致小程序关闭后二次扫码时会有缓存，这块需要在合适的时机解决缓存问题。整块因为减少了一次中间 redirect，因此性能打开速度提升了 80% 左右。</span></li><li id=\"u5f89d38e\"><span class=\"ne-text\">小程序上线平台遇到的问题，包括一些流程上的问题，并发量目前较小，后续会考虑相关问题.</span></li><li id=\"u6007b81b\"><span class=\"ne-text\">因为腾讯国际业务加速服务 Anycast-IP 的下架，需对小程序香港域名替换，在使用了统一请求库 mpx-fetch 的业务，在主项目中通过统一拦截器处理，对于使用原生的请求方式的业务，需要推动各个业务方在对应逻辑代码上逐一进行域名环境判断替换。针对 h5 业务，通过拼接 query 标识来区分是否为香港环境。</span></li><li id=\"u02cfc29a\"><span class=\"ne-text\">利用 ts + proxy 增强 api 类型推导功能</span></li></ol><p id=\"u71560373\" class=\"ne-p\"><a href=\"https://www.yuque.com/attachments/yuque/0/2022/pdf/732231/1652247489254-f8bb07e3-4aec-4cde-b6c9-f7ad4cff16d1.pdf\" id=\"u2b2569c0\" class=\"ne-card-file\">📎王宣棋－本科2.5年－web前端研发工程师-13100970071(2).pdf</a></p></div>",
  "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u3957082a\" id=\"u3957082a\"><span data-lake-id=\"u619f9aab\" id=\"u619f9aab\">面试官您好，我叫王宣棋，于2019年本科毕业，毕业之后去往了第一家公司：</span></p><ul list=\"uf6f03b14\"><li fid=\"ue0ba755b\" data-lake-id=\"u4768852b\" id=\"u4768852b\"><span data-lake-id=\"u1ad08321\" id=\"u1ad08321\">上海连尚网络科技有限公司，主要从事的职位是 web 前端研发工程师，部门隶属于连信事业群，主要负责消息内容审核相关的业务，做的大都是中后台相关内容，主要技术栈用的是 vue。</span></li><li fid=\"ue0ba755b\" data-lake-id=\"u715a3a2d\" id=\"u715a3a2d\"><span data-lake-id=\"u5be54992\" id=\"u5be54992\">在2021年8月份因个人原因选择到北京发展，入职滴滴出行网约车乘客前端技术部-网约车小程序，主要负责冒泡页方向(打车表单相关页面)、webx方向(一种营销增长解决方案，小程序SDK) 的需求跟进和迭代工作，在团队内部积极推动 ts 重构的工作，到目前位置主小程序的 ts 覆盖率已达到近 70%，主要使用的技术栈是 mpx(vue + wx)  + webx。</span></li><li fid=\"ue0ba755b\" data-lake-id=\"u42452fd4\" id=\"u42452fd4\"><span data-lake-id=\"ub8901dff\" id=\"ub8901dff\">在平时积极参与团队内部开源项目 mpx 的社区共建，基于小程序的分包能力 + tailwind css/windicss，构建了相关插件，主要功能是支持分包输出 css 能力，同时支持自定义配置并磨平差异。</span></li></ul><h2 data-lake-id=\"Lqxk9\" id=\"Lqxk9\"><span data-lake-id=\"u4cb6aa12\" id=\"u4cb6aa12\">难点</span></h2><ol list=\"u7121a721\"><li fid=\"ub46d74eb\" data-lake-id=\"uad3f8a1e\" id=\"uad3f8a1e\"><span data-lake-id=\"uc6d8faaa\" id=\"uc6d8faaa\">typescript 联合类型 ts 推导报错，采用类型谓词的方式，通过构建通用保护函数，解决 ts 推导报错的问题。</span></li><li fid=\"ub46d74eb\" data-lake-id=\"uea9041ef\" id=\"uea9041ef\"><span data-lake-id=\"u7c7500a6\" id=\"u7c7500a6\">针对项目中的部分定时器的 ts 类型报错问题，通过删除 @types/node 中的相关类型定义来解决问题</span></li><li fid=\"ub46d74eb\" data-lake-id=\"u7d3f1ab4\" id=\"u7d3f1ab4\"><span data-lake-id=\"u908e2fbe\" id=\"u908e2fbe\">针对如何让 mpx 框架支持 tailwind 样式同时最核心的分包问题，最开始的方案是在模版解析的时刻去做相应配置抽取，最后 merge 到一起。后面发现实际上直接通过处理打包后生成的小程序项目，经过相关操作即可完成这一目的，为了支持 perge(抹平差异)，调研了相关方案，最后发现 windicss 更适合，因此最终采用了两套配置方案。核心功能复用的 tailwind cli 和 windi cli，根据微信支持的配置项 styleIsolation 来决定样式隔离的功能，这一步是分包输出目的的核心。</span></li><li fid=\"ub46d74eb\" data-lake-id=\"u7abffe32\" id=\"u7abffe32\"><span data-lake-id=\"ufd2292df\" id=\"ufd2292df\">小程序扫码打开性能优化，在之前的业务中，我们扫码打开小程序相关二维码会流经一次中间页跳转的功能，其目的有几个：处理数据、拼接参数和埋点上报，随着主小程序框架 mpx 升级 webpack5 使得构建速度加快，封皮页需要做到扫码打开 h5 页面不经过中间页跳转的速度优化。整块的难点在于 h5 的生命周期钩子和小程序的生命周期钩子略有差异，需处理好顺序问题，关键点在于微信缓存会导致小程序关闭后二次扫码时会有缓存，这块需要在合适的时机解决缓存问题。整块因为减少了一次中间 redirect，因此性能打开速度提升了 80% 左右。</span></li><li fid=\"ub46d74eb\" data-lake-id=\"u5f89d38e\" id=\"u5f89d38e\"><span data-lake-id=\"ue1b75ea2\" id=\"ue1b75ea2\">小程序上线平台遇到的问题，包括一些流程上的问题，并发量目前较小，后续会考虑相关问题.</span></li><li fid=\"ub46d74eb\" data-lake-id=\"u6007b81b\" id=\"u6007b81b\"><span data-lake-id=\"ua56069ce\" id=\"ua56069ce\">因为腾讯国际业务加速服务 Anycast-IP 的下架，需对小程序香港域名替换，在使用了统一请求库 mpx-fetch 的业务，在主项目中通过统一拦截器处理，对于使用原生的请求方式的业务，需要推动各个业务方在对应逻辑代码上逐一进行域名环境判断替换。针对 h5 业务，通过拼接 query 标识来区分是否为香港环境。</span></li><li fid=\"ub46d74eb\" data-lake-id=\"u02cfc29a\" id=\"u02cfc29a\"><span data-lake-id=\"uf2a4a914\" id=\"uf2a4a914\">利用 ts + proxy 增强 api 类型推导功能</span></li></ol><p data-lake-id=\"u71560373\" id=\"u71560373\"><card type=\"inline\" name=\"file\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2022%2Fpdf%2F732231%2F1652247489254-f8bb07e3-4aec-4cde-b6c9-f7ad4cff16d1.pdf%22%2C%22name%22%3A%22%E7%8E%8B%E5%AE%A3%E6%A3%8B%EF%BC%8D%E6%9C%AC%E7%A7%912.5%E5%B9%B4%EF%BC%8Dweb%E5%89%8D%E7%AB%AF%E7%A0%94%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88-13100970071(2).pdf%22%2C%22size%22%3A608247%2C%22type%22%3A%22application%2Fpdf%22%2C%22ext%22%3A%22pdf%22%2C%22status%22%3A%22done%22%2C%22taskId%22%3A%22u5a5bc5e9-3d90-42d6-889f-399bf7e7b18%22%2C%22taskType%22%3A%22upload%22%2C%22id%22%3A%22u2b2569c0%22%7D\"></card></p>",
  "body_draft_lake": "",
  "public": 0,
  "status": 1,
  "view_status": 0,
  "read_status": 1,
  "likes_count": 0,
  "comments_count": 0,
  "content_updated_at": "2022-05-11T05:38:30.000Z",
  "deleted_at": null,
  "created_at": "2022-03-28T09:37:48.000Z",
  "updated_at": "2022-05-11T05:38:30.000Z",
  "published_at": "2022-05-11T05:38:30.000Z",
  "first_published_at": "2022-03-28T10:27:12.000Z",
  "word_count": 1034,
  "cover": null,
  "description": "面试官您好，我叫王宣棋，于2019年本科毕业，毕业之后去往了第一家公司：上海连尚网络科技有限公司，主要从事的职位是 web 前端研发工程师，部门隶属于连信事业群，主要负责消息内容审核相关的业务，做的大都是中后台相关内容，主要技术栈用的是 vue。在2021年8月份因个人原因选择到北京发展，入职...",
  "custom_description": null,
  "hits": 0,
  "_serializer": "v2.doc_detail"
}