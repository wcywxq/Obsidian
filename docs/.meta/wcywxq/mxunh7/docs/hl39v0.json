{
  "id": 72212157,
  "slug": "hl39v0",
  "title": "loader 和 plugin",
  "book_id": 26225124,
  "book": {
    "id": 26225124,
    "type": "Book",
    "slug": "mxunh7",
    "name": "八股文 eight-part essay writing",
    "user_id": 732231,
    "description": "前端八股文",
    "creator_id": 732231,
    "public": 0,
    "items_count": 239,
    "likes_count": 0,
    "watches_count": 1,
    "content_updated_at": "2023-11-11T18:15:57.023Z",
    "updated_at": "2023-11-11T18:15:57.000Z",
    "created_at": "2022-04-04T11:31:45.000Z",
    "namespace": "wcywxq/mxunh7",
    "user": {
      "id": 732231,
      "type": "User",
      "login": "wcywxq",
      "name": "magic",
      "description": null,
      "avatar_url": "https://cdn.nlark.com/yuque/0/2020/png/732231/1606968271774-avatar/886ad88b-d2cc-4c9e-a674-f70eb51a679c.png",
      "books_count": 18,
      "public_books_count": 0,
      "followers_count": 0,
      "following_count": 0,
      "created_at": "2020-01-08T14:21:31.000Z",
      "updated_at": "2023-11-13T09:32:35.000Z",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.book"
  },
  "user_id": 732231,
  "creator": {
    "id": 732231,
    "type": "User",
    "login": "wcywxq",
    "name": "magic",
    "description": null,
    "avatar_url": "https://cdn.nlark.com/yuque/0/2020/png/732231/1606968271774-avatar/886ad88b-d2cc-4c9e-a674-f70eb51a679c.png",
    "books_count": 18,
    "public_books_count": 0,
    "followers_count": 0,
    "following_count": 0,
    "created_at": "2020-01-08T14:21:31.000Z",
    "updated_at": "2023-11-13T09:32:35.000Z",
    "_serializer": "v2.user"
  },
  "format": "lake",
  "body": "<a name=\"Mawih\"></a>\n## loader\n- **概念**：`loader` 本质是一个函数，`loader runner` 会调用这个函数，该函数接收一个参数，参数是：**上一个 **`**loader**`** 产生的结果** 或者 **资源文件内容**，然后进行转换，返回转换后的结果。函数的 `this` 上下文将由 `webpack` 填充，并且 `loader runner` 具有 一些有用的方法，可以使 `loader` 改变为异步调用方式，或者获取 `query` 参数。本质上起到了非 `javaScript` 类型资源的转译预处理工作。\n- **同步模式**：用于处理单个结果，如果有多个结果处理，则必须调用 `this.callback()`，同时要返回 `undefined`，以让 `webpack` 知道该 `loader` 返回的结果在 `this.callback` 中，而不是在 `return` 中。\n- **异步模式**：必须调用 `this.async()`，来指示 `loader runner` 等待异步结果，它会返回 `this.callback()` 回调函数，随后 `loader` 必须返回 `undefined` 并且调用该回调函数。\n- **执行顺序：**当链式调用多个 `loader` 的时候，它们会以相反的顺序执行。取决于数组写法格式，**从右向左 **或者 **从下向上 **执行。\n- **配置**：`loader` 在 `module.rules` 中进行配置，作为模块的解析规则，是一个数组，每一项都是一个对象，其内部包含了 `test`(类型文件)、`loader`、`options`(参数)等属性。\n<a name=\"dY2Is\"></a>\n### 常用 loader\n\n1. 在`webpack v5`中，可以通过设置`type: \"javascript/auto\"`来使用旧的`assets loader`\n2. `raw-loader`，用来导出资源的源代码。在`webpack v5`中，被`asset/source`模块替代\n3. `file-loader`，用来发发送一个单独的文件并导出`URL`。在`webpack v5`中，被`asset/resource`模块替代\n4. `url-loader`，用来导出一个资源的`data uri`，与`file-loader`类似，区别是：可以设置一个阀值，大于的交给`file-laoder`处理，小于的返回文件的`base64`编码。在`webpack v5`中，被`asset/inline`模块替代\n5. `style-loader`：将`css`插入到`dom`中\n6. `mini-css-extract-plugin`的`MiniCssExtractPlugin.loader`：替换`style-loader`，用于将`javaScript`中的`css`分离\n7. `css-loader`：会对`@import 和 url()`进行处理，支持`css`模块化、压缩、文件导入等特性\n8. `postcss-loader`：扩展`css`语法，使用下一代`css`，可以配合`autofixer`插件添加不同浏览器前缀\n9. `sass-loader`：将`sass/scss`编译为`css`的`loader`，需要同时安装`sass`\n10. `less-loader`：将`less`编译为`css`的`loader`，需要同时安装`less`\n11. `stylus-loader`：将`stylus`编译为`css`的`loader`，需要同时安装`stylus`\n12. `babel-loader`：用于`javaScript`高版本语法降级和语法转译工作\n13. `ts-loader`：将`TypeScript`代码转译为`JavaScript`，需要同时安装`typescript`、`@babel/preset-typescript`\n14. `remark-loader`：用于加载`markdown`\n15. `vue-loader`：用来加载`vue`单文件组件\n16. `eslint-loader`：通过`eslint`检查`javaScript`代码\n17. `tslint-loader`：通过`tslint`检查`typeScript`代码\n18. `cache-loader`webpack5不适用：可以在一些性能开销较大的`loader`之前添加，目的是将结果缓存到磁盘里，在`webpack v5`中提供了该功能\n19. `svg-inline-loader`：将压缩后的 `svg` 文件内联为模块，注入到代码中\n20. `source-map-loader`：从现有的源文件中提取`source maps`，可以加载额外的`source map`文件，允许`webpack`跨库维护`source map`数据，方便调试\n21. `mocha-loader`：允许通过 `webpack` 加载和运行 `Mocha` 测试\n22. `coverjs-loader`：用来计算测试的覆盖率\n:::warning\n注意：\n\n1. `loader`支持链式调用，因此开发过程中需要严格遵守 **单一职责**，即每个 `loader` 只负责自己需要处理的内容\n2. `loader` 运行在 `node.js` 中，因此需要导出一个函数，参数是加载文件原始 `utf-8` 格式编码的字符串，返回处理后的内容\n3. 如果要返回多个结果，可以使用 `this.calback(err: Error | null, content: string | Buffer, sourceMap?: SourceMap, meta?: any) `\n4. 在 `loader` 中，异步操作需要使用 `this.async`\n5. `loader-utils` 提供了 `getOptions` 方法来获取参数信息(`webpack5` 内置为 `this.getOptions` 来获取)；`schema-utils` 提供了 `validate` 方法，用来做 `json` 模式验证\n:::\n<a name=\"Cqzlp\"></a>\n### loader 介绍\n<a name=\"UG63r\"></a>\n#### pitching loader\n`loader` 总是从右到左地被调用，有些情况下，`loader` 只关心 `request` 后面的元数据(`metadata`)，并且忽略前一个 `loader` 的结果。在实际(从右到左)执行 `loader` 之前，会先从左到右调用 `loader` 上的 `pitch` 方法。\n\n对于以下 `use` 配置：\n```javascript\nuse: [\n  'a-loader',\n  'b-loader',\n  'c-loader'\n]\n```\n将会发生这些步骤：\n```javascript\n|- a-loader `pitch`\n  |- b-loader `pitch`\n    |- c-loader `pitch`\n      |- requested module is picked up as a dependency\n    |- c-loader normal execution\n  |- b-loader normal execution\n|- a-loader normal execution\n```\n那么，为什么 `loader` 可以利用 \"跳跃(`pitching`)\" 阶段呢？\n\n首先，传递给 `pitch` 方法的 `data`，在执行阶段也会暴露在 `this.data` 之下，并且可以用于在循环时，捕获和共享前面的信息。\n```javascript\n// pitch 的捕获和共享\nmodule.exports = function(content) {\n  return someSyncOperation(content, this.data.value)\n}\n\nmodule.exports.pitch = function(remainingRequest, precedingRequest, data) {\n  data.value = 42\n}\n```\n其次，如果某个 `loader` 在 `pitch` 方法中给出一个结果，那么这个过程会回过身来，并跳过剩下的 `loader`，在上面的例子中，如果 `loader` 的 `pitch` 方法返回了一些东西：\n```javascript\nmodule.exports = function(content) {\n  return someSyncOperation(content)\n}\n\nmodule.exports.pitch = function(remainingRequest, precedingRequest, data) {\n  if (someCondition()) {\n    return `module.exports = require(${JSON.stringify(`-!${remainingRequest}`)})`\n  }\n}\n\n// 上面的步骤将被缩短为\n|- a-loader `pitch`\n  |- b-loader `pitch` returns a module\n|- a-loader normal execution\n```\n<a name=\"lyy5O\"></a>\n#### 同步 loader\n```javascript\n// 单个结果\nmodule.exports = function(content, sourceMap, meta) {\n  return someSyncOperation(content)\n}\n\n// 多个 loader\nmodule.exports = function(content, sourceMap, meta) {\n  this.callback(null, someSyncOperation(content), sourceMap, meta)\n  return // 当调用 callback() 时总是返回 undefined\n}\n```\n<a name=\"VaBOQ\"></a>\n#### 异步 loader\n```javascript\n// 单个结果\nmodule.exports = function(content, sourceMap, meta) {\n  var callback = this.async()\n  someAsyncOperation(content, function(err, result) {\n    if (err) return callback(err)\n    callback(null, result, sourceMap, meta)\n  })\n}\n\n// 多个结果\nmodule.exports = function(content, sourceMap, meta) {\n  var callback = this.async()\n  someAsyncOperation(content, function(err, result, sourceMap, meta) {\n    if (err) return callback(err)\n    callback(null, result, sourceMap, meta)\n  })\n} \n```\n<a name=\"vHMjM\"></a>\n### 案例\n<a name=\"ayqbZ\"></a>\n### mini 版 style-loader\n```javascript\nmodule.exports = function(source) {\n  return `\n    const styleTag = document.createElement('style');\n    styleTag.innerHTML = ${source};\n    document.head.appendChild(styleTag);\n  `\n}\n```\n<a name=\"IhnZi\"></a>\n### mini 版 css-loader\n```javascript\nmodule.exports = function(source) {\n  return JSON.stringify(source);\n}\n```\n<a name=\"Z1eP9\"></a>\n### mini 版 less-loader\n```javascript\nconst less = require('less')\nmodule.exports = function(source) {\n  less.render(source, (err, input) => {\n    let { css } = output;\n    this.callback(err, css);\n  })\n}\n```\n<a name=\"g6BEx\"></a>\n### 编写一个 markdown-loader 实践\n\n- `markdown`相关功能模块\n```javascript\n// md.js\nconst MarkdownIt = require(\"markdown-it\")\n\n// 内置插件列表\nconst MarkdownItPluginsList = [\n  'markdown-it-sup',\n  'markdown-it-sub',\n  'markdown-it-mark',\n  'markdown-it-kbd',\n  'markdown-it-kbd',\n  'markdown-it-underline',\n  'markdown-it-deflist',\n  'markdown-it-checkbox',\n  'markdown-it-emoji',\n  'markdown-it-task-checkbox',\n  'markdown-it-container',\n  'markdown-it-anchor',\n  'markdown-it-table-of-contents',\n  'markdown-it-footnote',\n  'markdown-it-imsize',\n  'markdown-it-implicit-figures',\n  'markdown-it-attrs',\n  'markdown-it-math',\n  'markdown-it-plantuml',\n  'markdown-it-ins',\n  'markdown-it-abbr',\n  'markdown-it-smartarrows'\n]\n\n// 默认 markdown 配置\nconst DEFAULT_MARKDOWN_OPTIONS = {\n  html: false,\n  xhtmlOut: false,\n  breaks: false,\n  langPrefix: '',\n  linkify: false,\n  typographer: false,\n  quotes: '“”‘’',\n  highlight: null,\n  plugins: [],\n  disable: [],\n}\n\nconst createMd = (options = {}) => {\n  const finalOptions = Object.assign({}, DEFAULT_MARKDOWN_OPTIONS, options)\n  const { plugins, disable } = finalOptions\n  \n  delete finalOptions.plugins\n  delete finalOptions.disable\n  delete finalOptions.enable\n  \n  const md = new MarkdownIt(finalOptions)\n  // 启动自定义插件\n  plugins.forEach(plugName => {\n    if (MarkdownItPluginsList.includes(plugName)) return\n    MarkdownItPluginsList.push(plugName)\n  })\n  \n  MarkdownItPluginList.forEach(plugName => {\n    const plug = require(plugName)\n    md.use(plug)\n  })\n  \n  // 找不到不会报错\n  md.disable(disable, true)\n  return md\n}\n```\n\n- `loader`功能模块\n```javascript\nconst { getOptions } = require(\"loader-utils\")\nconst validateOptions = require(\"schema-utils\")\nconst createMd = require(\"./md\")\n\n// options 校验\nconst MarkdownLoaderOptionsSchema = {\n  type: 'object',\n  properties: {\n    html: { type: 'boolean' },\n    xhtmlOut: { type: 'boolean' },\n    breaks: { type: 'boolean' },\n    langPrefix: { type: 'string' },\n    linkify: { type: 'boolean' },\n    typographer: { type: 'boolean' },\n    quotes: {\n      anyOf: [{ type: 'string' }, { type: 'array', items: { type: 'string' } }],\n    },\n    highlight: { instanceof: 'Function' },\n    plugins: { type: 'array', items: { type: 'string' } },\n    disable: { type: 'array', items: { type: 'string' } },\n  },\n  additionalProperties: false\n}\n\nmodule.exports = function(source) {\n  this.cacheable()\n  const options = getOptions(this)\n  validateOptions(MarkdownLoaderOptionsSchema, options, {\n    name: 'MarkdownLoader',\n    baseDataPath: 'options'\n  })\n  const md = createMd(options)\n  return md.render(source)\n}\n```\n\n- `webpack.config.js`\n```javascript\nconst path = require(\"path\")\n\nmodule.exports = {\n  mode: \"development\",\n  entry: \"./src/index.js\",\n  output: {\n    filename: \"main.js\",\n    path: path.resolve(__dirname, \"dist\")\n  },\n  module: {\n    rules: [\n      {\n        test: /.md$/,\n        use: [\n          { \n            loader: \"./markdown-webpack-loader\",\n            options: {\n              html: true,\n              plugins: [],\n              disable: []\n            }\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n该`markdown-webpack-loader`的`options`除了支持所有的`markdown-it`初始化参数外，还额外支持`plugins`，添加额外本地插件，以及`disable`，禁用某些插件功能\n\n---\n\n<a name=\"bquBs\"></a>\n## plugin\n\n- **原理**：`plugin` 就是插件，基于事件流框架 `tapable`，插件可以扩展 `webpack` 的功能，在 `webpack` 运行的生命周期中会广播出许多事件，`plugin` 可以监听这些事件，在合适的时机通过 `webpack` 提供的 API 改变输出结果\n- **组成**：\n   - 一个 `javaScript` 命名函数或 `javaScript` 类\n   - 在插件函数的 `prototype`(原型) 上定义一个 `apply` 方法\n   - 指定一个绑定到 `webpack` 自身的事件钩子(`hook`)\n   - 处理 `webpack` 内部实例的特定数据\n   - 功能完成后调用 `webpack` 提供的回调(`callback`)\n- **概念**：`webpack plugin` 是一个具有 `apply` 属性的 `javaScript` 对象。`apply` 属性会被 `webpack compiler` 调用，并且 `compiler` 对象可能在整个编译生命周期内访问。`compilation` 模块会被 `compiler` 用来创建新的 `compilation` 对象(或新的 `build` 对象)。`compilation` 实例能够访问所有的模块和它们的依赖(大部分是循环依赖)。它会对应用程序依赖图中的所有模块，进行字面上的编译(`literal compilation`)。在编译阶段，模块会被加、封存、优化、分块、哈希和重新创建(`load`、`seal`、`optimize`、`chunk`、`hash`、`restore`)\n   - 全局唯一`compiler` 实例：包含了 `webpack` 环境的所有配置信息，包含 `options`、`loaders`、`plugins`，在 `webpack` 启动时实例化，也可以理解为 `webpack` 的实例。`compiler` 模块是 `webpack` 的支柱引擎，它通过 `cli` 或 `node api` 传递所有选项，创建出一个 `compilation` 实例。它扩展(`extend`)自 `tapable` 类，以便于注册和调用插件。\n   - `compilation` 钩子：包含当前模块资源，编译生成资源，`webpack` 在开发模式下运行的时候，每当监测到一个文件变化，就会创建一次新的 `compilation`。\n- **执行顺序**：按照编译顺序执行\n- **配置**：`plugin` 在 `plugins` 中单独配置，类型为数组，每一项都是一个 `plugin` 实例，参数都通过构造函数传入\n\n---\n\n<a name=\"OoObb\"></a>\n### 常用 plugin\n\n- `webpack-bar`：自定义构建进度条\n- `html-webpack-plugin`：可根据模版自动生成 `html` 代码，并自动引用 `css` 和 `js` 文件\n- `mini-css-extract-plugin`：常用于 `css`包分离\n- 压缩`css`代码、重复`css`代码去重复：\n   - `optimize-css-assets-webpack-plugin`webpack5不适用\n   - `css-minimizer-webpack-plugin`webpack5适用\n- 压缩`js`\n   - `uglifyjs-webpack-plugin`webpack5不适用，同时使用`thread-loader`来开启多进程并行压缩代码webpack5不适用\n   - `terser-webpack-plugin`webpack5适用`parallel: true` 使用多进程并行压缩代码\n- 在`webpack v4`开始，使用`optimization.splitChunks`替代 `webpack.optimize.CommonsChunkPlugin`，用于代码分包 `chunk`，公共资源拆分\n- `clean-webpack-plugin`：使用此插件后，`webpack`打包后的`dist`目录中的所有文件将被删除一次\n- `webpack-bundle-analyzer`：可视化分析包体积大小\n- `webpack-dev-server`：使用 `webpack` 和提供实时重载的开发服务器\n- `webpack-merge`：提取公共配置，减少重复配置代码\n- `webpack-dashboard`：`webpack` 服务器仪表盘，更友好的展示相关的打包信息\n- `compression-webpack-plugin`：开启 `gzip` 压缩\n- `eslint-webpack-plugin`：用于查找和修复`javaScript`代码中的问题\n- `speed-measure-webpack-plugin`：简称为`SMP`，分析出`webpack`打包过程中`loader`和`plugin`的耗时，有助于找到构建过程中的性能瓶颈\n- `webpack`内置插件\n   - `webpack.DefinePlugin`：编译时配置全局变量，对开发模式和生产模式的构建允许不同的行为非常有用(可配合 `.env` 使用)\n   - `webpack.HotModuleReplacementPlugin`：热更新，即`HMR`。在配置了`devServer.hot: true`自动添加该插件\n   - `webpack.DllPlugin`：配合`webpack.DllReferencePlugin`使用索引链接，配合`mailfest.json`来抽离第三方模块，常用于对静态不变的第三方库进行处理，从而大幅度提升构建速度。\n   - `webpack.SourceMapDevToolPlugin`：实现了对 `sourceMap` 生成内容进行更细粒度的控制，也可以根据`devtool`配置选项的某些设置来自动启用\n<a name=\"fmL0C\"></a>\n### plugin 中的常用对象及对应 hook\n在 `webpack` 中哪些对象可以注册 `hook`\n\n- `Compiler Hooks`\n   - [environment](https://webpack.js.org/api/compiler-hooks/#environment)\n   - [afterEnvironment](https://webpack.js.org/api/compiler-hooks/#afterenvironment)\n   - [entryOption](https://webpack.js.org/api/compiler-hooks/#entryoption)\n   - [afterPlugins](https://webpack.js.org/api/compiler-hooks/#afterplugins)\n   - [afterResolvers](https://webpack.js.org/api/compiler-hooks/#afterresolvers)\n   - [initialize](https://webpack.js.org/api/compiler-hooks/#initialize)\n   - [beforeRun](https://webpack.js.org/api/compiler-hooks/#beforerun)\n   - [run](https://webpack.js.org/api/compiler-hooks/#run)\n   - [watchRun](https://webpack.js.org/api/compiler-hooks/#watchrun)\n   - [normalModuleFactory](https://webpack.js.org/api/compiler-hooks/#normalmodulefactory)\n   - [contextModuleFactory](https://webpack.js.org/api/compiler-hooks/#contextmodulefactory)\n   - [beforeCompile](https://webpack.js.org/api/compiler-hooks/#beforecompile)\n   - [compile](https://webpack.js.org/api/compiler-hooks/#compile)\n   - [thisCompilation](https://webpack.js.org/api/compiler-hooks/#thiscompilation)\n   - [compilation](https://webpack.js.org/api/compiler-hooks/#compilation)\n   - [make](https://webpack.js.org/api/compiler-hooks/#make)\n   - [afterCompile](https://webpack.js.org/api/compiler-hooks/#aftercompile)\n   - [shouldEmit](https://webpack.js.org/api/compiler-hooks/#shouldemit)\n   - [emit](https://webpack.js.org/api/compiler-hooks/#emit)\n   - [afterEmit](https://webpack.js.org/api/compiler-hooks/#afteremit)\n   - [assetEmitted](https://webpack.js.org/api/compiler-hooks/#assetemitted)\n   - [done](https://webpack.js.org/api/compiler-hooks/#done)\n   - [additionalPass](https://webpack.js.org/api/compiler-hooks/#additionalpass)\n   - [failed](https://webpack.js.org/api/compiler-hooks/#failed)\n   - [invalid](https://webpack.js.org/api/compiler-hooks/#invalid)\n   - [watchClose](https://webpack.js.org/api/compiler-hooks/#watchclose)\n   - [infrastructureLog](https://webpack.js.org/api/compiler-hooks/#infrastructurelog)\n   - [log](https://webpack.js.org/api/compiler-hooks/#log)\n- `Compilation Hook`\n   - [buildModule](https://webpack.js.org/api/compilation-hooks/#buildmodule)\n   - [rebuildModule](https://webpack.js.org/api/compilation-hooks/#rebuildmodule)\n   - [failedModule](https://webpack.js.org/api/compilation-hooks/#failedmodule)\t\n   - [succeedModule](https://webpack.js.org/api/compilation-hooks/#succeedmodule)\n   - [finishModules](https://webpack.js.org/api/compilation-hooks/#finishmodules)\n   - [finishRebuildingModule](https://webpack.js.org/api/compilation-hooks/#finishrebuildingmodule)\n   - [seal](https://webpack.js.org/api/compilation-hooks/#seal)\n   - [unseal](https://webpack.js.org/api/compilation-hooks/#unseal)\n   - [optimizeDependencies](https://webpack.js.org/api/compilation-hooks/#optimizedependencies)\n   - [afterOptimizeDependencies](https://webpack.js.org/api/compilation-hooks/#afteroptimizedependencies)\n   - [optimize](https://webpack.js.org/api/compilation-hooks/#optimize)\n   - [optimizeModules](https://webpack.js.org/api/compilation-hooks/#optimizemodules)\n   - [afterOptimizeModules](https://webpack.js.org/api/compilation-hooks/#afteroptimizemodules)\n   - [optimizeChunks](https://webpack.js.org/api/compilation-hooks/#optimizechunks)\n   - [afterOptimizeChunks](https://webpack.js.org/api/compilation-hooks/#afteroptimizechunks)\n   - [optimizeTree](https://webpack.js.org/api/compilation-hooks/#optimizetree)\n   - [afterOptimizeTree](https://webpack.js.org/api/compilation-hooks/#afteroptimizetree)\n   - [optimizeChunkModules](https://webpack.js.org/api/compilation-hooks/#optimizechunkmodules)\n   - [afterOptimizeChunkModules](https://webpack.js.org/api/compilation-hooks/#afteroptimizechunkmodules)\n   - [shouldRecord](https://webpack.js.org/api/compilation-hooks/#shouldrecord)\n   - [reviveModules](https://webpack.js.org/api/compilation-hooks/#revivemodules)\n   - [beforeModuleIds](https://webpack.js.org/api/compilation-hooks/#beforemoduleids)\n   - [moduleIds](https://webpack.js.org/api/compilation-hooks/#moduleids)\n   - [optimizeModuleIds](https://webpack.js.org/api/compilation-hooks/#optimizemoduleids)\n   - [afterOptimizeModuleIds](https://webpack.js.org/api/compilation-hooks/#afteroptimizemoduleids)\n   - [reviveChunks](https://webpack.js.org/api/compilation-hooks/#revivechunks)\n   - [beforeChunkIds](https://webpack.js.org/api/compilation-hooks/#beforechunkids)\n   - [chunkIds](https://webpack.js.org/api/compilation-hooks/#chunkids)\n   - [optimizeChunkIds](https://webpack.js.org/api/compilation-hooks/#optimizechunkids)\n   - [afterOptimizeChunkIds](https://webpack.js.org/api/compilation-hooks/#afteroptimizechunkids)\n   - [recordModules](https://webpack.js.org/api/compilation-hooks/#recordmodules)\n   - [recordChunks](https://webpack.js.org/api/compilation-hooks/#recordchunks)\n   - [beforeModuleHash](https://webpack.js.org/api/compilation-hooks/#beforemodulehash)\n   - [afterModuleHash](https://webpack.js.org/api/compilation-hooks/#aftermodulehash)\n   - [beforeHash](https://webpack.js.org/api/compilation-hooks/#beforehash)\n   - [afterHash](https://webpack.js.org/api/compilation-hooks/#afterhash)\n   - [recordHash](https://webpack.js.org/api/compilation-hooks/#recordhash)\n   - [record](https://webpack.js.org/api/compilation-hooks/#record)\n   - [beforeModuleAssets](https://webpack.js.org/api/compilation-hooks/#beforemoduleassets)\n   - [additionalChunkAssets](https://webpack.js.org/api/compilation-hooks/#additionalchunkassets)\n   - [shouldGenerateChunkAssets](https://webpack.js.org/api/compilation-hooks/#shouldgeneratechunkassets)\n   - [beforeChunkAssets](https://webpack.js.org/api/compilation-hooks/#beforechunkassets)\n   - [additionalAssets](https://webpack.js.org/api/compilation-hooks/#additionalassets)\n   - [optimizeChunkAssets](https://webpack.js.org/api/compilation-hooks/#optimizechunkassets)\n   - [afterOptimizeChunkAssets](https://webpack.js.org/api/compilation-hooks/#afteroptimizechunkassets)\n   - [optimizeAssets](https://webpack.js.org/api/compilation-hooks/#optimizeassets)\n   - [afterOptimizeAssets](https://webpack.js.org/api/compilation-hooks/#afteroptimizeassets)\n   - [processAssets](https://webpack.js.org/api/compilation-hooks/#processassets)\n   - [afterProcessAssets](https://webpack.js.org/api/compilation-hooks/#afterprocessassets)\n   - [needAdditionalSeal](https://webpack.js.org/api/compilation-hooks/#needadditionalseal)\n   - [afterSeal](https://webpack.js.org/api/compilation-hooks/#afterseal)\n   - [chunkHash](https://webpack.js.org/api/compilation-hooks/#chunkhash)\n   - [moduleAsset](https://webpack.js.org/api/compilation-hooks/#moduleasset)\n   - [chunkAsset](https://webpack.js.org/api/compilation-hooks/#chunkasset)\n   - [assetPath](https://webpack.js.org/api/compilation-hooks/#assetpath)\n   - [needAdditionalPass](https://webpack.js.org/api/compilation-hooks/#needadditionalpass)\n   - [childCompiler](https://webpack.js.org/api/compilation-hooks/#childcompiler)\n   - [normalModuleLoader](https://webpack.js.org/api/compilation-hooks/#normalmoduleloader)\n- `ContextModuleFactory Hooks`\n   - [beforeResolve](https://webpack.js.org/api/contextmodulefactory-hooks/#beforeresolve)\n   - [afterResolve](https://webpack.js.org/api/contextmodulefactory-hooks/#afterresolve)\n   - [contextModuleFiles](https://webpack.js.org/api/contextmodulefactory-hooks/#contextmodulefiles)\n   - [alternativeRequests](https://webpack.js.org/api/contextmodulefactory-hooks/#alternativerequests)\n- `JavascriptParser Hooks`\n   - [evaluateTypeof](https://webpack.js.org/api/parser/#evaluatetypeof)\n   - [evaluate](https://webpack.js.org/api/parser/#evaluate)\n   - [evaluateIdentifier](https://webpack.js.org/api/parser/#evaluateidentifier)\n   - [evaluateDefinedIdentifier](https://webpack.js.org/api/parser/#evaluatedefinedidentifier)\n   - [evaluateCallExpressionMember](https://webpack.js.org/api/parser/#evaluatecallexpressionmember)\n   - [statement](https://webpack.js.org/api/parser/#statement)\n   - [statementIf](https://webpack.js.org/api/parser/#statementif)\n   - [label](https://webpack.js.org/api/parser/#label)\n   - [import](https://webpack.js.org/api/parser/#import)\n   - [importSpecifier](https://webpack.js.org/api/parser/#importspecifier)\n   - [export](https://webpack.js.org/api/parser/#export)\n   - [exportImport](https://webpack.js.org/api/parser/#exportimport)\n   - [exportDeclaration](https://webpack.js.org/api/parser/#exportdeclaration)\n   - [exportExpression](https://webpack.js.org/api/parser/#exportexpression)\n   - [exportSpecifier](https://webpack.js.org/api/parser/#exportspecifier)\n   - [exportImportSpecifier](https://webpack.js.org/api/parser/#exportimportspecifier)\n   - [varDeclaration](https://webpack.js.org/api/parser/#vardeclaration)\n   - [varDeclarationLet](https://webpack.js.org/api/parser/#vardeclarationlet)\n   - [varDeclarationConst](https://webpack.js.org/api/parser/#vardeclarationconst)\n   - [varDeclarationVar](https://webpack.js.org/api/parser/#vardeclarationvar)\n   - [canRename](https://webpack.js.org/api/parser/#canrename)\n   - [rename](https://webpack.js.org/api/parser/#rename)\n   - [assigned](https://webpack.js.org/api/parser/#assigned)\n   - [assign](https://webpack.js.org/api/parser/#assign)\n   - [typeof](https://webpack.js.org/api/parser/#typeof)\n   - [call](https://webpack.js.org/api/parser/#call)\n   - [callMemberChain](https://webpack.js.org/api/parser/#callmemberchain)\n   - [new](https://webpack.js.org/api/parser/#new)\n   - [expression](https://webpack.js.org/api/parser/#expression)\n   - [expressionConditionalOperator](https://webpack.js.org/api/parser/#expressionconditionaloperator)\n   - [program](https://webpack.js.org/api/parser/#program)\n- `NormalModuleFactory Hooks`\n   - [beforeResolve](https://webpack.js.org/api/normalmodulefactory-hooks/#beforeresolve)\n   - [factorize](https://webpack.js.org/api/normalmodulefactory-hooks/#factorize)\n   - [resolve](https://webpack.js.org/api/normalmodulefactory-hooks/#resolve)\n   - [resolveForScheme](https://webpack.js.org/api/normalmodulefactory-hooks/#resolveforscheme)\n   - [afterResolve](https://webpack.js.org/api/normalmodulefactory-hooks/#afterresolve)\n   - [createModule](https://webpack.js.org/api/normalmodulefactory-hooks/#createmodule)\n   - [module](https://webpack.js.org/api/normalmodulefactory-hooks/#module)\n   - [createParser](https://webpack.js.org/api/normalmodulefactory-hooks/#createparser)\n   - [parser](https://webpack.js.org/api/normalmodulefactory-hooks/#parser)\n   - [createGenerator](https://webpack.js.org/api/normalmodulefactory-hooks/#creategenerator)\n   - [generator](https://webpack.js.org/api/normalmodulefactory-hooks/#generator)\n<a name=\"k6FRY\"></a>\n### 插件的不同类型\n`webpack` 插件可以按照它所注册的事件分成不同的类型。每一个事件钩子都预先定义为同步、异步、瀑布或并行钩子，钩子在内部用 `call/callAsync` 方法调用。支持的钩子清单或可被绑定的钩子清单，通常在 `this.hooks` 属性指定。\n\n- 例如：\n```javascript\nthis.hooks = {\n  shouldEmit: new SyncBailHook(['compilation']),\n};\n```\n表示唯一支持的钩子是 `shouldEmit` ，这是一个 `SyncBailHook` 类型的钩子，传入插件的唯一参数是 `compilation` 。<br />支持的各类型钩子：\n<a name=\"QXII3\"></a>\n### 同步 hooks\n\n- `SyncHook`\n   - 通过 `new SyncHook([params])` 定义。\n   - 用 `tap` 方法绑定。\n   - 用 `call(...params)` 方法调用。\n- `Bail`(保险) `Hooks`\n   - 通过 `new SyncBailHook([params])` 定义。\n   - 用 `tap` 方法绑定。\n   - 用 `call(...params)` 方法调用。\n:::info\n`Bail` 类型的钩子，其插件回调函数是串行调用，任意一个插件回调函数返回非 `undefined` 值，则停止执行插件，该值作为钩子的返回值。`optimizeChunks`，`optimizeChunkModules` 等很有用的事件都是 `SyncBailHooks` 。\n:::\n\n- Waterfall(瀑布) Hooks\n   - 通过 `new SyncWaterfallHook([params])` 定义。\n   - 用 `tap` 方法绑定。\n   - 用 `call(...params)` 方法调用。\n:::info\n该类型的插件是一个接一个串行执行，前一个的返回值作为后一个的入参。插件需要考虑执行的顺序，因为后一个插件必须接受前一个插件执行的结果作为入参。第一个插件的参数为 `init` 。 所以 `waterfall` 钩子至少要制定一个参数。这种模式用于和 `ModuleTemplate`，`ChunkTemplate` 等 `webpack` 模板相关的 `Tapable` 实例。\n:::\n<a name=\"hLMyk\"></a>\n### 异步 hooks\n\n- `Async Series`(异步串联) `Hook`\n   - 通过 `new AsyncSeriesHook([params])`定义。\n   - 用 `tap/tapAsync/tapPromise`方法绑定。\n   - 用 `callAsync(...params)`方法调用。\n- `Async waterfall`(异步瀑布) 插件会用 `waterfall` 方式异步应用\n   - 通过 `new AsyncWaterfallHook([params])`定义。\n   - 用 `tap/tapAsync/tapPromise`方法绑定。\n   - 用 `callAsync(...params)`方法调用。\n:::info\n插件处理函数的参数为当前值，以及一个签名为 `(err: Error, nextValue: any) -> void`的 `callback`函数。调用时 `nextValue`是下一个处理函数的当前值。第一个处理函数的当前是只 `init`。当所有 `handler`都执行后，`callback`执行，参数为最后一个值。任一个 `handler`传入 `err`值，停止调用 `handler`且 `callback`被调用。 这种模式在 `before-resolve`和 `after-resolve`事件中常见。\n:::\n\n- Async Series Bail\n   - 通过 `new AsyncSeriesBailHook([params]) `定义。\n   - 用 `tap/tapAsync/tapPromise` 方法绑定。\n   - 用 `callAsync(...params)` 方法调用。\n- Async Parallel\n   - 通过 `new AsyncParallelHook([params])` 定义。\n   - 用 `tap/tapAsync/tapPromise` 方法绑定。\n   - 用 `callAsync(...params)` 方法调用。\n<a name=\"jW5lj\"></a>\n### 案例\n```javascript\n// 一个 JavaScript 类\nclass MyExampleWebpackPlugin {\n  // 在插件函数的 prototype 上定义一个 `apply` 方法，以 compiler 为参数\n  apply(compiler) {\n    // 指定一个挂载到 webpack 自身的事件钩子\n    compiler.hooks.emit.tapAsync('MyExampleWebpackPLugin', (compilation, callback) => {\n      console.log('这是一个 example plugin')\n      console.log('资源单次构建的 compilation 对象',  compilation)\n      // 用 webpack 提供的插件 api 处理构建过程\n      compilation.addModule(/* ... */)\n      callback()\n    })\n  }\n}\n```\n\n- 案例一\n```javascript\nconst { validate } = require(\"schema-utils\")\n\n// 选项对象的 schema\nconst schema = {\n    type: \"object\",\n    properties: {\n        test: {\n            type: \"string\"\n        }\n    }\n}\n\nclass HelloWorldPlugin {\n    constructor(options = {}) {\n        validate(schema, options, {\n            name: \"hello world plugin\",\n            baseDataPath: \"options\"\n        })\n    }\n\n    apply(compiler) {\n        compiler.hooks.done.tap(\"hello world plugin\", stats => {\n            console.log(\"hello, world!\")\n        })\n    }\n}\n\nmodule.exports = HelloWorldPlugin\n```\n\n- 案例二\n```javascript\nclass HelloCompilationPlugin {\n    apply(compiler) {\n        // 指定一个挂载到 compilation 的钩子，回调函数的参数为 compilation\n        compiler.hooks.compilation.tap('HelloCompilationPlugin', compilation => {\n            // 现在可以通过 compilation 对象绑定各种钩子\n            compilation.hooks.optimize.tap('HelloCompilationPlugin', () => {\n                console.log('资源已优化完毕')\n            })\n        })\n    }\n}\n\nmodule.exports = HelloCompilationPlugin\n```\n\n- 案例三(生成一个叫做 `assets.md` 的新文件；文件内容是所有构建生成的文件的列表)\n```javascript\nclass FileListPlugin {\n  static defaultOptions = {\n    outputFile: 'assets.md',\n  };\n\n  // 需要传入自定义插件构造函数的任意选项\n  //（这是自定义插件的公开API）\n  constructor(options = {}) {\n    // 在应用默认选项前，先应用用户指定选项\n    // 合并后的选项暴露给插件方法\n    // 记得在这里校验所有选项\n    this.options = { ...FileListPlugin.defaultOptions, ...options };\n  }\n\n  apply(compiler) {\n    const pluginName = FileListPlugin.name;\n\n    // webpack 模块实例，可以通过 compiler 对象访问，\n    // 这样确保使用的是模块的正确版本\n    // （不要直接 require/import webpack）\n    const { webpack } = compiler;\n\n    // Compilation 对象提供了对一些有用常量的访问。\n    const { Compilation } = webpack;\n\n    // RawSource 是其中一种 “源码”(\"sources\") 类型，\n    // 用来在 compilation 中表示资源的源码\n    const { RawSource } = webpack.sources;\n\n    // 绑定到 “thisCompilation” 钩子，\n    // 以便进一步绑定到 compilation 过程更早期的阶段\n    compiler.hooks.thisCompilation.tap(pluginName, (compilation) => {\n      // 绑定到资源处理流水线(assets processing pipeline)\n      compilation.hooks.processAssets.tap(\n        {\n          name: pluginName,\n\n          // 用某个靠后的资源处理阶段，\n          // 确保所有资源已被插件添加到 compilation\n          stage: Compilation.PROCESS_ASSETS_STAGE_SUMMARIZE,\n        },\n        (assets) => {\n          // \"assets\" 是一个包含 compilation 中所有资源(assets)的对象。\n          // 该对象的键是资源的路径，\n          // 值是文件的源码\n\n          // 遍历所有资源，\n          // 生成 Markdown 文件的内容\n          const content =\n            '# In this build:\\n\\n' +\n            Object.keys(assets)\n              .map((filename) => `- ${filename}`)\n              .join('\\n');\n\n          // 向 compilation 添加新的资源，\n          // 这样 webpack 就会自动生成并输出到 output 目录\n          compilation.emitAsset(\n            this.options.outputFile,\n            new RawSource(content)\n          );\n        }\n      );\n    });\n  }\n}\n\nmodule.exports = { FileListPlugin };\n```\n```javascript\nconst { FileListPlugin } = require('./file-list-plugin.js');\n\n// 在 webpack 配置中使用自定义的插件：\nmodule.exports = {\n  // …\n\n  plugins: [\n    // 添加插件，使用默认选项\n    new FileListPlugin(),\n\n    // 或者:\n\n    // 使用任意支持的选项\n    new FileListPlugin({\n      outputFile: 'my-assets.md',\n    }),\n  ],\n};\n```\n这样就生成了一个指定名称的 `markdown` 文件：\n```javascript\n# In this build:\n\n- main.css\n- main.js\n- index.html\n```\n<a name=\"NLgvK\"></a>\n#### 异步编译插件\n有些插件钩子是异步的。我们可以像同步方式一样用 `tap` 方法来绑定，也可以用 `tapAsync` 或 `tapPromise` 这两个异步方法来绑定。\n<a name=\"PbqEc\"></a>\n##### tapAsync\n当我们用 `tapAsync` 方法来绑定插件时，必须调用函数的最后一个参数 `callback` 指定的回调函数。\n```javascript\nclass HelloAsyncPlugin {\n  apply(compiler) {\n    compiler.hooks.emit.tapAsync('HelloAsyncPlugin', (compilation, callback) => {\n      setTimeout(() => {\n        console.log('异步任务完成...')\n        callback()\n      }, 1000)\n    })\n  }\n}\nmodule.exports = HelloAsyncPlugin\n```\n<a name=\"i7T1y\"></a>\n##### tapPromise\n当我们用 `tapPromise` 方法来绑定插件时，必须返回一个 `promise`，异步任务完成后 `resolve`\n```javascript\nclass HelloAsyncPlugin {\n  apply(compiler) {\n    compiler.hooks.emit.tapPromise('HelloAsyncPlugin', compilation => {\n      // 返回一个 promise，异步任务完成后 resolve\n      return new Promise((resolve, reject) => {\n        setTimeout(() => {\n          console.log('异步任务完成...')\n          resolve()\n        }, 1000)\n      })\n    })\n  }\n}\nmodule.exports = HelloAsyncPlugin\n```\n<a name=\"ByCN1\"></a>\n### 编写一个支持 Gzip 和 Brotli 压缩插件实践\n压缩核心功能依赖`Node zlib`模块处理编译后的资源即可\n\n- `plugin`功能模块\n```javascript\nconst zlib = require('zlib');\n\nconst DEFAULT_COMPRESS_OPTIONS = {\n  deleteOriginalAssets: false, // 是否删除压缩前的文件，看情况配置\n  algorithm: 'gzip', // 压缩算法，默认就是gzip\n  test: /./, // 所有文件都压缩\n  threshold: 1000, // 只处理比这个值大的资源。按字节计算\n  minRatio: 0.8, // 只有压缩率比这个值小的资源才会被处理\n};\n\nclass CompressPlugin {\n  constructor(options = {}) {\n    this.options = {\n      ...DEFAULT_COMPRESS_OPTIONS,\n      ...options,\n    };\n  }\n\n  compressSync(buf) {\n    const { algorithm } = this.options;\n    switch (algorithm.toLowerCase()) {\n      case 'brotli':\n        return zlib.brotliCompressSync(buf);\n      case 'gzip':\n        return zlib.gzipSync(buf);\n      default:\n        return buf;\n    }\n  }\n\n  getComporessedName(filename) {\n    const { algorithm } = this.options;\n    switch (algorithm.toLowerCase()) {\n      case 'brotli':\n        return `${filename}.br`;\n      case 'gzip':\n        return `${filename}.gz`;\n      default:\n        return filename;\n    }\n  }\n\n  apply(compiler) {\n    const { deleteOriginalAssets, test, threshold, minRatio } = this.options;\n\n    compiler.hooks.emit.tap('CompressPlugin', compilation => {\n      const assets = compilation.assets;\n      Object.keys(assets).forEach(filename => {\n        // 按文件名过滤，默认不过滤\n        if (!test.test(filename)) return;\n        const asset = assets[filename];\n\n        // 只处理比这个值大的资源。按字节计算\n        if (asset.size() <= threshold) return;\n\n        // 不支持的压缩方式不处理\n        const compressedAssetName = this.getComporessedName(filename);\n        if (filename === compressedAssetName) return;\n        const compressedAsset = this.compressSync(asset.source());\n\n        // 返回文件大小， 按字节算\n        const compressedAssetSize = Buffer.isBuffer(compressedAsset)\n          ? Buffer.byteLength(compressedAsset, 'utf8')\n          : compressedAsset.length;\n\n        // 只有压缩率比这个值小的资源才会被处理\n        if (compressedAssetSize / asset.size() >= minRatio) return;\n\n        assets[compressedAssetName] = {\n          // 返回文件内容\n          source: () =>\n            // fileContent 既可以是代表文本文件的字符串，也可以是代表二进制文件的 Buffer\n            compressedAsset,\n          // 返回文件大小， 按字节算\n          size: () => compressedAssetSize,\n        };\n        // 是否删除压缩前的文件，看情况配置\n        if (deleteOriginalAssets) {\n          delete assets[filename];\n        }\n      });\n    });\n  }\n}\n\nmodule.exports = CompressPlugin;\n```\n\n- `webpack.config.js`\n```javascript\nconst path = require(\"path\")\nconst CompressPlugin = require(\"./compress-webpack-plugin\")\n\nmodule.exports = {\n  mode: \"development\",\n  entry: \"./src/index.js\",\n  output: {\n    filename: \"main.js\",\n    path: path.resolve(__dirname, \"dist\")\n  },\n  plugins: [\n    new CompressPlugin({\n      deleteOriginalAssets: true, // 是否删除压缩前的文件，看情况配置，默认为 false\n      algorithm: \"brotli\" // 压缩算法，默认是 gzip\n    })\n  ]\n}\n```\n",
  "body_draft": "",
  "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><h2 id=\"Mawih\"><span class=\"ne-text\">loader</span></h2><ul class=\"ne-ul\"><li id=\"u1fe05e51\"><strong><span class=\"ne-text\">概念</span></strong><span class=\"ne-text\">：</span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 本质是一个函数，</span><code class=\"ne-code\"><span class=\"ne-text\">loader runner</span></code><span class=\"ne-text\"> 会调用这个函数，该函数接收一个参数，参数是：</span><strong><span class=\"ne-text\">上一个 </span></strong><code class=\"ne-code\"><strong><span class=\"ne-text\">loader</span></strong></code><strong><span class=\"ne-text\"> 产生的结果</span></strong><span class=\"ne-text\"> 或者 </span><strong><span class=\"ne-text\">资源文件内容</span></strong><span class=\"ne-text\">，然后进行转换，返回转换后的结果。函数的 </span><code class=\"ne-code\"><span class=\"ne-text\">this</span></code><span class=\"ne-text\"> 上下文将由 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 填充，并且 </span><code class=\"ne-code\"><span class=\"ne-text\">loader runner</span></code><span class=\"ne-text\"> 具有 一些有用的方法，可以使 </span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 改变为异步调用方式，或者获取 </span><code class=\"ne-code\"><span class=\"ne-text\">query</span></code><span class=\"ne-text\"> 参数。本质上起到了非 </span><code class=\"ne-code\"><span class=\"ne-text\">javaScript</span></code><span class=\"ne-text\"> 类型资源的转译预处理工作。</span></li><li id=\"ue788cce8\"><strong><span class=\"ne-text\">同步模式</span></strong><span class=\"ne-text\">：用于处理单个结果，如果有多个结果处理，则必须调用 </span><code class=\"ne-code\"><span class=\"ne-text\">this.callback()</span></code><span class=\"ne-text\">，同时要返回 </span><code class=\"ne-code\"><span class=\"ne-text\">undefined</span></code><span class=\"ne-text\">，以让 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 知道该 </span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 返回的结果在 </span><code class=\"ne-code\"><span class=\"ne-text\">this.callback</span></code><span class=\"ne-text\"> 中，而不是在 </span><code class=\"ne-code\"><span class=\"ne-text\">return</span></code><span class=\"ne-text\"> 中。</span></li><li id=\"u3caf12cc\"><strong><span class=\"ne-text\">异步模式</span></strong><span class=\"ne-text\">：必须调用 </span><code class=\"ne-code\"><span class=\"ne-text\">this.async()</span></code><span class=\"ne-text\">，来指示 </span><code class=\"ne-code\"><span class=\"ne-text\">loader runner</span></code><span class=\"ne-text\"> 等待异步结果，它会返回 </span><code class=\"ne-code\"><span class=\"ne-text\">this.callback()</span></code><span class=\"ne-text\"> 回调函数，随后 </span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 必须返回 </span><code class=\"ne-code\"><span class=\"ne-text\">undefined</span></code><span class=\"ne-text\"> 并且调用该回调函数。</span></li><li id=\"u4fef57f0\"><strong><span class=\"ne-text\">执行顺序：</span></strong><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">当链式调用多个 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">loader</span></code><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\"> 的时候，它们会以相反的顺序执行。取决于数组写法格式，</span><strong><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">从右向左 </span></strong><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">或者 </span><strong><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">从下向上 </span></strong><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">执行。</span></li><li id=\"ucd7c6273\"><strong><span class=\"ne-text\">配置</span></strong><span class=\"ne-text\">：</span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 在 </span><code class=\"ne-code\"><span class=\"ne-text\">module.rules</span></code><span class=\"ne-text\"> 中进行配置，作为模块的解析规则，是一个数组，每一项都是一个对象，其内部包含了 </span><code class=\"ne-code\"><span class=\"ne-text\">test</span></code><span class=\"ne-text\">(类型文件)、</span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\">、</span><code class=\"ne-code\"><span class=\"ne-text\">options</span></code><span class=\"ne-text\">(参数)等属性。</span></li></ul><h3 id=\"dY2Is\"><span class=\"ne-text\">常用 loader</span></h3><ol class=\"ne-ol\"><li id=\"u39f05aa6\"><span class=\"ne-text\">在</span><code class=\"ne-code\"><span class=\"ne-text\">webpack v5</span></code><span class=\"ne-text\">中，可以通过设置</span><code class=\"ne-code\"><span class=\"ne-text\">type: &quot;javascript/auto&quot;</span></code><span class=\"ne-text\">来使用旧的</span><code class=\"ne-code\"><span class=\"ne-text\">assets loader</span></code></li><li id=\"uebf5c03f\"><code class=\"ne-code\"><span class=\"ne-text\">raw-loader</span></code><span class=\"ne-text\">，用来导出资源的源代码。在</span><code class=\"ne-code\"><span class=\"ne-text\">webpack v5</span></code><span class=\"ne-text\">中，被</span><code class=\"ne-code\"><span class=\"ne-text\">asset/source</span></code><span class=\"ne-text\">模块替代</span></li><li id=\"u536f2373\"><code class=\"ne-code\"><span class=\"ne-text\">file-loader</span></code><span class=\"ne-text\">，用来发发送一个单独的文件并导出</span><code class=\"ne-code\"><span class=\"ne-text\">URL</span></code><span class=\"ne-text\">。在</span><code class=\"ne-code\"><span class=\"ne-text\">webpack v5</span></code><span class=\"ne-text\">中，被</span><code class=\"ne-code\"><span class=\"ne-text\">asset/resource</span></code><span class=\"ne-text\">模块替代</span></li><li id=\"ub113b0b7\"><code class=\"ne-code\"><span class=\"ne-text\">url-loader</span></code><span class=\"ne-text\">，用来导出一个资源的</span><code class=\"ne-code\"><span class=\"ne-text\">data uri</span></code><span class=\"ne-text\">，与</span><code class=\"ne-code\"><span class=\"ne-text\">file-loader</span></code><span class=\"ne-text\">类似，区别是：可以设置一个阀值，大于的交给</span><code class=\"ne-code\"><span class=\"ne-text\">file-laoder</span></code><span class=\"ne-text\">处理，小于的返回文件的</span><code class=\"ne-code\"><span class=\"ne-text\">base64</span></code><span class=\"ne-text\">编码。在</span><code class=\"ne-code\"><span class=\"ne-text\">webpack v5</span></code><span class=\"ne-text\">中，被</span><code class=\"ne-code\"><span class=\"ne-text\">asset/inline</span></code><span class=\"ne-text\">模块替代</span></li><li id=\"u02484084\"><code class=\"ne-code\"><span class=\"ne-text\">style-loader</span></code><span class=\"ne-text\">：将</span><code class=\"ne-code\"><span class=\"ne-text\">css</span></code><span class=\"ne-text\">插入到</span><code class=\"ne-code\"><span class=\"ne-text\">dom</span></code><span class=\"ne-text\">中</span></li><li id=\"ucb50f9ee\"><code class=\"ne-code\"><span class=\"ne-text\">mini-css-extract-plugin</span></code><span class=\"ne-text\">的</span><code class=\"ne-code\"><span class=\"ne-text\">MiniCssExtractPlugin.loader</span></code><span class=\"ne-text\">：替换</span><code class=\"ne-code\"><span class=\"ne-text\">style-loader</span></code><span class=\"ne-text\">，用于将</span><code class=\"ne-code\"><span class=\"ne-text\">javaScript</span></code><span class=\"ne-text\">中的</span><code class=\"ne-code\"><span class=\"ne-text\">css</span></code><span class=\"ne-text\">分离</span></li><li id=\"u3071bf06\"><code class=\"ne-code\"><span class=\"ne-text\">css-loader</span></code><span class=\"ne-text\">：会对</span><code class=\"ne-code\"><span class=\"ne-text\">@import 和 url()</span></code><span class=\"ne-text\">进行处理，支持</span><code class=\"ne-code\"><span class=\"ne-text\">css</span></code><span class=\"ne-text\">模块化、压缩、文件导入等特性</span></li><li id=\"u71aef820\"><code class=\"ne-code\"><span class=\"ne-text\">postcss-loader</span></code><span class=\"ne-text\">：扩展</span><code class=\"ne-code\"><span class=\"ne-text\">css</span></code><span class=\"ne-text\">语法，使用下一代</span><code class=\"ne-code\"><span class=\"ne-text\">css</span></code><span class=\"ne-text\">，可以配合</span><code class=\"ne-code\"><span class=\"ne-text\">autofixer</span></code><span class=\"ne-text\">插件添加不同浏览器前缀</span></li><li id=\"u7e4d0462\"><code class=\"ne-code\"><span class=\"ne-text\">sass-loader</span></code><span class=\"ne-text\">：将</span><code class=\"ne-code\"><span class=\"ne-text\">sass/scss</span></code><span class=\"ne-text\">编译为</span><code class=\"ne-code\"><span class=\"ne-text\">css</span></code><span class=\"ne-text\">的</span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\">，需要同时安装</span><code class=\"ne-code\"><span class=\"ne-text\">sass</span></code></li><li id=\"u4ed9807a\"><code class=\"ne-code\"><span class=\"ne-text\">less-loader</span></code><span class=\"ne-text\">：将</span><code class=\"ne-code\"><span class=\"ne-text\">less</span></code><span class=\"ne-text\">编译为</span><code class=\"ne-code\"><span class=\"ne-text\">css</span></code><span class=\"ne-text\">的</span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\">，需要同时安装</span><code class=\"ne-code\"><span class=\"ne-text\">less</span></code></li><li id=\"u0e909dfc\"><code class=\"ne-code\"><span class=\"ne-text\">stylus-loader</span></code><span class=\"ne-text\">：将</span><code class=\"ne-code\"><span class=\"ne-text\">stylus</span></code><span class=\"ne-text\">编译为</span><code class=\"ne-code\"><span class=\"ne-text\">css</span></code><span class=\"ne-text\">的</span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\">，需要同时安装</span><code class=\"ne-code\"><span class=\"ne-text\">stylus</span></code></li><li id=\"u0da74675\"><code class=\"ne-code\"><span class=\"ne-text\">babel-loader</span></code><span class=\"ne-text\">：用于</span><code class=\"ne-code\"><span class=\"ne-text\">javaScript</span></code><span class=\"ne-text\">高版本语法降级和语法转译工作</span></li><li id=\"uc7c72b8b\"><code class=\"ne-code\"><span class=\"ne-text\">ts-loader</span></code><span class=\"ne-text\">：将</span><code class=\"ne-code\"><span class=\"ne-text\">TypeScript</span></code><span class=\"ne-text\">代码转译为</span><code class=\"ne-code\"><span class=\"ne-text\">JavaScript</span></code><span class=\"ne-text\">，需要同时安装</span><code class=\"ne-code\"><span class=\"ne-text\">typescript</span></code><span class=\"ne-text\">、</span><code class=\"ne-code\"><span class=\"ne-text\">@babel/preset-typescript</span></code></li><li id=\"ufdacb5f6\"><code class=\"ne-code\"><span class=\"ne-text\">remark-loader</span></code><span class=\"ne-text\">：用于加载</span><code class=\"ne-code\"><span class=\"ne-text\">markdown</span></code></li><li id=\"u9226f2e5\"><code class=\"ne-code\"><span class=\"ne-text\">vue-loader</span></code><span class=\"ne-text\">：用来加载</span><code class=\"ne-code\"><span class=\"ne-text\">vue</span></code><span class=\"ne-text\">单文件组件</span></li><li id=\"uedc1c69c\"><code class=\"ne-code\"><span class=\"ne-text\">eslint-loader</span></code><span class=\"ne-text\">：通过</span><code class=\"ne-code\"><span class=\"ne-text\">eslint</span></code><span class=\"ne-text\">检查</span><code class=\"ne-code\"><span class=\"ne-text\">javaScript</span></code><span class=\"ne-text\">代码</span></li><li id=\"uc3a62329\"><code class=\"ne-code\"><span class=\"ne-text\">tslint-loader</span></code><span class=\"ne-text\">：通过</span><code class=\"ne-code\"><span class=\"ne-text\">tslint</span></code><span class=\"ne-text\">检查</span><code class=\"ne-code\"><span class=\"ne-text\">typeScript</span></code><span class=\"ne-text\">代码</span></li><li id=\"u8ee9007d\"><code class=\"ne-code\"><span class=\"ne-text\">cache-loader</span></code><span data-color=\"0\" id=\"VpFaz\" class=\"ne-label\">webpack5不适用</span><span class=\"ne-text\">：可以在一些性能开销较大的</span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\">之前添加，目的是将结果缓存到磁盘里，在</span><code class=\"ne-code\"><span class=\"ne-text\">webpack v5</span></code><span class=\"ne-text\">中提供了该功能</span></li><li id=\"ua18a1333\"><code class=\"ne-code\"><span class=\"ne-text\">svg-inline-loader</span></code><span class=\"ne-text\">：将压缩后的 </span><code class=\"ne-code\"><span class=\"ne-text\">svg</span></code><span class=\"ne-text\"> 文件内联为模块，注入到代码中</span></li><li id=\"u52b0fec8\"><code class=\"ne-code\"><span class=\"ne-text\">source-map-loader</span></code><span class=\"ne-text\">：从现有的源文件中提取</span><code class=\"ne-code\"><span class=\"ne-text\">source maps</span></code><span class=\"ne-text\">，可以加载额外的</span><code class=\"ne-code\"><span class=\"ne-text\">source map</span></code><span class=\"ne-text\">文件，允许</span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\">跨库维护</span><code class=\"ne-code\"><span class=\"ne-text\">source map</span></code><span class=\"ne-text\">数据，方便调试</span></li><li id=\"u44df75df\"><code class=\"ne-code\"><span class=\"ne-text\">mocha-loader</span></code><span class=\"ne-text\">：允许通过 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 加载和运行 </span><code class=\"ne-code\"><span class=\"ne-text\">Mocha</span></code><span class=\"ne-text\"> 测试</span></li><li id=\"u6ca7e106\"><code class=\"ne-code\"><span class=\"ne-text\">coverjs-loader</span></code><span class=\"ne-text\">：用来计算测试的覆盖率</span></li></ol><div data-type=\"warning\" class=\"ne-alert\"><p id=\"u3e114d8a\" class=\"ne-p\"><span class=\"ne-text\">注意：</span></p><ol class=\"ne-ol\"><li id=\"uf57a6a6e\"><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\">支持链式调用，因此开发过程中需要严格遵守 </span><strong><span class=\"ne-text\">单一职责</span></strong><span class=\"ne-text\">，即每个 </span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 只负责自己需要处理的内容</span></li><li id=\"uc2841018\"><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 运行在 </span><code class=\"ne-code\"><span class=\"ne-text\">node.js</span></code><span class=\"ne-text\"> 中，因此需要导出一个函数，参数是加载文件原始 </span><code class=\"ne-code\"><span class=\"ne-text\">utf-8</span></code><span class=\"ne-text\"> 格式编码的字符串，返回处理后的内容</span></li><li id=\"u49a081db\"><span class=\"ne-text\">如果要返回多个结果，可以使用 </span><code class=\"ne-code\"><span class=\"ne-text\">this.calback(err: Error | null, content: string | Buffer, sourceMap?: SourceMap, meta?: any) </span></code></li><li id=\"u665109b8\"><span class=\"ne-text\">在 </span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 中，异步操作需要使用 </span><code class=\"ne-code\"><span class=\"ne-text\">this.async</span></code></li><li id=\"u75551db6\"><code class=\"ne-code\"><span class=\"ne-text\">loader-utils</span></code><span class=\"ne-text\"> 提供了 </span><code class=\"ne-code\"><span class=\"ne-text\">getOptions</span></code><span class=\"ne-text\"> 方法来获取参数信息(</span><code class=\"ne-code\"><span class=\"ne-text\">webpack5</span></code><span class=\"ne-text\"> 内置为 </span><code class=\"ne-code\"><span class=\"ne-text\">this.getOptions</span></code><span class=\"ne-text\"> 来获取)；</span><code class=\"ne-code\"><span class=\"ne-text\">schema-utils</span></code><span class=\"ne-text\"> 提供了 </span><code class=\"ne-code\"><span class=\"ne-text\">validate</span></code><span class=\"ne-text\"> 方法，用来做 </span><code class=\"ne-code\"><span class=\"ne-text\">json</span></code><span class=\"ne-text\"> 模式验证</span></li></ol></div><h3 id=\"Cqzlp\"><span class=\"ne-text\">loader 介绍</span></h3><h4 id=\"UG63r\"><span class=\"ne-text\">pitching loader</span></h4><p id=\"u137d47d0\" class=\"ne-p\"><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 总是从右到左地被调用，有些情况下，</span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 只关心 </span><code class=\"ne-code\"><span class=\"ne-text\">request</span></code><span class=\"ne-text\"> 后面的元数据(</span><code class=\"ne-code\"><span class=\"ne-text\">metadata</span></code><span class=\"ne-text\">)，并且忽略前一个 </span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 的结果。在实际(从右到左)执行 </span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 之前，会先从左到右调用 </span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 上的 </span><code class=\"ne-code\"><span class=\"ne-text\">pitch</span></code><span class=\"ne-text\"> 方法。</span></p><p id=\"u7fef2fe4\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u29faa656\" class=\"ne-p\"><span class=\"ne-text\">对于以下 </span><code class=\"ne-code\"><span class=\"ne-text\">use</span></code><span class=\"ne-text\"> 配置：</span></p><pre data-language=\"javascript\" id=\"mi1CN\" class=\"ne-codeblock language-javascript\">use: [\n  'a-loader',\n  'b-loader',\n  'c-loader'\n]</pre><p id=\"u57688636\" class=\"ne-p\"><span class=\"ne-text\">将会发生这些步骤：</span></p><pre data-language=\"javascript\" id=\"jtrfa\" class=\"ne-codeblock language-javascript\">|- a-loader `pitch`\n  |- b-loader `pitch`\n    |- c-loader `pitch`\n      |- requested module is picked up as a dependency\n    |- c-loader normal execution\n  |- b-loader normal execution\n|- a-loader normal execution</pre><p id=\"u2bb7976b\" class=\"ne-p\"><span class=\"ne-text\">那么，为什么 </span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 可以利用 &quot;跳跃(</span><code class=\"ne-code\"><span class=\"ne-text\">pitching</span></code><span class=\"ne-text\">)&quot; 阶段呢？</span></p><p id=\"u8881bcbd\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"ue213d7d9\" class=\"ne-p\"><span class=\"ne-text\">首先，传递给 </span><code class=\"ne-code\"><span class=\"ne-text\">pitch</span></code><span class=\"ne-text\"> 方法的 </span><code class=\"ne-code\"><span class=\"ne-text\">data</span></code><span class=\"ne-text\">，在执行阶段也会暴露在 </span><code class=\"ne-code\"><span class=\"ne-text\">this.data</span></code><span class=\"ne-text\"> 之下，并且可以用于在循环时，捕获和共享前面的信息。</span></p><pre data-language=\"javascript\" id=\"kkGfg\" class=\"ne-codeblock language-javascript\">// pitch 的捕获和共享\nmodule.exports = function(content) {\n  return someSyncOperation(content, this.data.value)\n}\n\nmodule.exports.pitch = function(remainingRequest, precedingRequest, data) {\n  data.value = 42\n}</pre><p id=\"ud9fe6865\" class=\"ne-p\"><span class=\"ne-text\">其次，如果某个 </span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 在 </span><code class=\"ne-code\"><span class=\"ne-text\">pitch</span></code><span class=\"ne-text\"> 方法中给出一个结果，那么这个过程会回过身来，并跳过剩下的 </span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\">，在上面的例子中，如果 </span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\"> 的 </span><code class=\"ne-code\"><span class=\"ne-text\">pitch</span></code><span class=\"ne-text\"> 方法返回了一些东西：</span></p><pre data-language=\"javascript\" id=\"pA7g3\" class=\"ne-codeblock language-javascript\">module.exports = function(content) {\n  return someSyncOperation(content)\n}\n\nmodule.exports.pitch = function(remainingRequest, precedingRequest, data) {\n  if (someCondition()) {\n    return `module.exports = require(${JSON.stringify(`-!${remainingRequest}`)})`\n  }\n}\n\n// 上面的步骤将被缩短为\n|- a-loader `pitch`\n  |- b-loader `pitch` returns a module\n|- a-loader normal execution</pre><h4 id=\"lyy5O\"><span class=\"ne-text\">同步 loader</span></h4><pre data-language=\"javascript\" id=\"gT7az\" class=\"ne-codeblock language-javascript\">// 单个结果\nmodule.exports = function(content, sourceMap, meta) {\n  return someSyncOperation(content)\n}\n\n// 多个 loader\nmodule.exports = function(content, sourceMap, meta) {\n  this.callback(null, someSyncOperation(content), sourceMap, meta)\n  return // 当调用 callback() 时总是返回 undefined\n}</pre><h4 id=\"VaBOQ\"><span class=\"ne-text\">异步 loader</span></h4><pre data-language=\"javascript\" id=\"JXkvK\" class=\"ne-codeblock language-javascript\">// 单个结果\nmodule.exports = function(content, sourceMap, meta) {\n  var callback = this.async()\n  someAsyncOperation(content, function(err, result) {\n    if (err) return callback(err)\n    callback(null, result, sourceMap, meta)\n  })\n}\n\n// 多个结果\nmodule.exports = function(content, sourceMap, meta) {\n  var callback = this.async()\n  someAsyncOperation(content, function(err, result, sourceMap, meta) {\n    if (err) return callback(err)\n    callback(null, result, sourceMap, meta)\n  })\n} </pre><h3 id=\"vHMjM\"><span class=\"ne-text\">案例</span></h3><h3 id=\"ayqbZ\"><span class=\"ne-text\">mini 版 style-loader</span></h3><pre data-language=\"javascript\" id=\"mfF7v\" class=\"ne-codeblock language-javascript\">module.exports = function(source) {\n  return `\n    const styleTag = document.createElement('style');\n    styleTag.innerHTML = ${source};\n    document.head.appendChild(styleTag);\n  `\n}</pre><h3 id=\"IhnZi\"><span class=\"ne-text\">mini 版 css-loader</span></h3><pre data-language=\"javascript\" id=\"RRbQ9\" class=\"ne-codeblock language-javascript\">module.exports = function(source) {\n  return JSON.stringify(source);\n}</pre><h3 id=\"Z1eP9\"><span class=\"ne-text\">mini 版 less-loader</span></h3><pre data-language=\"javascript\" id=\"pdrI1\" class=\"ne-codeblock language-javascript\">const less = require('less')\nmodule.exports = function(source) {\n  less.render(source, (err, input) =&gt; {\n    let { css } = output;\n    this.callback(err, css);\n  })\n}</pre><h3 id=\"g6BEx\"><span class=\"ne-text\">编写一个 markdown-loader 实践</span></h3><ul class=\"ne-ul\"><li id=\"ue6c521d5\"><code class=\"ne-code\"><span class=\"ne-text\">markdown</span></code><span class=\"ne-text\">相关功能模块</span></li></ul><pre data-language=\"javascript\" id=\"ix8r0\" class=\"ne-codeblock language-javascript\">// md.js\nconst MarkdownIt = require(&quot;markdown-it&quot;)\n\n// 内置插件列表\nconst MarkdownItPluginsList = [\n  'markdown-it-sup',\n  'markdown-it-sub',\n  'markdown-it-mark',\n  'markdown-it-kbd',\n  'markdown-it-kbd',\n  'markdown-it-underline',\n  'markdown-it-deflist',\n  'markdown-it-checkbox',\n  'markdown-it-emoji',\n  'markdown-it-task-checkbox',\n  'markdown-it-container',\n  'markdown-it-anchor',\n  'markdown-it-table-of-contents',\n  'markdown-it-footnote',\n  'markdown-it-imsize',\n  'markdown-it-implicit-figures',\n  'markdown-it-attrs',\n  'markdown-it-math',\n  'markdown-it-plantuml',\n  'markdown-it-ins',\n  'markdown-it-abbr',\n  'markdown-it-smartarrows'\n]\n\n// 默认 markdown 配置\nconst DEFAULT_MARKDOWN_OPTIONS = {\n  html: false,\n  xhtmlOut: false,\n  breaks: false,\n  langPrefix: '',\n  linkify: false,\n  typographer: false,\n  quotes: '“”‘’',\n  highlight: null,\n  plugins: [],\n  disable: [],\n}\n\nconst createMd = (options = {}) =&gt; {\n  const finalOptions = Object.assign({}, DEFAULT_MARKDOWN_OPTIONS, options)\n  const { plugins, disable } = finalOptions\n  \n  delete finalOptions.plugins\n  delete finalOptions.disable\n  delete finalOptions.enable\n  \n  const md = new MarkdownIt(finalOptions)\n  // 启动自定义插件\n  plugins.forEach(plugName =&gt; {\n    if (MarkdownItPluginsList.includes(plugName)) return\n    MarkdownItPluginsList.push(plugName)\n  })\n  \n  MarkdownItPluginList.forEach(plugName =&gt; {\n    const plug = require(plugName)\n    md.use(plug)\n  })\n  \n  // 找不到不会报错\n  md.disable(disable, true)\n  return md\n}</pre><ul class=\"ne-ul\"><li id=\"u59035afb\"><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\">功能模块</span></li></ul><pre data-language=\"javascript\" id=\"Lri3h\" class=\"ne-codeblock language-javascript\">const { getOptions } = require(&quot;loader-utils&quot;)\nconst validateOptions = require(&quot;schema-utils&quot;)\nconst createMd = require(&quot;./md&quot;)\n\n// options 校验\nconst MarkdownLoaderOptionsSchema = {\n  type: 'object',\n  properties: {\n    html: { type: 'boolean' },\n    xhtmlOut: { type: 'boolean' },\n    breaks: { type: 'boolean' },\n    langPrefix: { type: 'string' },\n    linkify: { type: 'boolean' },\n    typographer: { type: 'boolean' },\n    quotes: {\n      anyOf: [{ type: 'string' }, { type: 'array', items: { type: 'string' } }],\n    },\n    highlight: { instanceof: 'Function' },\n    plugins: { type: 'array', items: { type: 'string' } },\n    disable: { type: 'array', items: { type: 'string' } },\n  },\n  additionalProperties: false\n}\n\nmodule.exports = function(source) {\n  this.cacheable()\n  const options = getOptions(this)\n  validateOptions(MarkdownLoaderOptionsSchema, options, {\n    name: 'MarkdownLoader',\n    baseDataPath: 'options'\n  })\n  const md = createMd(options)\n  return md.render(source)\n}</pre><ul class=\"ne-ul\"><li id=\"u3dfa18c0\"><code class=\"ne-code\"><span class=\"ne-text\">webpack.config.js</span></code></li></ul><pre data-language=\"javascript\" id=\"tF8lo\" class=\"ne-codeblock language-javascript\">const path = require(&quot;path&quot;)\n\nmodule.exports = {\n  mode: &quot;development&quot;,\n  entry: &quot;./src/index.js&quot;,\n  output: {\n    filename: &quot;main.js&quot;,\n    path: path.resolve(__dirname, &quot;dist&quot;)\n  },\n  module: {\n    rules: [\n      {\n        test: /.md$/,\n        use: [\n          { \n            loader: &quot;./markdown-webpack-loader&quot;,\n            options: {\n              html: true,\n              plugins: [],\n              disable: []\n            }\n          }\n        ]\n      }\n    ]\n  }\n}</pre><p id=\"u0cf7a4d5\" class=\"ne-p\"><span class=\"ne-text\">该</span><code class=\"ne-code\"><span class=\"ne-text\">markdown-webpack-loader</span></code><span class=\"ne-text\">的</span><code class=\"ne-code\"><span class=\"ne-text\">options</span></code><span class=\"ne-text\">除了支持所有的</span><code class=\"ne-code\"><span class=\"ne-text\">markdown-it</span></code><span class=\"ne-text\">初始化参数外，还额外支持</span><code class=\"ne-code\"><span class=\"ne-text\">plugins</span></code><span class=\"ne-text\">，添加额外本地插件，以及</span><code class=\"ne-code\"><span class=\"ne-text\">disable</span></code><span class=\"ne-text\">，禁用某些插件功能</span></p><hr id=\"qGUbq\" class=\"ne-hr\"><h2 id=\"bquBs\"><span class=\"ne-text\">plugin</span></h2><ul class=\"ne-ul\"><li id=\"u0acc9568\"><strong><span class=\"ne-text\">原理</span></strong><span class=\"ne-text\">：</span><code class=\"ne-code\"><span class=\"ne-text\">plugin</span></code><span class=\"ne-text\"> 就是插件，基于事件流框架 </span><code class=\"ne-code\"><span class=\"ne-text\">tapable</span></code><span class=\"ne-text\">，插件可以扩展 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 的功能，在 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 运行的生命周期中会广播出许多事件，</span><code class=\"ne-code\"><span class=\"ne-text\">plugin</span></code><span class=\"ne-text\"> 可以监听这些事件，在合适的时机通过 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 提供的 API 改变输出结果</span></li><li id=\"u3b89388c\"><strong><span class=\"ne-text\">组成</span></strong><span class=\"ne-text\">：</span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u0702ce3d\"><span class=\"ne-text\">一个 </span><code class=\"ne-code\"><span class=\"ne-text\">javaScript</span></code><span class=\"ne-text\"> 命名函数或 </span><code class=\"ne-code\"><span class=\"ne-text\">javaScript</span></code><span class=\"ne-text\"> 类</span></li><li id=\"uc27a8303\"><span class=\"ne-text\">在插件函数的 </span><code class=\"ne-code\"><span class=\"ne-text\">prototype</span></code><span class=\"ne-text\">(原型) 上定义一个 </span><code class=\"ne-code\"><span class=\"ne-text\">apply</span></code><span class=\"ne-text\"> 方法</span></li><li id=\"uda96cab3\"><span class=\"ne-text\">指定一个绑定到 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 自身的事件钩子(</span><code class=\"ne-code\"><span class=\"ne-text\">hook</span></code><span class=\"ne-text\">)</span></li><li id=\"u98fea7dd\"><span class=\"ne-text\">处理 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 内部实例的特定数据</span></li><li id=\"u6d1c9d0f\"><span class=\"ne-text\">功能完成后调用 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 提供的回调(</span><code class=\"ne-code\"><span class=\"ne-text\">callback</span></code><span class=\"ne-text\">)</span></li></ul></ul><ul class=\"ne-ul\"><li id=\"u7c07c9ac\"><strong><span class=\"ne-text\">概念</span></strong><span class=\"ne-text\">：</span><code class=\"ne-code\"><span class=\"ne-text\">webpack plugin</span></code><span class=\"ne-text\"> 是一个具有 </span><code class=\"ne-code\"><span class=\"ne-text\">apply</span></code><span class=\"ne-text\"> 属性的 </span><code class=\"ne-code\"><span class=\"ne-text\">javaScript</span></code><span class=\"ne-text\"> 对象。</span><code class=\"ne-code\"><span class=\"ne-text\">apply</span></code><span class=\"ne-text\"> 属性会被 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack compiler</span></code><span class=\"ne-text\"> 调用，并且 </span><code class=\"ne-code\"><span class=\"ne-text\">compiler</span></code><span class=\"ne-text\"> 对象可能在整个编译生命周期内访问。</span><code class=\"ne-code\"><span class=\"ne-text\">compilation</span></code><span class=\"ne-text\"> 模块会被 </span><code class=\"ne-code\"><span class=\"ne-text\">compiler</span></code><span class=\"ne-text\"> 用来创建新的 </span><code class=\"ne-code\"><span class=\"ne-text\">compilation</span></code><span class=\"ne-text\"> 对象(或新的 </span><code class=\"ne-code\"><span class=\"ne-text\">build</span></code><span class=\"ne-text\"> 对象)。</span><code class=\"ne-code\"><span class=\"ne-text\">compilation</span></code><span class=\"ne-text\"> 实例能够访问所有的模块和它们的依赖(大部分是循环依赖)。它会对应用程序依赖图中的所有模块，进行字面上的编译(</span><code class=\"ne-code\"><span class=\"ne-text\">literal compilation</span></code><span class=\"ne-text\">)。在编译阶段，模块会被加、封存、优化、分块、哈希和重新创建(</span><code class=\"ne-code\"><span class=\"ne-text\">load</span></code><span class=\"ne-text\">、</span><code class=\"ne-code\"><span class=\"ne-text\">seal</span></code><span class=\"ne-text\">、</span><code class=\"ne-code\"><span class=\"ne-text\">optimize</span></code><span class=\"ne-text\">、</span><code class=\"ne-code\"><span class=\"ne-text\">chunk</span></code><span class=\"ne-text\">、</span><code class=\"ne-code\"><span class=\"ne-text\">hash</span></code><span class=\"ne-text\">、</span><code class=\"ne-code\"><span class=\"ne-text\">restore</span></code><span class=\"ne-text\">)</span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u7ab1664d\"><span data-color=\"5\" id=\"f4hE3\" class=\"ne-label\">全局唯一</span><code class=\"ne-code\"><span class=\"ne-text\">compiler</span></code><span class=\"ne-text\"> 实例：包含了 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 环境的所有配置信息，包含 </span><code class=\"ne-code\"><span class=\"ne-text\">options</span></code><span class=\"ne-text\">、</span><code class=\"ne-code\"><span class=\"ne-text\">loaders</span></code><span class=\"ne-text\">、</span><code class=\"ne-code\"><span class=\"ne-text\">plugins</span></code><span class=\"ne-text\">，在 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 启动时实例化，也可以理解为 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 的实例。</span><code class=\"ne-code\"><span class=\"ne-text\">compiler</span></code><span class=\"ne-text\"> 模块是 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 的支柱引擎，它通过 </span><code class=\"ne-code\"><span class=\"ne-text\">cli</span></code><span class=\"ne-text\"> 或 </span><code class=\"ne-code\"><span class=\"ne-text\">node api</span></code><span class=\"ne-text\"> 传递所有选项，创建出一个 </span><code class=\"ne-code\"><span class=\"ne-text\">compilation</span></code><span class=\"ne-text\"> 实例。它扩展(</span><code class=\"ne-code\"><span class=\"ne-text\">extend</span></code><span class=\"ne-text\">)自 </span><code class=\"ne-code\"><span class=\"ne-text\">tapable</span></code><span class=\"ne-text\"> 类，以便于注册和调用插件。</span></li><li id=\"u746b777a\"><code class=\"ne-code\"><span class=\"ne-text\">compilation</span></code><span class=\"ne-text\"> 钩子：包含当前模块资源，编译生成资源，</span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 在开发模式下运行的时候，每当监测到一个文件变化，就会创建一次新的 </span><code class=\"ne-code\"><span class=\"ne-text\">compilation</span></code><span class=\"ne-text\">。</span></li></ul></ul><ul class=\"ne-ul\"><li id=\"u02b36ef5\"><strong><span class=\"ne-text\">执行顺序</span></strong><span class=\"ne-text\">：按照编译顺序执行</span></li></ul><ul class=\"ne-ul\"><li id=\"u04292b8b\"><strong><span class=\"ne-text\">配置</span></strong><span class=\"ne-text\">：</span><code class=\"ne-code\"><span class=\"ne-text\">plugin</span></code><span class=\"ne-text\"> 在 </span><code class=\"ne-code\"><span class=\"ne-text\">plugins</span></code><span class=\"ne-text\"> 中单独配置，类型为数组，每一项都是一个 </span><code class=\"ne-code\"><span class=\"ne-text\">plugin</span></code><span class=\"ne-text\"> 实例，参数都通过构造函数传入</span></li></ul><hr id=\"jcraS\" class=\"ne-hr\"><h3 id=\"OoObb\"><span class=\"ne-text\">常用 plugin</span></h3><ul class=\"ne-ul\"><li id=\"uca318fc4\"><code class=\"ne-code\"><span class=\"ne-text\">webpack-bar</span></code><span class=\"ne-text\">：自定义构建进度条</span></li><li id=\"u81e9cc2f\"><code class=\"ne-code\"><span class=\"ne-text\">html-webpack-plugin</span></code><span class=\"ne-text\">：可根据模版自动生成 </span><code class=\"ne-code\"><span class=\"ne-text\">html</span></code><span class=\"ne-text\"> 代码，并自动引用 </span><code class=\"ne-code\"><span class=\"ne-text\">css</span></code><span class=\"ne-text\"> 和 </span><code class=\"ne-code\"><span class=\"ne-text\">js</span></code><span class=\"ne-text\"> 文件</span></li><li id=\"u1e367587\"><code class=\"ne-code\"><span class=\"ne-text\">mini-css-extract-plugin</span></code><span class=\"ne-text\">：常用于 </span><code class=\"ne-code\"><span class=\"ne-text\">css</span></code><span class=\"ne-text\">包分离</span></li><li id=\"u48c685e9\"><span class=\"ne-text\">压缩</span><code class=\"ne-code\"><span class=\"ne-text\">css</span></code><span class=\"ne-text\">代码、重复</span><code class=\"ne-code\"><span class=\"ne-text\">css</span></code><span class=\"ne-text\">代码去重复：</span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u5bb8fba5\"><code class=\"ne-code\"><span class=\"ne-text\">optimize-css-assets-webpack-plugin</span></code><span data-color=\"0\" id=\"nS7Qt\" class=\"ne-label\">webpack5不适用</span></li><li id=\"u79619c0e\"><code class=\"ne-code\"><span class=\"ne-text\">css-minimizer-webpack-plugin</span></code><span data-color=\"2\" id=\"bFlQ4\" class=\"ne-label\">webpack5适用</span></li></ul></ul><ul class=\"ne-ul\"><li id=\"ua2f96329\"><span class=\"ne-text\">压缩</span><code class=\"ne-code\"><span class=\"ne-text\">js</span></code></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"ud8167da9\"><code class=\"ne-code\"><span class=\"ne-text\">uglifyjs-webpack-plugin</span></code><span data-color=\"0\" id=\"fdOmo\" class=\"ne-label\">webpack5不适用</span><span class=\"ne-text\">，同时使用</span><code class=\"ne-code\"><span class=\"ne-text\">thread-loader</span></code><span class=\"ne-text\">来开启多进程并行压缩代码</span><span data-color=\"0\" id=\"riWjZ\" class=\"ne-label\">webpack5不适用</span></li><li id=\"u03c7cc3e\"><code class=\"ne-code\"><span class=\"ne-text\">terser-webpack-plugin</span></code><span data-color=\"2\" id=\"h3don\" class=\"ne-label\">webpack5适用</span><code class=\"ne-code\"><span class=\"ne-text\">parallel: true</span></code><span class=\"ne-text\"> 使用多进程并行压缩代码</span></li></ul></ul><ul class=\"ne-ul\"><li id=\"u28723f2b\"><span class=\"ne-text\">在</span><code class=\"ne-code\"><span class=\"ne-text\">webpack v4</span></code><span class=\"ne-text\">开始，使用</span><code class=\"ne-code\"><span class=\"ne-text\">optimization.splitChunks</span></code><span class=\"ne-text\">替代 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack.optimize.CommonsChunkPlugin</span></code><span class=\"ne-text\">，用于代码分包 </span><code class=\"ne-code\"><span class=\"ne-text\">chunk</span></code><span class=\"ne-text\">，公共资源拆分</span></li><li id=\"uae1101d1\"><code class=\"ne-code\"><span class=\"ne-text\">clean-webpack-plugin</span></code><span class=\"ne-text\">：使用此插件后，</span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\">打包后的</span><code class=\"ne-code\"><span class=\"ne-text\">dist</span></code><span class=\"ne-text\">目录中的所有文件将被删除一次</span></li><li id=\"u653e5004\"><code class=\"ne-code\"><span class=\"ne-text\">webpack-bundle-analyzer</span></code><span class=\"ne-text\">：可视化分析包体积大小</span></li><li id=\"ubb4ab507\"><code class=\"ne-code\"><span class=\"ne-text\">webpack-dev-server</span></code><span class=\"ne-text\">：使用 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 和提供实时重载的开发服务器</span></li><li id=\"ue4321edb\"><code class=\"ne-code\"><span class=\"ne-text\">webpack-merge</span></code><span class=\"ne-text\">：提取公共配置，减少重复配置代码</span></li><li id=\"uff87fb73\"><code class=\"ne-code\"><span class=\"ne-text\">webpack-dashboard</span></code><span class=\"ne-text\">：</span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 服务器仪表盘，更友好的展示相关的打包信息</span></li><li id=\"u7a297731\"><code class=\"ne-code\"><span class=\"ne-text\">compression-webpack-plugin</span></code><span class=\"ne-text\">：开启 </span><code class=\"ne-code\"><span class=\"ne-text\">gzip</span></code><span class=\"ne-text\"> 压缩</span></li><li id=\"ud1ecd0d8\"><code class=\"ne-code\"><span class=\"ne-text\">eslint-webpack-plugin</span></code><span class=\"ne-text\">：用于查找和修复</span><code class=\"ne-code\"><span class=\"ne-text\">javaScript</span></code><span class=\"ne-text\">代码中的问题</span></li><li id=\"ua16d7421\"><code class=\"ne-code\"><span class=\"ne-text\">speed-measure-webpack-plugin</span></code><span class=\"ne-text\">：简称为</span><code class=\"ne-code\"><span class=\"ne-text\">SMP</span></code><span class=\"ne-text\">，分析出</span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\">打包过程中</span><code class=\"ne-code\"><span class=\"ne-text\">loader</span></code><span class=\"ne-text\">和</span><code class=\"ne-code\"><span class=\"ne-text\">plugin</span></code><span class=\"ne-text\">的耗时，有助于找到构建过程中的性能瓶颈</span></li><li id=\"ud25506b2\"><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\">内置插件</span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u1d24cdad\"><code class=\"ne-code\"><span class=\"ne-text\">webpack.DefinePlugin</span></code><span class=\"ne-text\">：编译时配置全局变量，对开发模式和生产模式的构建允许不同的行为非常有用(可配合 </span><code class=\"ne-code\"><span class=\"ne-text\">.env</span></code><span class=\"ne-text\"> 使用)</span></li><li id=\"u78cccb86\"><code class=\"ne-code\"><span class=\"ne-text\">webpack.HotModuleReplacementPlugin</span></code><span class=\"ne-text\">：热更新，即</span><code class=\"ne-code\"><span class=\"ne-text\">HMR</span></code><span class=\"ne-text\">。在配置了</span><code class=\"ne-code\"><span class=\"ne-text\">devServer.hot: true</span></code><span class=\"ne-text\">自动添加该插件</span></li><li id=\"u61c3e176\"><code class=\"ne-code\"><span class=\"ne-text\">webpack.DllPlugin</span></code><span class=\"ne-text\">：配合</span><code class=\"ne-code\"><span class=\"ne-text\">webpack.DllReferencePlugin</span></code><span class=\"ne-text\">使用索引链接，配合</span><code class=\"ne-code\"><span class=\"ne-text\">mailfest.json</span></code><span class=\"ne-text\">来抽离第三方模块，常用于对静态不变的第三方库进行处理，从而大幅度提升构建速度。</span></li><li id=\"uf4e6aadd\"><code class=\"ne-code\"><span class=\"ne-text\">webpack.SourceMapDevToolPlugin</span></code><span class=\"ne-text\">：实现了对 </span><code class=\"ne-code\"><span class=\"ne-text\">sourceMap</span></code><span class=\"ne-text\"> 生成内容进行更细粒度的控制，也可以根据</span><code class=\"ne-code\"><span class=\"ne-text\">devtool</span></code><span class=\"ne-text\">配置选项的某些设置来自动启用</span></li></ul></ul><h3 id=\"fmL0C\"><span class=\"ne-text\">plugin 中的常用对象及对应 hook</span></h3><p id=\"uae43c61d\" class=\"ne-p\"><span class=\"ne-text\">在 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 中哪些对象可以注册 </span><code class=\"ne-code\"><span class=\"ne-text\">hook</span></code></p><ul class=\"ne-ul\"><li id=\"u90dc1df5\"><code class=\"ne-code\"><span class=\"ne-text\">Compiler Hooks</span></code></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u2066510a\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#environment\" data-href=\"https://webpack.js.org/api/compiler-hooks/#environment\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">environment</span></a></li><li id=\"ue7d13558\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#afterenvironment\" data-href=\"https://webpack.js.org/api/compiler-hooks/#afterenvironment\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterEnvironment</span></a></li><li id=\"uc8737639\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#entryoption\" data-href=\"https://webpack.js.org/api/compiler-hooks/#entryoption\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">entryOption</span></a></li><li id=\"u04c9b3cc\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#afterplugins\" data-href=\"https://webpack.js.org/api/compiler-hooks/#afterplugins\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterPlugins</span></a></li><li id=\"uff02fd08\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#afterresolvers\" data-href=\"https://webpack.js.org/api/compiler-hooks/#afterresolvers\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterResolvers</span></a></li><li id=\"ube32d1ab\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#initialize\" data-href=\"https://webpack.js.org/api/compiler-hooks/#initialize\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">initialize</span></a></li><li id=\"uf7746093\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#beforerun\" data-href=\"https://webpack.js.org/api/compiler-hooks/#beforerun\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">beforeRun</span></a></li><li id=\"u0ec15bc3\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#run\" data-href=\"https://webpack.js.org/api/compiler-hooks/#run\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">run</span></a></li><li id=\"u8e3b48c4\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#watchrun\" data-href=\"https://webpack.js.org/api/compiler-hooks/#watchrun\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">watchRun</span></a></li><li id=\"u8dbf93be\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#normalmodulefactory\" data-href=\"https://webpack.js.org/api/compiler-hooks/#normalmodulefactory\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">normalModuleFactory</span></a></li><li id=\"u8d9628a6\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#contextmodulefactory\" data-href=\"https://webpack.js.org/api/compiler-hooks/#contextmodulefactory\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">contextModuleFactory</span></a></li><li id=\"u77c02549\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#beforecompile\" data-href=\"https://webpack.js.org/api/compiler-hooks/#beforecompile\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">beforeCompile</span></a></li><li id=\"ue59827d7\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#compile\" data-href=\"https://webpack.js.org/api/compiler-hooks/#compile\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">compile</span></a></li><li id=\"u7f490bb0\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#thiscompilation\" data-href=\"https://webpack.js.org/api/compiler-hooks/#thiscompilation\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">thisCompilation</span></a></li><li id=\"ub30942b0\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#compilation\" data-href=\"https://webpack.js.org/api/compiler-hooks/#compilation\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">compilation</span></a></li><li id=\"u884db974\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#make\" data-href=\"https://webpack.js.org/api/compiler-hooks/#make\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">make</span></a></li><li id=\"ua1b8ff10\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#aftercompile\" data-href=\"https://webpack.js.org/api/compiler-hooks/#aftercompile\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterCompile</span></a></li><li id=\"uf77bada5\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#shouldemit\" data-href=\"https://webpack.js.org/api/compiler-hooks/#shouldemit\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">shouldEmit</span></a></li><li id=\"u8e92b57c\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#emit\" data-href=\"https://webpack.js.org/api/compiler-hooks/#emit\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">emit</span></a></li><li id=\"u598e86a5\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#afteremit\" data-href=\"https://webpack.js.org/api/compiler-hooks/#afteremit\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterEmit</span></a></li><li id=\"u9ad68faa\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#assetemitted\" data-href=\"https://webpack.js.org/api/compiler-hooks/#assetemitted\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">assetEmitted</span></a></li><li id=\"u3d72bdde\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#done\" data-href=\"https://webpack.js.org/api/compiler-hooks/#done\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">done</span></a></li><li id=\"ud6be3b91\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#additionalpass\" data-href=\"https://webpack.js.org/api/compiler-hooks/#additionalpass\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">additionalPass</span></a></li><li id=\"u6d165631\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#failed\" data-href=\"https://webpack.js.org/api/compiler-hooks/#failed\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">failed</span></a></li><li id=\"uba67388b\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#invalid\" data-href=\"https://webpack.js.org/api/compiler-hooks/#invalid\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">invalid</span></a></li><li id=\"u3bb5dbdd\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#watchclose\" data-href=\"https://webpack.js.org/api/compiler-hooks/#watchclose\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">watchClose</span></a></li><li id=\"u49db3151\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#infrastructurelog\" data-href=\"https://webpack.js.org/api/compiler-hooks/#infrastructurelog\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">infrastructureLog</span></a></li><li id=\"u44c21058\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#log\" data-href=\"https://webpack.js.org/api/compiler-hooks/#log\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">log</span></a></li></ul></ul><ul class=\"ne-ul\"><li id=\"ucae37532\"><code class=\"ne-code\"><span class=\"ne-text\">Compilation Hook</span></code></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"uf47e26f7\"><a href=\"https://webpack.js.org/api/compilation-hooks/#buildmodule\" data-href=\"https://webpack.js.org/api/compilation-hooks/#buildmodule\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">buildModule</span></a></li><li id=\"u590f1d8e\"><a href=\"https://webpack.js.org/api/compilation-hooks/#rebuildmodule\" data-href=\"https://webpack.js.org/api/compilation-hooks/#rebuildmodule\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">rebuildModule</span></a></li><li id=\"ub768d625\"><a href=\"https://webpack.js.org/api/compilation-hooks/#failedmodule\" data-href=\"https://webpack.js.org/api/compilation-hooks/#failedmodule\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">failedModule</span></a><span class=\"ne-text\">\t</span></li><li id=\"u5eb5c2fd\"><a href=\"https://webpack.js.org/api/compilation-hooks/#succeedmodule\" data-href=\"https://webpack.js.org/api/compilation-hooks/#succeedmodule\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">succeedModule</span></a></li><li id=\"u3882efd2\"><a href=\"https://webpack.js.org/api/compilation-hooks/#finishmodules\" data-href=\"https://webpack.js.org/api/compilation-hooks/#finishmodules\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">finishModules</span></a></li><li id=\"uc5d53a0d\"><a href=\"https://webpack.js.org/api/compilation-hooks/#finishrebuildingmodule\" data-href=\"https://webpack.js.org/api/compilation-hooks/#finishrebuildingmodule\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">finishRebuildingModule</span></a></li><li id=\"u0556ba38\"><a href=\"https://webpack.js.org/api/compilation-hooks/#seal\" data-href=\"https://webpack.js.org/api/compilation-hooks/#seal\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">seal</span></a></li><li id=\"u2d04f029\"><a href=\"https://webpack.js.org/api/compilation-hooks/#unseal\" data-href=\"https://webpack.js.org/api/compilation-hooks/#unseal\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">unseal</span></a></li><li id=\"u5bd79cac\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizedependencies\" data-href=\"https://webpack.js.org/api/compilation-hooks/#optimizedependencies\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">optimizeDependencies</span></a></li><li id=\"u9bacbedf\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizedependencies\" data-href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizedependencies\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterOptimizeDependencies</span></a></li><li id=\"uf901fc9c\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimize\" data-href=\"https://webpack.js.org/api/compilation-hooks/#optimize\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">optimize</span></a></li><li id=\"u6bdab38b\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizemodules\" data-href=\"https://webpack.js.org/api/compilation-hooks/#optimizemodules\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">optimizeModules</span></a></li><li id=\"u0f4ca4b1\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizemodules\" data-href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizemodules\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterOptimizeModules</span></a></li><li id=\"uf9833cc8\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizechunks\" data-href=\"https://webpack.js.org/api/compilation-hooks/#optimizechunks\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">optimizeChunks</span></a></li><li id=\"u1a504f05\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizechunks\" data-href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizechunks\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterOptimizeChunks</span></a></li><li id=\"uc12e0586\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizetree\" data-href=\"https://webpack.js.org/api/compilation-hooks/#optimizetree\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">optimizeTree</span></a></li><li id=\"u3309ec7d\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizetree\" data-href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizetree\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterOptimizeTree</span></a></li><li id=\"ud89dd174\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizechunkmodules\" data-href=\"https://webpack.js.org/api/compilation-hooks/#optimizechunkmodules\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">optimizeChunkModules</span></a></li><li id=\"ue0c299aa\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizechunkmodules\" data-href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizechunkmodules\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterOptimizeChunkModules</span></a></li><li id=\"u868383ca\"><a href=\"https://webpack.js.org/api/compilation-hooks/#shouldrecord\" data-href=\"https://webpack.js.org/api/compilation-hooks/#shouldrecord\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">shouldRecord</span></a></li><li id=\"uefe60ada\"><a href=\"https://webpack.js.org/api/compilation-hooks/#revivemodules\" data-href=\"https://webpack.js.org/api/compilation-hooks/#revivemodules\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">reviveModules</span></a></li><li id=\"ueee537aa\"><a href=\"https://webpack.js.org/api/compilation-hooks/#beforemoduleids\" data-href=\"https://webpack.js.org/api/compilation-hooks/#beforemoduleids\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">beforeModuleIds</span></a></li><li id=\"ucbdcb2ca\"><a href=\"https://webpack.js.org/api/compilation-hooks/#moduleids\" data-href=\"https://webpack.js.org/api/compilation-hooks/#moduleids\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">moduleIds</span></a></li><li id=\"ub363a04b\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizemoduleids\" data-href=\"https://webpack.js.org/api/compilation-hooks/#optimizemoduleids\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">optimizeModuleIds</span></a></li><li id=\"ubf20d10d\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizemoduleids\" data-href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizemoduleids\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterOptimizeModuleIds</span></a></li><li id=\"uc56ee917\"><a href=\"https://webpack.js.org/api/compilation-hooks/#revivechunks\" data-href=\"https://webpack.js.org/api/compilation-hooks/#revivechunks\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">reviveChunks</span></a></li><li id=\"ua3609498\"><a href=\"https://webpack.js.org/api/compilation-hooks/#beforechunkids\" data-href=\"https://webpack.js.org/api/compilation-hooks/#beforechunkids\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">beforeChunkIds</span></a></li><li id=\"u7f8697a2\"><a href=\"https://webpack.js.org/api/compilation-hooks/#chunkids\" data-href=\"https://webpack.js.org/api/compilation-hooks/#chunkids\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">chunkIds</span></a></li><li id=\"u2883ad00\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizechunkids\" data-href=\"https://webpack.js.org/api/compilation-hooks/#optimizechunkids\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">optimizeChunkIds</span></a></li><li id=\"u71a78b3d\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizechunkids\" data-href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizechunkids\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterOptimizeChunkIds</span></a></li><li id=\"u99559354\"><a href=\"https://webpack.js.org/api/compilation-hooks/#recordmodules\" data-href=\"https://webpack.js.org/api/compilation-hooks/#recordmodules\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">recordModules</span></a></li><li id=\"u4e5758e3\"><a href=\"https://webpack.js.org/api/compilation-hooks/#recordchunks\" data-href=\"https://webpack.js.org/api/compilation-hooks/#recordchunks\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">recordChunks</span></a></li><li id=\"ua9bea725\"><a href=\"https://webpack.js.org/api/compilation-hooks/#beforemodulehash\" data-href=\"https://webpack.js.org/api/compilation-hooks/#beforemodulehash\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">beforeModuleHash</span></a></li><li id=\"ufb584927\"><a href=\"https://webpack.js.org/api/compilation-hooks/#aftermodulehash\" data-href=\"https://webpack.js.org/api/compilation-hooks/#aftermodulehash\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterModuleHash</span></a></li><li id=\"u155ed50a\"><a href=\"https://webpack.js.org/api/compilation-hooks/#beforehash\" data-href=\"https://webpack.js.org/api/compilation-hooks/#beforehash\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">beforeHash</span></a></li><li id=\"u0e256e9f\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afterhash\" data-href=\"https://webpack.js.org/api/compilation-hooks/#afterhash\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterHash</span></a></li><li id=\"u932b99b1\"><a href=\"https://webpack.js.org/api/compilation-hooks/#recordhash\" data-href=\"https://webpack.js.org/api/compilation-hooks/#recordhash\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">recordHash</span></a></li><li id=\"uf7878f6e\"><a href=\"https://webpack.js.org/api/compilation-hooks/#record\" data-href=\"https://webpack.js.org/api/compilation-hooks/#record\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">record</span></a></li><li id=\"u5356397f\"><a href=\"https://webpack.js.org/api/compilation-hooks/#beforemoduleassets\" data-href=\"https://webpack.js.org/api/compilation-hooks/#beforemoduleassets\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">beforeModuleAssets</span></a></li><li id=\"ube3e68cb\"><a href=\"https://webpack.js.org/api/compilation-hooks/#additionalchunkassets\" data-href=\"https://webpack.js.org/api/compilation-hooks/#additionalchunkassets\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">additionalChunkAssets</span></a></li><li id=\"uc137ebcf\"><a href=\"https://webpack.js.org/api/compilation-hooks/#shouldgeneratechunkassets\" data-href=\"https://webpack.js.org/api/compilation-hooks/#shouldgeneratechunkassets\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">shouldGenerateChunkAssets</span></a></li><li id=\"uc6fb9143\"><a href=\"https://webpack.js.org/api/compilation-hooks/#beforechunkassets\" data-href=\"https://webpack.js.org/api/compilation-hooks/#beforechunkassets\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">beforeChunkAssets</span></a></li><li id=\"u30f63fdf\"><a href=\"https://webpack.js.org/api/compilation-hooks/#additionalassets\" data-href=\"https://webpack.js.org/api/compilation-hooks/#additionalassets\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">additionalAssets</span></a></li><li id=\"ue38667ea\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizechunkassets\" data-href=\"https://webpack.js.org/api/compilation-hooks/#optimizechunkassets\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">optimizeChunkAssets</span></a></li><li id=\"u72b8d7d3\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizechunkassets\" data-href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizechunkassets\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterOptimizeChunkAssets</span></a></li><li id=\"ub6028e9f\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizeassets\" data-href=\"https://webpack.js.org/api/compilation-hooks/#optimizeassets\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">optimizeAssets</span></a></li><li id=\"ufeed1ec7\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizeassets\" data-href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizeassets\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterOptimizeAssets</span></a></li><li id=\"uad97b4e3\"><a href=\"https://webpack.js.org/api/compilation-hooks/#processassets\" data-href=\"https://webpack.js.org/api/compilation-hooks/#processassets\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">processAssets</span></a></li><li id=\"uff5e0922\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afterprocessassets\" data-href=\"https://webpack.js.org/api/compilation-hooks/#afterprocessassets\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterProcessAssets</span></a></li><li id=\"u44dca7fd\"><a href=\"https://webpack.js.org/api/compilation-hooks/#needadditionalseal\" data-href=\"https://webpack.js.org/api/compilation-hooks/#needadditionalseal\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">needAdditionalSeal</span></a></li><li id=\"u323490a4\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afterseal\" data-href=\"https://webpack.js.org/api/compilation-hooks/#afterseal\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterSeal</span></a></li><li id=\"u1e32177e\"><a href=\"https://webpack.js.org/api/compilation-hooks/#chunkhash\" data-href=\"https://webpack.js.org/api/compilation-hooks/#chunkhash\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">chunkHash</span></a></li><li id=\"ub7d6d207\"><a href=\"https://webpack.js.org/api/compilation-hooks/#moduleasset\" data-href=\"https://webpack.js.org/api/compilation-hooks/#moduleasset\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">moduleAsset</span></a></li><li id=\"ud9e2cd59\"><a href=\"https://webpack.js.org/api/compilation-hooks/#chunkasset\" data-href=\"https://webpack.js.org/api/compilation-hooks/#chunkasset\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">chunkAsset</span></a></li><li id=\"u2bccbafc\"><a href=\"https://webpack.js.org/api/compilation-hooks/#assetpath\" data-href=\"https://webpack.js.org/api/compilation-hooks/#assetpath\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">assetPath</span></a></li><li id=\"u85745d5f\"><a href=\"https://webpack.js.org/api/compilation-hooks/#needadditionalpass\" data-href=\"https://webpack.js.org/api/compilation-hooks/#needadditionalpass\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">needAdditionalPass</span></a></li><li id=\"ub1d4a248\"><a href=\"https://webpack.js.org/api/compilation-hooks/#childcompiler\" data-href=\"https://webpack.js.org/api/compilation-hooks/#childcompiler\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">childCompiler</span></a></li><li id=\"uc35c3c20\"><a href=\"https://webpack.js.org/api/compilation-hooks/#normalmoduleloader\" data-href=\"https://webpack.js.org/api/compilation-hooks/#normalmoduleloader\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">normalModuleLoader</span></a></li></ul></ul><ul class=\"ne-ul\"><li id=\"uc602dbdc\"><code class=\"ne-code\"><span class=\"ne-text\">ContextModuleFactory Hooks</span></code></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u2c86a5c6\"><a href=\"https://webpack.js.org/api/contextmodulefactory-hooks/#beforeresolve\" data-href=\"https://webpack.js.org/api/contextmodulefactory-hooks/#beforeresolve\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">beforeResolve</span></a></li><li id=\"u6c1cd611\"><a href=\"https://webpack.js.org/api/contextmodulefactory-hooks/#afterresolve\" data-href=\"https://webpack.js.org/api/contextmodulefactory-hooks/#afterresolve\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterResolve</span></a></li><li id=\"ud8e6fc14\"><a href=\"https://webpack.js.org/api/contextmodulefactory-hooks/#contextmodulefiles\" data-href=\"https://webpack.js.org/api/contextmodulefactory-hooks/#contextmodulefiles\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">contextModuleFiles</span></a></li><li id=\"ue7028d18\"><a href=\"https://webpack.js.org/api/contextmodulefactory-hooks/#alternativerequests\" data-href=\"https://webpack.js.org/api/contextmodulefactory-hooks/#alternativerequests\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">alternativeRequests</span></a></li></ul></ul><ul class=\"ne-ul\"><li id=\"uacc1d3b7\"><code class=\"ne-code\"><span class=\"ne-text\">JavascriptParser Hooks</span></code></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u43737f40\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#evaluatetypeof\" data-href=\"https://webpack.js.org/api/parser/#evaluatetypeof\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">evaluateTypeof</span></a></li><li id=\"u6c825f86\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#evaluate\" data-href=\"https://webpack.js.org/api/parser/#evaluate\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">evaluate</span></a></li><li id=\"ud483590c\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#evaluateidentifier\" data-href=\"https://webpack.js.org/api/parser/#evaluateidentifier\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">evaluateIdentifier</span></a></li><li id=\"u12eb9640\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#evaluatedefinedidentifier\" data-href=\"https://webpack.js.org/api/parser/#evaluatedefinedidentifier\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">evaluateDefinedIdentifier</span></a></li><li id=\"uc0667e70\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#evaluatecallexpressionmember\" data-href=\"https://webpack.js.org/api/parser/#evaluatecallexpressionmember\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">evaluateCallExpressionMember</span></a></li><li id=\"u5c6ef4b6\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#statement\" data-href=\"https://webpack.js.org/api/parser/#statement\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">statement</span></a></li><li id=\"u15e2fac8\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#statementif\" data-href=\"https://webpack.js.org/api/parser/#statementif\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">statementIf</span></a></li><li id=\"u8a5be525\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#label\" data-href=\"https://webpack.js.org/api/parser/#label\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">label</span></a></li><li id=\"u795271d2\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#import\" data-href=\"https://webpack.js.org/api/parser/#import\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">import</span></a></li><li id=\"u623d7325\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#importspecifier\" data-href=\"https://webpack.js.org/api/parser/#importspecifier\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">importSpecifier</span></a></li><li id=\"ua10d5270\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#export\" data-href=\"https://webpack.js.org/api/parser/#export\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">export</span></a></li><li id=\"uca537f79\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#exportimport\" data-href=\"https://webpack.js.org/api/parser/#exportimport\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">exportImport</span></a></li><li id=\"ucf5fc316\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#exportdeclaration\" data-href=\"https://webpack.js.org/api/parser/#exportdeclaration\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">exportDeclaration</span></a></li><li id=\"u255c7960\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#exportexpression\" data-href=\"https://webpack.js.org/api/parser/#exportexpression\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">exportExpression</span></a></li><li id=\"uda45262c\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#exportspecifier\" data-href=\"https://webpack.js.org/api/parser/#exportspecifier\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">exportSpecifier</span></a></li><li id=\"uea75d307\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#exportimportspecifier\" data-href=\"https://webpack.js.org/api/parser/#exportimportspecifier\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">exportImportSpecifier</span></a></li><li id=\"u9c538f32\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#vardeclaration\" data-href=\"https://webpack.js.org/api/parser/#vardeclaration\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">varDeclaration</span></a></li><li id=\"uc29e1d05\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#vardeclarationlet\" data-href=\"https://webpack.js.org/api/parser/#vardeclarationlet\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">varDeclarationLet</span></a></li><li id=\"u092f497d\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#vardeclarationconst\" data-href=\"https://webpack.js.org/api/parser/#vardeclarationconst\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">varDeclarationConst</span></a></li><li id=\"u1e34e12e\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#vardeclarationvar\" data-href=\"https://webpack.js.org/api/parser/#vardeclarationvar\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">varDeclarationVar</span></a></li><li id=\"u4dda06fa\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#canrename\" data-href=\"https://webpack.js.org/api/parser/#canrename\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">canRename</span></a></li><li id=\"u79b3ec7f\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#rename\" data-href=\"https://webpack.js.org/api/parser/#rename\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">rename</span></a></li><li id=\"ue547d36c\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#assigned\" data-href=\"https://webpack.js.org/api/parser/#assigned\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">assigned</span></a></li><li id=\"ua60fda2d\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#assign\" data-href=\"https://webpack.js.org/api/parser/#assign\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">assign</span></a></li><li id=\"u0e98a2f2\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#typeof\" data-href=\"https://webpack.js.org/api/parser/#typeof\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">typeof</span></a></li><li id=\"ubf3d0125\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#call\" data-href=\"https://webpack.js.org/api/parser/#call\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">call</span></a></li><li id=\"u1d364a39\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#callmemberchain\" data-href=\"https://webpack.js.org/api/parser/#callmemberchain\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">callMemberChain</span></a></li><li id=\"u093c9aca\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#new\" data-href=\"https://webpack.js.org/api/parser/#new\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">new</span></a></li><li id=\"u283e40e0\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#expression\" data-href=\"https://webpack.js.org/api/parser/#expression\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">expression</span></a></li><li id=\"u4ed8279b\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#expressionconditionaloperator\" data-href=\"https://webpack.js.org/api/parser/#expressionconditionaloperator\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">expressionConditionalOperator</span></a></li><li id=\"ue7712932\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#program\" data-href=\"https://webpack.js.org/api/parser/#program\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">program</span></a></li></ul></ul><ul class=\"ne-ul\"><li id=\"u13da1515\"><code class=\"ne-code\"><span class=\"ne-text\">NormalModuleFactory Hooks</span></code></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u127e1c7b\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#beforeresolve\" data-href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#beforeresolve\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">beforeResolve</span></a></li><li id=\"u19144415\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#factorize\" data-href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#factorize\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">factorize</span></a></li><li id=\"u144f4131\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#resolve\" data-href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#resolve\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">resolve</span></a></li><li id=\"ua8ffd98c\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#resolveforscheme\" data-href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#resolveforscheme\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">resolveForScheme</span></a></li><li id=\"u3de48e99\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#afterresolve\" data-href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#afterresolve\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">afterResolve</span></a></li><li id=\"u8bbecd18\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#createmodule\" data-href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#createmodule\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">createModule</span></a></li><li id=\"u6b2b6bab\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#module\" data-href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#module\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">module</span></a></li><li id=\"u9cbb39ca\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#createparser\" data-href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#createparser\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">createParser</span></a></li><li id=\"u63e70dc0\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#parser\" data-href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#parser\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">parser</span></a></li><li id=\"u11373879\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#creategenerator\" data-href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#creategenerator\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">createGenerator</span></a></li><li id=\"u2ae053ec\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#generator\" data-href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#generator\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">generator</span></a></li></ul></ul><h3 id=\"k6FRY\"><span class=\"ne-text\">插件的不同类型</span></h3><p id=\"u67d38bda\" class=\"ne-p\"><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 插件可以按照它所注册的事件分成不同的类型。每一个事件钩子都预先定义为同步、异步、瀑布或并行钩子，钩子在内部用 </span><code class=\"ne-code\"><span class=\"ne-text\">call/callAsync</span></code><span class=\"ne-text\"> 方法调用。支持的钩子清单或可被绑定的钩子清单，通常在 </span><code class=\"ne-code\"><span class=\"ne-text\">this.hooks</span></code><span class=\"ne-text\"> 属性指定。</span></p><ul class=\"ne-ul\"><li id=\"uabac2d45\"><span class=\"ne-text\">例如：</span></li></ul><pre data-language=\"javascript\" id=\"McnSm\" class=\"ne-codeblock language-javascript\">this.hooks = {\n  shouldEmit: new SyncBailHook(['compilation']),\n};</pre><p id=\"u9784238d\" class=\"ne-p\"><span class=\"ne-text\">表示唯一支持的钩子是 </span><code class=\"ne-code\"><span class=\"ne-text\">shouldEmit</span></code><span class=\"ne-text\"> ，这是一个 </span><code class=\"ne-code\"><span class=\"ne-text\">SyncBailHook</span></code><span class=\"ne-text\"> 类型的钩子，传入插件的唯一参数是 </span><code class=\"ne-code\"><span class=\"ne-text\">compilation</span></code><span class=\"ne-text\"> 。</span></p><p id=\"u09518401\" class=\"ne-p\"><span class=\"ne-text\">支持的各类型钩子：</span></p><h3 id=\"QXII3\"><span class=\"ne-text\">同步 hooks</span></h3><ul class=\"ne-ul\"><li id=\"u0f356623\"><code class=\"ne-code\"><span class=\"ne-text\">SyncHook</span></code></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"ub708204e\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\">通过 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">new SyncHook([params])</span></code><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\"> 定义。</span></li><li id=\"u1f3c1ec4\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\">用 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">tap</span></code><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\"> 方法绑定。</span></li><li id=\"uf9897c59\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\">用 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">call(...params)</span></code><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\"> 方法调用。</span></li></ul></ul><ul class=\"ne-ul\"><li id=\"ue4d425e5\"><code class=\"ne-code\"><span class=\"ne-text\">Bail</span></code><span class=\"ne-text\">(保险) </span><code class=\"ne-code\"><span class=\"ne-text\">Hooks</span></code></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"uc4899266\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\">通过 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">new SyncBailHook([params])</span></code><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\"> 定义。</span></li><li id=\"ua2224f70\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\">用 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">tap</span></code><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\"> 方法绑定。</span></li><li id=\"u5085c066\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\">用 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">call(...params)</span></code><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\"> 方法调用。</span></li></ul></ul><div data-type=\"info\" class=\"ne-alert\"><p id=\"ub254f84b\" class=\"ne-p\"><code class=\"ne-code\"><span class=\"ne-text\">Bail</span></code><span class=\"ne-text\"> 类型的钩子，其插件回调函数是串行调用，任意一个插件回调函数返回非 </span><code class=\"ne-code\"><span class=\"ne-text\">undefined</span></code><span class=\"ne-text\"> 值，则停止执行插件，该值作为钩子的返回值。</span><code class=\"ne-code\"><span class=\"ne-text\">optimizeChunks</span></code><span class=\"ne-text\">，</span><code class=\"ne-code\"><span class=\"ne-text\">optimizeChunkModules</span></code><span class=\"ne-text\"> 等很有用的事件都是 </span><code class=\"ne-code\"><span class=\"ne-text\">SyncBailHooks</span></code><span class=\"ne-text\"> 。</span></p></div><ul class=\"ne-ul\"><li id=\"u8b206693\" style=\"text-align: left\"><span class=\"ne-text\">Waterfall(瀑布) Hooks</span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u72e9b869\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\">通过 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">new SyncWaterfallHook([params])</span></code><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\"> 定义。</span></li><li id=\"u21be0786\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\">用 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">tap</span></code><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\"> 方法绑定。</span></li><li id=\"uff9d02f3\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\">用 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 14px\">call(...params)</span></code><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\"> 方法调用。</span></li></ul></ul><div data-type=\"info\" class=\"ne-alert\"><p id=\"u2449293f\" class=\"ne-p\"><span class=\"ne-text\">该类型的插件是一个接一个串行执行，前一个的返回值作为后一个的入参。插件需要考虑执行的顺序，因为后一个插件必须接受前一个插件执行的结果作为入参。第一个插件的参数为 </span><code class=\"ne-code\"><span class=\"ne-text\">init</span></code><span class=\"ne-text\"> 。 所以 </span><code class=\"ne-code\"><span class=\"ne-text\">waterfall</span></code><span class=\"ne-text\"> 钩子至少要制定一个参数。这种模式用于和 </span><code class=\"ne-code\"><span class=\"ne-text\">ModuleTemplate</span></code><span class=\"ne-text\">，</span><code class=\"ne-code\"><span class=\"ne-text\">ChunkTemplate</span></code><span class=\"ne-text\"> 等 </span><code class=\"ne-code\"><span class=\"ne-text\">webpack</span></code><span class=\"ne-text\"> 模板相关的 </span><code class=\"ne-code\"><span class=\"ne-text\">Tapable</span></code><span class=\"ne-text\"> 实例。</span></p></div><h3 id=\"hLMyk\"><span class=\"ne-text\">异步 hooks</span></h3><ul class=\"ne-ul\"><li id=\"u07013bf8\"><code class=\"ne-code\"><span class=\"ne-text\">Async Series</span></code><span class=\"ne-text\">(异步串联) </span><code class=\"ne-code\"><span class=\"ne-text\">Hook</span></code></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u91bee8cd\"><span class=\"ne-text\">通过 </span><code class=\"ne-code\"><span class=\"ne-text\">new AsyncSeriesHook([params])</span></code><span class=\"ne-text\">定义。</span></li><li id=\"u604b8971\"><span class=\"ne-text\">用 </span><code class=\"ne-code\"><span class=\"ne-text\">tap/tapAsync/tapPromise</span></code><span class=\"ne-text\">方法绑定。</span></li><li id=\"u1c1f8d65\"><span class=\"ne-text\">用 </span><code class=\"ne-code\"><span class=\"ne-text\">callAsync(...params)</span></code><span class=\"ne-text\">方法调用。</span></li></ul></ul><ul class=\"ne-ul\"><li id=\"ubfbef61f\" style=\"text-align: left\"><code class=\"ne-code\"><span class=\"ne-text\">Async waterfall</span></code><span class=\"ne-text\">(异步瀑布) </span><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\">插件会用 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\">waterfall</span></code><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\"> 方式异步应用</span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u52036dfa\"><span class=\"ne-text\">通过 </span><code class=\"ne-code\"><span class=\"ne-text\">new AsyncWaterfallHook([params])</span></code><span class=\"ne-text\">定义。</span></li><li id=\"u5caceddc\"><span class=\"ne-text\">用 </span><code class=\"ne-code\"><span class=\"ne-text\">tap/tapAsync/tapPromise</span></code><span class=\"ne-text\">方法绑定。</span></li><li id=\"u81309fc1\"><span class=\"ne-text\">用 </span><code class=\"ne-code\"><span class=\"ne-text\">callAsync(...params)</span></code><span class=\"ne-text\">方法调用。</span></li></ul></ul><div data-type=\"info\" class=\"ne-alert\"><p id=\"u09896960\" class=\"ne-p\"><span class=\"ne-text\">插件处理函数的参数为当前值，以及一个签名为 </span><code class=\"ne-code\"><span class=\"ne-text\">(err: Error, nextValue: any) -&gt; void</span></code><span class=\"ne-text\">的 </span><code class=\"ne-code\"><span class=\"ne-text\">callback</span></code><span class=\"ne-text\">函数。调用时 </span><code class=\"ne-code\"><span class=\"ne-text\">nextValue</span></code><span class=\"ne-text\">是下一个处理函数的当前值。第一个处理函数的当前是只 </span><code class=\"ne-code\"><span class=\"ne-text\">init</span></code><span class=\"ne-text\">。当所有 </span><code class=\"ne-code\"><span class=\"ne-text\">handler</span></code><span class=\"ne-text\">都执行后，</span><code class=\"ne-code\"><span class=\"ne-text\">callback</span></code><span class=\"ne-text\">执行，参数为最后一个值。任一个 </span><code class=\"ne-code\"><span class=\"ne-text\">handler</span></code><span class=\"ne-text\">传入 </span><code class=\"ne-code\"><span class=\"ne-text\">err</span></code><span class=\"ne-text\">值，停止调用 </span><code class=\"ne-code\"><span class=\"ne-text\">handler</span></code><span class=\"ne-text\">且 </span><code class=\"ne-code\"><span class=\"ne-text\">callback</span></code><span class=\"ne-text\">被调用。 这种模式在 </span><code class=\"ne-code\"><span class=\"ne-text\">before-resolve</span></code><span class=\"ne-text\">和 </span><code class=\"ne-code\"><span class=\"ne-text\">after-resolve</span></code><span class=\"ne-text\">事件中常见。</span></p></div><ul class=\"ne-ul\"><li id=\"uf6b4f983\"><span class=\"ne-text\">Async Series Bail</span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u3a4d2fd9\"><span class=\"ne-text\">通过 </span><code class=\"ne-code\"><span class=\"ne-text\">new AsyncSeriesBailHook([params]) </span></code><span class=\"ne-text\">定义。</span></li><li id=\"u315cf4ba\"><span class=\"ne-text\">用 </span><code class=\"ne-code\"><span class=\"ne-text\">tap/tapAsync/tapPromise</span></code><span class=\"ne-text\"> 方法绑定。</span></li><li id=\"ucee4a914\"><span class=\"ne-text\">用 </span><code class=\"ne-code\"><span class=\"ne-text\">callAsync(...params)</span></code><span class=\"ne-text\"> 方法调用。</span></li></ul></ul><ul class=\"ne-ul\"><li id=\"u9aed82a4\"><span class=\"ne-text\">Async Parallel</span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"ude6b1c59\"><span class=\"ne-text\">通过 </span><code class=\"ne-code\"><span class=\"ne-text\">new AsyncParallelHook([params])</span></code><span class=\"ne-text\"> 定义。</span></li><li id=\"uf5c3172f\"><span class=\"ne-text\">用 </span><code class=\"ne-code\"><span class=\"ne-text\">tap/tapAsync/tapPromise</span></code><span class=\"ne-text\"> 方法绑定。</span></li><li id=\"u1f58da73\"><span class=\"ne-text\">用 </span><code class=\"ne-code\"><span class=\"ne-text\">callAsync(...params)</span></code><span class=\"ne-text\"> 方法调用。</span></li></ul></ul><h3 id=\"jW5lj\"><span class=\"ne-text\">案例</span></h3><pre data-language=\"javascript\" id=\"ZTbPa\" class=\"ne-codeblock language-javascript\">// 一个 JavaScript 类\nclass MyExampleWebpackPlugin {\n  // 在插件函数的 prototype 上定义一个 `apply` 方法，以 compiler 为参数\n  apply(compiler) {\n    // 指定一个挂载到 webpack 自身的事件钩子\n    compiler.hooks.emit.tapAsync('MyExampleWebpackPLugin', (compilation, callback) =&gt; {\n      console.log('这是一个 example plugin')\n      console.log('资源单次构建的 compilation 对象',  compilation)\n      // 用 webpack 提供的插件 api 处理构建过程\n      compilation.addModule(/* ... */)\n      callback()\n    })\n  }\n}</pre><ul class=\"ne-ul\"><li id=\"u0ce42dae\"><span class=\"ne-text\">案例一</span></li></ul><pre data-language=\"javascript\" id=\"OqY9C\" class=\"ne-codeblock language-javascript\">const { validate } = require(&quot;schema-utils&quot;)\n\n// 选项对象的 schema\nconst schema = {\n    type: &quot;object&quot;,\n    properties: {\n        test: {\n            type: &quot;string&quot;\n        }\n    }\n}\n\nclass HelloWorldPlugin {\n    constructor(options = {}) {\n        validate(schema, options, {\n            name: &quot;hello world plugin&quot;,\n            baseDataPath: &quot;options&quot;\n        })\n    }\n\n    apply(compiler) {\n        compiler.hooks.done.tap(&quot;hello world plugin&quot;, stats =&gt; {\n            console.log(&quot;hello, world!&quot;)\n        })\n    }\n}\n\nmodule.exports = HelloWorldPlugin</pre><ul class=\"ne-ul\"><li id=\"u3af05610\"><span class=\"ne-text\">案例二</span></li></ul><pre data-language=\"javascript\" id=\"iYbzF\" class=\"ne-codeblock language-javascript\">class HelloCompilationPlugin {\n    apply(compiler) {\n        // 指定一个挂载到 compilation 的钩子，回调函数的参数为 compilation\n        compiler.hooks.compilation.tap('HelloCompilationPlugin', compilation =&gt; {\n            // 现在可以通过 compilation 对象绑定各种钩子\n            compilation.hooks.optimize.tap('HelloCompilationPlugin', () =&gt; {\n                console.log('资源已优化完毕')\n            })\n        })\n    }\n}\n\nmodule.exports = HelloCompilationPlugin</pre><ul class=\"ne-ul\"><li id=\"u096718db\"><span class=\"ne-text\">案例三(生成一个叫做 </span><code class=\"ne-code\"><span class=\"ne-text\">assets.md</span></code><span class=\"ne-text\"> 的新文件；文件内容是所有构建生成的文件的列表)</span></li></ul><pre data-language=\"javascript\" id=\"UmBZX\" class=\"ne-codeblock language-javascript\">class FileListPlugin {\n  static defaultOptions = {\n    outputFile: 'assets.md',\n  };\n\n  // 需要传入自定义插件构造函数的任意选项\n  //（这是自定义插件的公开API）\n  constructor(options = {}) {\n    // 在应用默认选项前，先应用用户指定选项\n    // 合并后的选项暴露给插件方法\n    // 记得在这里校验所有选项\n    this.options = { ...FileListPlugin.defaultOptions, ...options };\n  }\n\n  apply(compiler) {\n    const pluginName = FileListPlugin.name;\n\n    // webpack 模块实例，可以通过 compiler 对象访问，\n    // 这样确保使用的是模块的正确版本\n    // （不要直接 require/import webpack）\n    const { webpack } = compiler;\n\n    // Compilation 对象提供了对一些有用常量的访问。\n    const { Compilation } = webpack;\n\n    // RawSource 是其中一种 “源码”(&quot;sources&quot;) 类型，\n    // 用来在 compilation 中表示资源的源码\n    const { RawSource } = webpack.sources;\n\n    // 绑定到 “thisCompilation” 钩子，\n    // 以便进一步绑定到 compilation 过程更早期的阶段\n    compiler.hooks.thisCompilation.tap(pluginName, (compilation) =&gt; {\n      // 绑定到资源处理流水线(assets processing pipeline)\n      compilation.hooks.processAssets.tap(\n        {\n          name: pluginName,\n\n          // 用某个靠后的资源处理阶段，\n          // 确保所有资源已被插件添加到 compilation\n          stage: Compilation.PROCESS_ASSETS_STAGE_SUMMARIZE,\n        },\n        (assets) =&gt; {\n          // &quot;assets&quot; 是一个包含 compilation 中所有资源(assets)的对象。\n          // 该对象的键是资源的路径，\n          // 值是文件的源码\n\n          // 遍历所有资源，\n          // 生成 Markdown 文件的内容\n          const content =\n            '# In this build:\\n\\n' +\n            Object.keys(assets)\n              .map((filename) =&gt; `- ${filename}`)\n              .join('\\n');\n\n          // 向 compilation 添加新的资源，\n          // 这样 webpack 就会自动生成并输出到 output 目录\n          compilation.emitAsset(\n            this.options.outputFile,\n            new RawSource(content)\n          );\n        }\n      );\n    });\n  }\n}\n\nmodule.exports = { FileListPlugin };</pre><pre data-language=\"javascript\" id=\"iOg4N\" class=\"ne-codeblock language-javascript\">const { FileListPlugin } = require('./file-list-plugin.js');\n\n// 在 webpack 配置中使用自定义的插件：\nmodule.exports = {\n  // …\n\n  plugins: [\n    // 添加插件，使用默认选项\n    new FileListPlugin(),\n\n    // 或者:\n\n    // 使用任意支持的选项\n    new FileListPlugin({\n      outputFile: 'my-assets.md',\n    }),\n  ],\n};</pre><p id=\"uced70a02\" class=\"ne-p\"><span class=\"ne-text\">这样就生成了一个指定名称的 </span><code class=\"ne-code\"><span class=\"ne-text\">markdown</span></code><span class=\"ne-text\"> 文件：</span></p><pre data-language=\"javascript\" id=\"zydVx\" class=\"ne-codeblock language-javascript\"># In this build:\n\n- main.css\n- main.js\n- index.html</pre><h4 id=\"NLgvK\"><span class=\"ne-text\">异步编译插件</span></h4><p id=\"u6063c110\" class=\"ne-p\"><span class=\"ne-text\">有些插件钩子是异步的。我们可以像同步方式一样用 </span><code class=\"ne-code\"><span class=\"ne-text\">tap</span></code><span class=\"ne-text\"> 方法来绑定，也可以用 </span><code class=\"ne-code\"><span class=\"ne-text\">tapAsync</span></code><span class=\"ne-text\"> 或 </span><code class=\"ne-code\"><span class=\"ne-text\">tapPromise</span></code><span class=\"ne-text\"> 这两个异步方法来绑定。</span></p><h5 id=\"PbqEc\"><span class=\"ne-text\">tapAsync</span></h5><p id=\"u28f4fffc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\">当我们用 </span><code class=\"ne-code\"><span class=\"ne-text\">tapAsync</span></code><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\"> 方法来绑定插件时，必须调用函数的最后一个参数 </span><code class=\"ne-code\"><span class=\"ne-text\">callback</span></code><span class=\"ne-text\" style=\"color: rgb(43, 58, 66); font-size: 16px\"> 指定的回调函数。</span></p><pre data-language=\"javascript\" id=\"rBch1\" class=\"ne-codeblock language-javascript\">class HelloAsyncPlugin {\n  apply(compiler) {\n    compiler.hooks.emit.tapAsync('HelloAsyncPlugin', (compilation, callback) =&gt; {\n      setTimeout(() =&gt; {\n        console.log('异步任务完成...')\n        callback()\n      }, 1000)\n    })\n  }\n}\nmodule.exports = HelloAsyncPlugin</pre><h5 id=\"i7T1y\"><span class=\"ne-text\">tapPromise</span></h5><p id=\"u56c43776\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px\">当我们用 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"font-size: 16px\">tapPromise</span></code><span class=\"ne-text\" style=\"font-size: 16px\"> 方法来绑定插件时，必须返回一个 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"font-size: 16px\">promise</span></code><span class=\"ne-text\" style=\"font-size: 16px\">，异步任务完成后 </span><code class=\"ne-code\"><span class=\"ne-text\" style=\"font-size: 16px\">resolve</span></code></p><pre data-language=\"javascript\" id=\"mXEW4\" class=\"ne-codeblock language-javascript\">class HelloAsyncPlugin {\n  apply(compiler) {\n    compiler.hooks.emit.tapPromise('HelloAsyncPlugin', compilation =&gt; {\n      // 返回一个 promise，异步任务完成后 resolve\n      return new Promise((resolve, reject) =&gt; {\n        setTimeout(() =&gt; {\n          console.log('异步任务完成...')\n          resolve()\n        }, 1000)\n      })\n    })\n  }\n}\nmodule.exports = HelloAsyncPlugin</pre><h3 id=\"ByCN1\"><span class=\"ne-text\">编写一个支持 Gzip 和 Brotli 压缩插件实践</span></h3><p id=\"ud0c25058\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px\">压缩核心功能依赖</span><code class=\"ne-code\"><span class=\"ne-text\" style=\"font-size: 16px\">Node zlib</span></code><span class=\"ne-text\" style=\"font-size: 16px\">模块处理编译后的资源即可</span></p><ul class=\"ne-ul\"><li id=\"u1c7fb145\"><code class=\"ne-code\"><span class=\"ne-text\" style=\"font-size: 16px\">plugin</span></code><span class=\"ne-text\" style=\"font-size: 16px\">功能模块</span></li></ul><pre data-language=\"javascript\" id=\"Ni0VQ\" class=\"ne-codeblock language-javascript\">const zlib = require('zlib');\n\nconst DEFAULT_COMPRESS_OPTIONS = {\n  deleteOriginalAssets: false, // 是否删除压缩前的文件，看情况配置\n  algorithm: 'gzip', // 压缩算法，默认就是gzip\n  test: /./, // 所有文件都压缩\n  threshold: 1000, // 只处理比这个值大的资源。按字节计算\n  minRatio: 0.8, // 只有压缩率比这个值小的资源才会被处理\n};\n\nclass CompressPlugin {\n  constructor(options = {}) {\n    this.options = {\n      ...DEFAULT_COMPRESS_OPTIONS,\n      ...options,\n    };\n  }\n\n  compressSync(buf) {\n    const { algorithm } = this.options;\n    switch (algorithm.toLowerCase()) {\n      case 'brotli':\n        return zlib.brotliCompressSync(buf);\n      case 'gzip':\n        return zlib.gzipSync(buf);\n      default:\n        return buf;\n    }\n  }\n\n  getComporessedName(filename) {\n    const { algorithm } = this.options;\n    switch (algorithm.toLowerCase()) {\n      case 'brotli':\n        return `${filename}.br`;\n      case 'gzip':\n        return `${filename}.gz`;\n      default:\n        return filename;\n    }\n  }\n\n  apply(compiler) {\n    const { deleteOriginalAssets, test, threshold, minRatio } = this.options;\n\n    compiler.hooks.emit.tap('CompressPlugin', compilation =&gt; {\n      const assets = compilation.assets;\n      Object.keys(assets).forEach(filename =&gt; {\n        // 按文件名过滤，默认不过滤\n        if (!test.test(filename)) return;\n        const asset = assets[filename];\n\n        // 只处理比这个值大的资源。按字节计算\n        if (asset.size() &lt;= threshold) return;\n\n        // 不支持的压缩方式不处理\n        const compressedAssetName = this.getComporessedName(filename);\n        if (filename === compressedAssetName) return;\n        const compressedAsset = this.compressSync(asset.source());\n\n        // 返回文件大小， 按字节算\n        const compressedAssetSize = Buffer.isBuffer(compressedAsset)\n          ? Buffer.byteLength(compressedAsset, 'utf8')\n          : compressedAsset.length;\n\n        // 只有压缩率比这个值小的资源才会被处理\n        if (compressedAssetSize / asset.size() &gt;= minRatio) return;\n\n        assets[compressedAssetName] = {\n          // 返回文件内容\n          source: () =&gt;\n            // fileContent 既可以是代表文本文件的字符串，也可以是代表二进制文件的 Buffer\n            compressedAsset,\n          // 返回文件大小， 按字节算\n          size: () =&gt; compressedAssetSize,\n        };\n        // 是否删除压缩前的文件，看情况配置\n        if (deleteOriginalAssets) {\n          delete assets[filename];\n        }\n      });\n    });\n  }\n}\n\nmodule.exports = CompressPlugin;</pre><ul class=\"ne-ul\"><li id=\"u257c56b5\"><code class=\"ne-code\"><span class=\"ne-text\" style=\"font-size: 16px\">webpack.config.js</span></code></li></ul><pre data-language=\"javascript\" id=\"zthOM\" class=\"ne-codeblock language-javascript\">const path = require(&quot;path&quot;)\nconst CompressPlugin = require(&quot;./compress-webpack-plugin&quot;)\n\nmodule.exports = {\n  mode: &quot;development&quot;,\n  entry: &quot;./src/index.js&quot;,\n  output: {\n    filename: &quot;main.js&quot;,\n    path: path.resolve(__dirname, &quot;dist&quot;)\n  },\n  plugins: [\n    new CompressPlugin({\n      deleteOriginalAssets: true, // 是否删除压缩前的文件，看情况配置，默认为 false\n      algorithm: &quot;brotli&quot; // 压缩算法，默认是 gzip\n    })\n  ]\n}</pre></div>",
  "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"adapt\" /><h2 data-lake-id=\"Mawih\" id=\"Mawih\"><span data-lake-id=\"ucffc0f6c\" id=\"ucffc0f6c\">loader</span></h2><ul list=\"u5622948a\"><li fid=\"u71fdb5db\" data-lake-id=\"u1fe05e51\" id=\"u1fe05e51\"><strong><span data-lake-id=\"u13b5cbc6\" id=\"u13b5cbc6\">概念</span></strong><span data-lake-id=\"uefd4800c\" id=\"uefd4800c\">：</span><code data-lake-id=\"ua618bb6e\" id=\"ua618bb6e\"><span data-lake-id=\"ue8cd7cb8\" id=\"ue8cd7cb8\">loader</span></code><span data-lake-id=\"u62194b4c\" id=\"u62194b4c\"> 本质是一个函数，</span><code data-lake-id=\"ue6884d03\" id=\"ue6884d03\"><span data-lake-id=\"u8b678ced\" id=\"u8b678ced\">loader runner</span></code><span data-lake-id=\"udeeb56c1\" id=\"udeeb56c1\"> 会调用这个函数，该函数接收一个参数，参数是：</span><strong><span data-lake-id=\"ue6cb2860\" id=\"ue6cb2860\">上一个 </span></strong><code data-lake-id=\"ucbd154d8\" id=\"ucbd154d8\"><strong><span data-lake-id=\"u609aa203\" id=\"u609aa203\">loader</span></strong></code><strong><span data-lake-id=\"u98c1b23d\" id=\"u98c1b23d\"> 产生的结果</span></strong><span data-lake-id=\"ua75aa1bf\" id=\"ua75aa1bf\"> 或者 </span><strong><span data-lake-id=\"ua3edfaad\" id=\"ua3edfaad\">资源文件内容</span></strong><span data-lake-id=\"u7ab81ece\" id=\"u7ab81ece\">，然后进行转换，返回转换后的结果。函数的 </span><code data-lake-id=\"uceee9422\" id=\"uceee9422\"><span data-lake-id=\"uf6d4dfaa\" id=\"uf6d4dfaa\">this</span></code><span data-lake-id=\"u4d32ade4\" id=\"u4d32ade4\"> 上下文将由 </span><code data-lake-id=\"u4ab00136\" id=\"u4ab00136\"><span data-lake-id=\"ucd42fc17\" id=\"ucd42fc17\">webpack</span></code><span data-lake-id=\"u13ff91b0\" id=\"u13ff91b0\"> 填充，并且 </span><code data-lake-id=\"ude389871\" id=\"ude389871\"><span data-lake-id=\"u3df4d73b\" id=\"u3df4d73b\">loader runner</span></code><span data-lake-id=\"u01065439\" id=\"u01065439\"> 具有 一些有用的方法，可以使 </span><code data-lake-id=\"uda98a221\" id=\"uda98a221\"><span data-lake-id=\"u34954c00\" id=\"u34954c00\">loader</span></code><span data-lake-id=\"u5a3a081c\" id=\"u5a3a081c\"> 改变为异步调用方式，或者获取 </span><code data-lake-id=\"u4ff3044a\" id=\"u4ff3044a\"><span data-lake-id=\"udd15a53f\" id=\"udd15a53f\">query</span></code><span data-lake-id=\"uf271c26d\" id=\"uf271c26d\"> 参数。本质上起到了非 </span><code data-lake-id=\"u84aa92ea\" id=\"u84aa92ea\"><span data-lake-id=\"uc743abe0\" id=\"uc743abe0\">javaScript</span></code><span data-lake-id=\"u82a9c0c8\" id=\"u82a9c0c8\"> 类型资源的转译预处理工作。</span></li><li fid=\"u71fdb5db\" data-lake-id=\"ue788cce8\" id=\"ue788cce8\"><strong><span data-lake-id=\"ue0c55e47\" id=\"ue0c55e47\">同步模式</span></strong><span data-lake-id=\"u4d23e3cd\" id=\"u4d23e3cd\">：用于处理单个结果，如果有多个结果处理，则必须调用 </span><code data-lake-id=\"ue026830f\" id=\"ue026830f\"><span data-lake-id=\"ud97b7224\" id=\"ud97b7224\">this.callback()</span></code><span data-lake-id=\"uf0a50145\" id=\"uf0a50145\">，同时要返回 </span><code data-lake-id=\"uf7dc0b67\" id=\"uf7dc0b67\"><span data-lake-id=\"u9c8d6fa2\" id=\"u9c8d6fa2\">undefined</span></code><span data-lake-id=\"u91901d32\" id=\"u91901d32\">，以让 </span><code data-lake-id=\"u102a2dc2\" id=\"u102a2dc2\"><span data-lake-id=\"u8b6eaf9e\" id=\"u8b6eaf9e\">webpack</span></code><span data-lake-id=\"ucb818bfc\" id=\"ucb818bfc\"> 知道该 </span><code data-lake-id=\"u196485f9\" id=\"u196485f9\"><span data-lake-id=\"u1becacb5\" id=\"u1becacb5\">loader</span></code><span data-lake-id=\"u19526bba\" id=\"u19526bba\"> 返回的结果在 </span><code data-lake-id=\"ua104806c\" id=\"ua104806c\"><span data-lake-id=\"u9e60481e\" id=\"u9e60481e\">this.callback</span></code><span data-lake-id=\"u13fb0f8a\" id=\"u13fb0f8a\"> 中，而不是在 </span><code data-lake-id=\"u1f967cdf\" id=\"u1f967cdf\"><span data-lake-id=\"ua2830fd1\" id=\"ua2830fd1\">return</span></code><span data-lake-id=\"u705b2610\" id=\"u705b2610\"> 中。</span></li><li fid=\"u71fdb5db\" data-lake-id=\"u3caf12cc\" id=\"u3caf12cc\"><strong><span data-lake-id=\"ua25de141\" id=\"ua25de141\">异步模式</span></strong><span data-lake-id=\"u3becfae9\" id=\"u3becfae9\">：必须调用 </span><code data-lake-id=\"ua92f070f\" id=\"ua92f070f\"><span data-lake-id=\"ud70b17a3\" id=\"ud70b17a3\">this.async()</span></code><span data-lake-id=\"uf2dbaf36\" id=\"uf2dbaf36\">，来指示 </span><code data-lake-id=\"u06b562c3\" id=\"u06b562c3\"><span data-lake-id=\"u88aadddc\" id=\"u88aadddc\">loader runner</span></code><span data-lake-id=\"ub4597826\" id=\"ub4597826\"> 等待异步结果，它会返回 </span><code data-lake-id=\"u99dc56de\" id=\"u99dc56de\"><span data-lake-id=\"u2eee6c56\" id=\"u2eee6c56\">this.callback()</span></code><span data-lake-id=\"u7a375908\" id=\"u7a375908\"> 回调函数，随后 </span><code data-lake-id=\"u623df6cb\" id=\"u623df6cb\"><span data-lake-id=\"u60d69bd9\" id=\"u60d69bd9\">loader</span></code><span data-lake-id=\"u13acedfb\" id=\"u13acedfb\"> 必须返回 </span><code data-lake-id=\"ua26475aa\" id=\"ua26475aa\"><span data-lake-id=\"uda587489\" id=\"uda587489\">undefined</span></code><span data-lake-id=\"u00652f03\" id=\"u00652f03\"> 并且调用该回调函数。</span></li><li fid=\"u71fdb5db\" data-lake-id=\"u4fef57f0\" id=\"u4fef57f0\"><strong><span data-lake-id=\"uac53c181\" id=\"uac53c181\">执行顺序：</span></strong><span data-lake-id=\"u729e2345\" id=\"u729e2345\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">当链式调用多个 </span><code data-lake-id=\"uac949ed3\" id=\"uac949ed3\"><span data-lake-id=\"u07779273\" id=\"u07779273\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">loader</span></code><span data-lake-id=\"u0b971b5f\" id=\"u0b971b5f\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\"> 的时候，它们会以相反的顺序执行。取决于数组写法格式，</span><strong><span data-lake-id=\"u2f1f78c1\" id=\"u2f1f78c1\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">从右向左 </span></strong><span data-lake-id=\"u47ea995b\" id=\"u47ea995b\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">或者 </span><strong><span data-lake-id=\"u400651ff\" id=\"u400651ff\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">从下向上 </span></strong><span data-lake-id=\"u25cc7e3b\" id=\"u25cc7e3b\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">执行。</span></li><li fid=\"u71fdb5db\" data-lake-id=\"ucd7c6273\" id=\"ucd7c6273\"><strong><span data-lake-id=\"uc5e7f8b7\" id=\"uc5e7f8b7\">配置</span></strong><span data-lake-id=\"u28cfc1ad\" id=\"u28cfc1ad\">：</span><code data-lake-id=\"uc8cba614\" id=\"uc8cba614\"><span data-lake-id=\"ue05618de\" id=\"ue05618de\">loader</span></code><span data-lake-id=\"u400481d2\" id=\"u400481d2\"> 在 </span><code data-lake-id=\"u41e8a63b\" id=\"u41e8a63b\"><span data-lake-id=\"u653f2520\" id=\"u653f2520\">module.rules</span></code><span data-lake-id=\"u86fad9bd\" id=\"u86fad9bd\"> 中进行配置，作为模块的解析规则，是一个数组，每一项都是一个对象，其内部包含了 </span><code data-lake-id=\"u9d4cc880\" id=\"u9d4cc880\"><span data-lake-id=\"uc7164f20\" id=\"uc7164f20\">test</span></code><span data-lake-id=\"u3398982f\" id=\"u3398982f\">(类型文件)、</span><code data-lake-id=\"ud55bb087\" id=\"ud55bb087\"><span data-lake-id=\"u50bba783\" id=\"u50bba783\">loader</span></code><span data-lake-id=\"u7a215c81\" id=\"u7a215c81\">、</span><code data-lake-id=\"uc7fc3f8b\" id=\"uc7fc3f8b\"><span data-lake-id=\"uecb4f929\" id=\"uecb4f929\">options</span></code><span data-lake-id=\"u9d42d1d9\" id=\"u9d42d1d9\">(参数)等属性。</span></li></ul><h3 data-lake-id=\"dY2Is\" id=\"dY2Is\"><span data-lake-id=\"ud5ac5764\" id=\"ud5ac5764\">常用 loader</span></h3><ol list=\"u318bd360\"><li fid=\"u9a3fa4f7\" data-lake-id=\"u39f05aa6\" id=\"u39f05aa6\"><span data-lake-id=\"ud5006509\" id=\"ud5006509\">在</span><code data-lake-id=\"u6b69c185\" id=\"u6b69c185\"><span data-lake-id=\"udfd13670\" id=\"udfd13670\">webpack v5</span></code><span data-lake-id=\"u13d2583d\" id=\"u13d2583d\">中，可以通过设置</span><code data-lake-id=\"uddf31e71\" id=\"uddf31e71\"><span data-lake-id=\"u7242bfdc\" id=\"u7242bfdc\">type: &quot;javascript/auto&quot;</span></code><span data-lake-id=\"u117eaf1c\" id=\"u117eaf1c\">来使用旧的</span><code data-lake-id=\"u1dcca8d0\" id=\"u1dcca8d0\"><span data-lake-id=\"ucbbf5a32\" id=\"ucbbf5a32\">assets loader</span></code></li><li fid=\"u9a3fa4f7\" data-lake-id=\"uebf5c03f\" id=\"uebf5c03f\"><code data-lake-id=\"uabf2fd2e\" id=\"uabf2fd2e\"><span data-lake-id=\"u8b4ebc5e\" id=\"u8b4ebc5e\">raw-loader</span></code><span data-lake-id=\"u93f74bfe\" id=\"u93f74bfe\">，用来导出资源的源代码。在</span><code data-lake-id=\"ud987ad85\" id=\"ud987ad85\"><span data-lake-id=\"u22d64f3c\" id=\"u22d64f3c\">webpack v5</span></code><span data-lake-id=\"u9426e755\" id=\"u9426e755\">中，被</span><code data-lake-id=\"u8caa87fe\" id=\"u8caa87fe\"><span data-lake-id=\"u2da77e99\" id=\"u2da77e99\">asset/source</span></code><span data-lake-id=\"u0dbc214e\" id=\"u0dbc214e\">模块替代</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"u536f2373\" id=\"u536f2373\"><code data-lake-id=\"uddb213a8\" id=\"uddb213a8\"><span data-lake-id=\"ub696ac02\" id=\"ub696ac02\">file-loader</span></code><span data-lake-id=\"u782aac13\" id=\"u782aac13\">，用来发发送一个单独的文件并导出</span><code data-lake-id=\"ua9933cfe\" id=\"ua9933cfe\"><span data-lake-id=\"ucbb7c919\" id=\"ucbb7c919\">URL</span></code><span data-lake-id=\"ub6c65de4\" id=\"ub6c65de4\">。在</span><code data-lake-id=\"u57ecc06d\" id=\"u57ecc06d\"><span data-lake-id=\"u3e4cf3fe\" id=\"u3e4cf3fe\">webpack v5</span></code><span data-lake-id=\"uead582a5\" id=\"uead582a5\">中，被</span><code data-lake-id=\"u51be09f1\" id=\"u51be09f1\"><span data-lake-id=\"uc8fd64fa\" id=\"uc8fd64fa\">asset/resource</span></code><span data-lake-id=\"uc4a11eed\" id=\"uc4a11eed\">模块替代</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"ub113b0b7\" id=\"ub113b0b7\"><code data-lake-id=\"u312903d1\" id=\"u312903d1\"><span data-lake-id=\"u3bb5d8a8\" id=\"u3bb5d8a8\">url-loader</span></code><span data-lake-id=\"uef536773\" id=\"uef536773\">，用来导出一个资源的</span><code data-lake-id=\"uba8e7356\" id=\"uba8e7356\"><span data-lake-id=\"ua6e6b43e\" id=\"ua6e6b43e\">data uri</span></code><span data-lake-id=\"ub503a3eb\" id=\"ub503a3eb\">，与</span><code data-lake-id=\"uaca97172\" id=\"uaca97172\"><span data-lake-id=\"u8a4d7754\" id=\"u8a4d7754\">file-loader</span></code><span data-lake-id=\"ue7709a36\" id=\"ue7709a36\">类似，区别是：可以设置一个阀值，大于的交给</span><code data-lake-id=\"u7b5f4ecf\" id=\"u7b5f4ecf\"><span data-lake-id=\"ub7224d05\" id=\"ub7224d05\">file-laoder</span></code><span data-lake-id=\"u955f1734\" id=\"u955f1734\">处理，小于的返回文件的</span><code data-lake-id=\"u04b9fba2\" id=\"u04b9fba2\"><span data-lake-id=\"u4302fb43\" id=\"u4302fb43\">base64</span></code><span data-lake-id=\"ub9362d58\" id=\"ub9362d58\">编码。在</span><code data-lake-id=\"u3a40f019\" id=\"u3a40f019\"><span data-lake-id=\"ua3cf5765\" id=\"ua3cf5765\">webpack v5</span></code><span data-lake-id=\"u4758ee76\" id=\"u4758ee76\">中，被</span><code data-lake-id=\"u3910f9fa\" id=\"u3910f9fa\"><span data-lake-id=\"ud2c9d597\" id=\"ud2c9d597\">asset/inline</span></code><span data-lake-id=\"u731e39d4\" id=\"u731e39d4\">模块替代</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"u02484084\" id=\"u02484084\"><code data-lake-id=\"u8d6980cf\" id=\"u8d6980cf\"><span data-lake-id=\"uf78be11f\" id=\"uf78be11f\">style-loader</span></code><span data-lake-id=\"uc6634a03\" id=\"uc6634a03\">：将</span><code data-lake-id=\"udfb22fa4\" id=\"udfb22fa4\"><span data-lake-id=\"u92ebc877\" id=\"u92ebc877\">css</span></code><span data-lake-id=\"u41e62b5e\" id=\"u41e62b5e\">插入到</span><code data-lake-id=\"u1a4e1baf\" id=\"u1a4e1baf\"><span data-lake-id=\"uc48da4d3\" id=\"uc48da4d3\">dom</span></code><span data-lake-id=\"u353407df\" id=\"u353407df\">中</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"ucb50f9ee\" id=\"ucb50f9ee\"><code data-lake-id=\"u6e361313\" id=\"u6e361313\"><span data-lake-id=\"uddd6ea7f\" id=\"uddd6ea7f\">mini-css-extract-plugin</span></code><span data-lake-id=\"ub304abd8\" id=\"ub304abd8\">的</span><code data-lake-id=\"uedb3db90\" id=\"uedb3db90\"><span data-lake-id=\"u74aa330e\" id=\"u74aa330e\">MiniCssExtractPlugin.loader</span></code><span data-lake-id=\"u75e79511\" id=\"u75e79511\">：替换</span><code data-lake-id=\"u97dbb024\" id=\"u97dbb024\"><span data-lake-id=\"ud14aeee5\" id=\"ud14aeee5\">style-loader</span></code><span data-lake-id=\"u9d707362\" id=\"u9d707362\">，用于将</span><code data-lake-id=\"u9a6de6cb\" id=\"u9a6de6cb\"><span data-lake-id=\"u7106894d\" id=\"u7106894d\">javaScript</span></code><span data-lake-id=\"ubb60aaf9\" id=\"ubb60aaf9\">中的</span><code data-lake-id=\"u550d27ed\" id=\"u550d27ed\"><span data-lake-id=\"u99d9a8fe\" id=\"u99d9a8fe\">css</span></code><span data-lake-id=\"u3981af30\" id=\"u3981af30\">分离</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"u3071bf06\" id=\"u3071bf06\"><code data-lake-id=\"u3763818e\" id=\"u3763818e\"><span data-lake-id=\"u04afa4ff\" id=\"u04afa4ff\">css-loader</span></code><span data-lake-id=\"ue7da2e3c\" id=\"ue7da2e3c\">：会对</span><code data-lake-id=\"ucbe3aea4\" id=\"ucbe3aea4\"><span data-lake-id=\"u0b03da91\" id=\"u0b03da91\">@import 和 url()</span></code><span data-lake-id=\"u0c5365e2\" id=\"u0c5365e2\">进行处理，支持</span><code data-lake-id=\"ucbb60eb0\" id=\"ucbb60eb0\"><span data-lake-id=\"u413740d4\" id=\"u413740d4\">css</span></code><span data-lake-id=\"u689f0ee9\" id=\"u689f0ee9\">模块化、压缩、文件导入等特性</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"u71aef820\" id=\"u71aef820\"><code data-lake-id=\"ued59c20d\" id=\"ued59c20d\"><span data-lake-id=\"u659123d0\" id=\"u659123d0\">postcss-loader</span></code><span data-lake-id=\"ua579484f\" id=\"ua579484f\">：扩展</span><code data-lake-id=\"ufa87eb51\" id=\"ufa87eb51\"><span data-lake-id=\"u4f4591dd\" id=\"u4f4591dd\">css</span></code><span data-lake-id=\"uf82c6edc\" id=\"uf82c6edc\">语法，使用下一代</span><code data-lake-id=\"ud4b952de\" id=\"ud4b952de\"><span data-lake-id=\"u740fef0e\" id=\"u740fef0e\">css</span></code><span data-lake-id=\"u4cdf55bd\" id=\"u4cdf55bd\">，可以配合</span><code data-lake-id=\"u2dbc9e90\" id=\"u2dbc9e90\"><span data-lake-id=\"u208c6b1b\" id=\"u208c6b1b\">autofixer</span></code><span data-lake-id=\"u8f2ea87f\" id=\"u8f2ea87f\">插件添加不同浏览器前缀</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"u7e4d0462\" id=\"u7e4d0462\"><code data-lake-id=\"uac515052\" id=\"uac515052\"><span data-lake-id=\"u38f98784\" id=\"u38f98784\">sass-loader</span></code><span data-lake-id=\"u46650744\" id=\"u46650744\">：将</span><code data-lake-id=\"u296f6d9f\" id=\"u296f6d9f\"><span data-lake-id=\"u8de32fad\" id=\"u8de32fad\">sass/scss</span></code><span data-lake-id=\"uc9fffbb2\" id=\"uc9fffbb2\">编译为</span><code data-lake-id=\"uf5082834\" id=\"uf5082834\"><span data-lake-id=\"u51131733\" id=\"u51131733\">css</span></code><span data-lake-id=\"u5a384c04\" id=\"u5a384c04\">的</span><code data-lake-id=\"u5a8d7d0c\" id=\"u5a8d7d0c\"><span data-lake-id=\"ud2a0129e\" id=\"ud2a0129e\">loader</span></code><span data-lake-id=\"u00d7f40c\" id=\"u00d7f40c\">，需要同时安装</span><code data-lake-id=\"u17dd4ada\" id=\"u17dd4ada\"><span data-lake-id=\"uc01f21cc\" id=\"uc01f21cc\">sass</span></code></li><li fid=\"u9a3fa4f7\" data-lake-id=\"u4ed9807a\" id=\"u4ed9807a\"><code data-lake-id=\"ubbb85ea6\" id=\"ubbb85ea6\"><span data-lake-id=\"u8ee75ce3\" id=\"u8ee75ce3\">less-loader</span></code><span data-lake-id=\"u95f7f9f9\" id=\"u95f7f9f9\">：将</span><code data-lake-id=\"u30e78a01\" id=\"u30e78a01\"><span data-lake-id=\"u272cf099\" id=\"u272cf099\">less</span></code><span data-lake-id=\"ueb26afb1\" id=\"ueb26afb1\">编译为</span><code data-lake-id=\"u121de2c7\" id=\"u121de2c7\"><span data-lake-id=\"ue2e25257\" id=\"ue2e25257\">css</span></code><span data-lake-id=\"u46cd9ce6\" id=\"u46cd9ce6\">的</span><code data-lake-id=\"u010c1596\" id=\"u010c1596\"><span data-lake-id=\"u51c5688d\" id=\"u51c5688d\">loader</span></code><span data-lake-id=\"ue34a037f\" id=\"ue34a037f\">，需要同时安装</span><code data-lake-id=\"ubcb7d9b8\" id=\"ubcb7d9b8\"><span data-lake-id=\"uf75a8515\" id=\"uf75a8515\">less</span></code></li><li fid=\"u9a3fa4f7\" data-lake-id=\"u0e909dfc\" id=\"u0e909dfc\"><code data-lake-id=\"u5a4e6a37\" id=\"u5a4e6a37\"><span data-lake-id=\"u4d8e02da\" id=\"u4d8e02da\">stylus-loader</span></code><span data-lake-id=\"u6521e41b\" id=\"u6521e41b\">：将</span><code data-lake-id=\"u4f5dfb9a\" id=\"u4f5dfb9a\"><span data-lake-id=\"u5eabf935\" id=\"u5eabf935\">stylus</span></code><span data-lake-id=\"u6d2614c1\" id=\"u6d2614c1\">编译为</span><code data-lake-id=\"u19629afe\" id=\"u19629afe\"><span data-lake-id=\"u4fecb92c\" id=\"u4fecb92c\">css</span></code><span data-lake-id=\"ub567f9c7\" id=\"ub567f9c7\">的</span><code data-lake-id=\"u78d7361f\" id=\"u78d7361f\"><span data-lake-id=\"uefd04a98\" id=\"uefd04a98\">loader</span></code><span data-lake-id=\"u24991721\" id=\"u24991721\">，需要同时安装</span><code data-lake-id=\"u46c64010\" id=\"u46c64010\"><span data-lake-id=\"u33385d07\" id=\"u33385d07\">stylus</span></code></li><li fid=\"u9a3fa4f7\" data-lake-id=\"u0da74675\" id=\"u0da74675\"><code data-lake-id=\"u781d8e26\" id=\"u781d8e26\"><span data-lake-id=\"u47494d00\" id=\"u47494d00\">babel-loader</span></code><span data-lake-id=\"u0ee7b5b2\" id=\"u0ee7b5b2\">：用于</span><code data-lake-id=\"uf910b29e\" id=\"uf910b29e\"><span data-lake-id=\"uefa92226\" id=\"uefa92226\">javaScript</span></code><span data-lake-id=\"ue6f74466\" id=\"ue6f74466\">高版本语法降级和语法转译工作</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"uc7c72b8b\" id=\"uc7c72b8b\"><code data-lake-id=\"u62d7fcf5\" id=\"u62d7fcf5\"><span data-lake-id=\"u6ac9893e\" id=\"u6ac9893e\">ts-loader</span></code><span data-lake-id=\"u2f54fcae\" id=\"u2f54fcae\">：将</span><code data-lake-id=\"u84834e5b\" id=\"u84834e5b\"><span data-lake-id=\"uc2798431\" id=\"uc2798431\">TypeScript</span></code><span data-lake-id=\"u6e953347\" id=\"u6e953347\">代码转译为</span><code data-lake-id=\"u30cdc4b3\" id=\"u30cdc4b3\"><span data-lake-id=\"u5e3dc041\" id=\"u5e3dc041\">JavaScript</span></code><span data-lake-id=\"u3a43189f\" id=\"u3a43189f\">，需要同时安装</span><code data-lake-id=\"u0c8b5e9b\" id=\"u0c8b5e9b\"><span data-lake-id=\"ueb000f55\" id=\"ueb000f55\">typescript</span></code><span data-lake-id=\"u1f6ce965\" id=\"u1f6ce965\">、</span><code data-lake-id=\"u3e596c2c\" id=\"u3e596c2c\"><span data-lake-id=\"u0703477f\" id=\"u0703477f\">@babel/preset-typescript</span></code></li><li fid=\"u9a3fa4f7\" data-lake-id=\"ufdacb5f6\" id=\"ufdacb5f6\"><code data-lake-id=\"u0d7edaa5\" id=\"u0d7edaa5\"><span data-lake-id=\"u0801d2ff\" id=\"u0801d2ff\">remark-loader</span></code><span data-lake-id=\"u3a7759db\" id=\"u3a7759db\">：用于加载</span><code data-lake-id=\"u2ec8e2f7\" id=\"u2ec8e2f7\"><span data-lake-id=\"u72117394\" id=\"u72117394\">markdown</span></code></li><li fid=\"u9a3fa4f7\" data-lake-id=\"u9226f2e5\" id=\"u9226f2e5\"><code data-lake-id=\"u8d53031d\" id=\"u8d53031d\"><span data-lake-id=\"u815fb4f5\" id=\"u815fb4f5\">vue-loader</span></code><span data-lake-id=\"ub9745342\" id=\"ub9745342\">：用来加载</span><code data-lake-id=\"ub0674889\" id=\"ub0674889\"><span data-lake-id=\"u3539c461\" id=\"u3539c461\">vue</span></code><span data-lake-id=\"u2a66b2fb\" id=\"u2a66b2fb\">单文件组件</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"uedc1c69c\" id=\"uedc1c69c\"><code data-lake-id=\"u2aca5743\" id=\"u2aca5743\"><span data-lake-id=\"u370010f8\" id=\"u370010f8\">eslint-loader</span></code><span data-lake-id=\"u6f57f831\" id=\"u6f57f831\">：通过</span><code data-lake-id=\"u00650ac3\" id=\"u00650ac3\"><span data-lake-id=\"u8801d945\" id=\"u8801d945\">eslint</span></code><span data-lake-id=\"ud0237ee6\" id=\"ud0237ee6\">检查</span><code data-lake-id=\"ud88a4e3f\" id=\"ud88a4e3f\"><span data-lake-id=\"ud5f33c61\" id=\"ud5f33c61\">javaScript</span></code><span data-lake-id=\"ua092346b\" id=\"ua092346b\">代码</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"uc3a62329\" id=\"uc3a62329\"><code data-lake-id=\"uc0a9749a\" id=\"uc0a9749a\"><span data-lake-id=\"ua9f5fa69\" id=\"ua9f5fa69\">tslint-loader</span></code><span data-lake-id=\"u4464dd1b\" id=\"u4464dd1b\">：通过</span><code data-lake-id=\"uef483719\" id=\"uef483719\"><span data-lake-id=\"u013b1649\" id=\"u013b1649\">tslint</span></code><span data-lake-id=\"u660d65fe\" id=\"u660d65fe\">检查</span><code data-lake-id=\"u4017c09e\" id=\"u4017c09e\"><span data-lake-id=\"ue074db75\" id=\"ue074db75\">typeScript</span></code><span data-lake-id=\"ub2a9479c\" id=\"ub2a9479c\">代码</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"u8ee9007d\" id=\"u8ee9007d\"><code data-lake-id=\"u827cdfd5\" id=\"u827cdfd5\"><span data-lake-id=\"uc360c49d\" id=\"uc360c49d\">cache-loader</span></code><card type=\"inline\" name=\"label\" value=\"data:%7B%22label%22%3A%22webpack5%E4%B8%8D%E9%80%82%E7%94%A8%22%2C%22colorIndex%22%3A0%2C%22id%22%3A%22VpFaz%22%7D\"></card><span data-lake-id=\"u56d86822\" id=\"u56d86822\">：可以在一些性能开销较大的</span><code data-lake-id=\"u91e8c4f8\" id=\"u91e8c4f8\"><span data-lake-id=\"u0f19452b\" id=\"u0f19452b\">loader</span></code><span data-lake-id=\"ub3e205d2\" id=\"ub3e205d2\">之前添加，目的是将结果缓存到磁盘里，在</span><code data-lake-id=\"u6a247c3e\" id=\"u6a247c3e\"><span data-lake-id=\"u49a6643a\" id=\"u49a6643a\">webpack v5</span></code><span data-lake-id=\"u5ac096aa\" id=\"u5ac096aa\">中提供了该功能</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"ua18a1333\" id=\"ua18a1333\"><code data-lake-id=\"u3552c512\" id=\"u3552c512\"><span data-lake-id=\"u07d4352e\" id=\"u07d4352e\">svg-inline-loader</span></code><span data-lake-id=\"u6fa95340\" id=\"u6fa95340\">：将压缩后的 </span><code data-lake-id=\"u8440a2c2\" id=\"u8440a2c2\"><span data-lake-id=\"u315f0b9c\" id=\"u315f0b9c\">svg</span></code><span data-lake-id=\"u97a453b5\" id=\"u97a453b5\"> 文件内联为模块，注入到代码中</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"u52b0fec8\" id=\"u52b0fec8\"><code data-lake-id=\"ue63bb347\" id=\"ue63bb347\"><span data-lake-id=\"u5ec819da\" id=\"u5ec819da\">source-map-loader</span></code><span data-lake-id=\"ua34b879b\" id=\"ua34b879b\">：从现有的源文件中提取</span><code data-lake-id=\"uee2e579b\" id=\"uee2e579b\"><span data-lake-id=\"u6447106a\" id=\"u6447106a\">source maps</span></code><span data-lake-id=\"ubd230288\" id=\"ubd230288\">，可以加载额外的</span><code data-lake-id=\"u5062abd0\" id=\"u5062abd0\"><span data-lake-id=\"ue000c558\" id=\"ue000c558\">source map</span></code><span data-lake-id=\"u22cf55c8\" id=\"u22cf55c8\">文件，允许</span><code data-lake-id=\"u07f152a9\" id=\"u07f152a9\"><span data-lake-id=\"ude494c9f\" id=\"ude494c9f\">webpack</span></code><span data-lake-id=\"u798ab50f\" id=\"u798ab50f\">跨库维护</span><code data-lake-id=\"ud15494df\" id=\"ud15494df\"><span data-lake-id=\"uf0386eea\" id=\"uf0386eea\">source map</span></code><span data-lake-id=\"ua5a5e5b4\" id=\"ua5a5e5b4\">数据，方便调试</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"u44df75df\" id=\"u44df75df\"><code data-lake-id=\"u8d60221d\" id=\"u8d60221d\"><span data-lake-id=\"u79c690c8\" id=\"u79c690c8\">mocha-loader</span></code><span data-lake-id=\"u06cffb5d\" id=\"u06cffb5d\">：允许通过 </span><code data-lake-id=\"ubb39ab21\" id=\"ubb39ab21\"><span data-lake-id=\"uc036fd89\" id=\"uc036fd89\">webpack</span></code><span data-lake-id=\"uc967f338\" id=\"uc967f338\"> 加载和运行 </span><code data-lake-id=\"u8355aeaa\" id=\"u8355aeaa\"><span data-lake-id=\"u5506dbc7\" id=\"u5506dbc7\">Mocha</span></code><span data-lake-id=\"uc08ea734\" id=\"uc08ea734\"> 测试</span></li><li fid=\"u9a3fa4f7\" data-lake-id=\"u6ca7e106\" id=\"u6ca7e106\"><code data-lake-id=\"u3e96364a\" id=\"u3e96364a\"><span data-lake-id=\"u7b800bc2\" id=\"u7b800bc2\">coverjs-loader</span></code><span data-lake-id=\"u4407f0f9\" id=\"u4407f0f9\">：用来计算测试的覆盖率</span></li></ol><blockquote data-lake-id=\"u4016899c\" id=\"u4016899c\" class=\"lake-alert lake-alert-warning\"><p data-lake-id=\"u3e114d8a\" id=\"u3e114d8a\"><span data-lake-id=\"ucbbde574\" id=\"ucbbde574\">注意：</span></p><ol list=\"u9cb4fe42\"><li fid=\"u92ae6754\" data-lake-id=\"uf57a6a6e\" id=\"uf57a6a6e\"><code data-lake-id=\"u61394f38\" id=\"u61394f38\"><span data-lake-id=\"uc8cd0924\" id=\"uc8cd0924\">loader</span></code><span data-lake-id=\"uc8a8bacc\" id=\"uc8a8bacc\">支持链式调用，因此开发过程中需要严格遵守 </span><strong><span data-lake-id=\"u77e63c94\" id=\"u77e63c94\">单一职责</span></strong><span data-lake-id=\"uecddf825\" id=\"uecddf825\">，即每个 </span><code data-lake-id=\"ua5013ac4\" id=\"ua5013ac4\"><span data-lake-id=\"ub3fffd00\" id=\"ub3fffd00\">loader</span></code><span data-lake-id=\"ud2a9d9f7\" id=\"ud2a9d9f7\"> 只负责自己需要处理的内容</span></li><li fid=\"u92ae6754\" data-lake-id=\"uc2841018\" id=\"uc2841018\"><code data-lake-id=\"u354b677d\" id=\"u354b677d\"><span data-lake-id=\"u8d363fc2\" id=\"u8d363fc2\">loader</span></code><span data-lake-id=\"u7fe17195\" id=\"u7fe17195\"> 运行在 </span><code data-lake-id=\"uaf9fee13\" id=\"uaf9fee13\"><span data-lake-id=\"ud1c095dd\" id=\"ud1c095dd\">node.js</span></code><span data-lake-id=\"uc12934ab\" id=\"uc12934ab\"> 中，因此需要导出一个函数，参数是加载文件原始 </span><code data-lake-id=\"uda0c17ed\" id=\"uda0c17ed\"><span data-lake-id=\"u20fff46a\" id=\"u20fff46a\">utf-8</span></code><span data-lake-id=\"u38638487\" id=\"u38638487\"> 格式编码的字符串，返回处理后的内容</span></li><li fid=\"u92ae6754\" data-lake-id=\"u49a081db\" id=\"u49a081db\"><span data-lake-id=\"ua15a67d7\" id=\"ua15a67d7\">如果要返回多个结果，可以使用 </span><code data-lake-id=\"u1fb53d13\" id=\"u1fb53d13\"><span data-lake-id=\"udfd5e49d\" id=\"udfd5e49d\">this.calback(err: Error | null, content: string | Buffer, sourceMap?: SourceMap, meta?: any) </span></code></li><li fid=\"u92ae6754\" data-lake-id=\"u665109b8\" id=\"u665109b8\"><span data-lake-id=\"ua9187a72\" id=\"ua9187a72\">在 </span><code data-lake-id=\"u1efa6772\" id=\"u1efa6772\"><span data-lake-id=\"u88dcd121\" id=\"u88dcd121\">loader</span></code><span data-lake-id=\"ue46dbdd2\" id=\"ue46dbdd2\"> 中，异步操作需要使用 </span><code data-lake-id=\"u7498c348\" id=\"u7498c348\"><span data-lake-id=\"u8f43a3c8\" id=\"u8f43a3c8\">this.async</span></code></li><li fid=\"u92ae6754\" data-lake-id=\"u75551db6\" id=\"u75551db6\"><code data-lake-id=\"u46184e28\" id=\"u46184e28\"><span data-lake-id=\"u58ba6198\" id=\"u58ba6198\">loader-utils</span></code><span data-lake-id=\"u3716fb64\" id=\"u3716fb64\"> 提供了 </span><code data-lake-id=\"u666e5f54\" id=\"u666e5f54\"><span data-lake-id=\"ue2c6c346\" id=\"ue2c6c346\">getOptions</span></code><span data-lake-id=\"uf38305e6\" id=\"uf38305e6\"> 方法来获取参数信息(</span><code data-lake-id=\"u56ea16a9\" id=\"u56ea16a9\"><span data-lake-id=\"ub6966cfa\" id=\"ub6966cfa\">webpack5</span></code><span data-lake-id=\"u9e126109\" id=\"u9e126109\"> 内置为 </span><code data-lake-id=\"u6ca12779\" id=\"u6ca12779\"><span data-lake-id=\"u1108899c\" id=\"u1108899c\">this.getOptions</span></code><span data-lake-id=\"u511e7929\" id=\"u511e7929\"> 来获取)；</span><code data-lake-id=\"u13b42396\" id=\"u13b42396\"><span data-lake-id=\"uf441bde8\" id=\"uf441bde8\">schema-utils</span></code><span data-lake-id=\"uca64d6f0\" id=\"uca64d6f0\"> 提供了 </span><code data-lake-id=\"ub91b4e66\" id=\"ub91b4e66\"><span data-lake-id=\"u44e64ae1\" id=\"u44e64ae1\">validate</span></code><span data-lake-id=\"u8e5a9c43\" id=\"u8e5a9c43\"> 方法，用来做 </span><code data-lake-id=\"u81ab324b\" id=\"u81ab324b\"><span data-lake-id=\"ud86c7f9e\" id=\"ud86c7f9e\">json</span></code><span data-lake-id=\"uf79e175b\" id=\"uf79e175b\"> 模式验证</span></li></ol></blockquote><h3 data-lake-id=\"Cqzlp\" id=\"Cqzlp\"><span data-lake-id=\"u3dee67c8\" id=\"u3dee67c8\">loader 介绍</span></h3><h4 data-lake-id=\"UG63r\" id=\"UG63r\"><span data-lake-id=\"ua038a23b\" id=\"ua038a23b\">pitching loader</span></h4><p data-lake-id=\"u137d47d0\" id=\"u137d47d0\"><code data-lake-id=\"ubabd75c6\" id=\"ubabd75c6\"><span data-lake-id=\"ue699f782\" id=\"ue699f782\">loader</span></code><span data-lake-id=\"u79702788\" id=\"u79702788\"> 总是从右到左地被调用，有些情况下，</span><code data-lake-id=\"u3b23b7ba\" id=\"u3b23b7ba\"><span data-lake-id=\"u79cd4503\" id=\"u79cd4503\">loader</span></code><span data-lake-id=\"uab2b04cc\" id=\"uab2b04cc\"> 只关心 </span><code data-lake-id=\"uf388c0ff\" id=\"uf388c0ff\"><span data-lake-id=\"u8ae301e3\" id=\"u8ae301e3\">request</span></code><span data-lake-id=\"u85d03a27\" id=\"u85d03a27\"> 后面的元数据(</span><code data-lake-id=\"udf8bed75\" id=\"udf8bed75\"><span data-lake-id=\"u42d7189a\" id=\"u42d7189a\">metadata</span></code><span data-lake-id=\"uf01a0144\" id=\"uf01a0144\">)，并且忽略前一个 </span><code data-lake-id=\"u4e6e75a2\" id=\"u4e6e75a2\"><span data-lake-id=\"u3711cc81\" id=\"u3711cc81\">loader</span></code><span data-lake-id=\"u4b63651e\" id=\"u4b63651e\"> 的结果。在实际(从右到左)执行 </span><code data-lake-id=\"u4e8a3825\" id=\"u4e8a3825\"><span data-lake-id=\"u9cf57a08\" id=\"u9cf57a08\">loader</span></code><span data-lake-id=\"u8fecd3a2\" id=\"u8fecd3a2\"> 之前，会先从左到右调用 </span><code data-lake-id=\"ub48a7d34\" id=\"ub48a7d34\"><span data-lake-id=\"u97e0a475\" id=\"u97e0a475\">loader</span></code><span data-lake-id=\"u7c850154\" id=\"u7c850154\"> 上的 </span><code data-lake-id=\"u9c53ca49\" id=\"u9c53ca49\"><span data-lake-id=\"u10542049\" id=\"u10542049\">pitch</span></code><span data-lake-id=\"u62f4b469\" id=\"u62f4b469\"> 方法。</span></p><p data-lake-id=\"u7fef2fe4\" id=\"u7fef2fe4\"><span data-lake-id=\"u2848fa5b\" id=\"u2848fa5b\">​</span><br></p><p data-lake-id=\"u29faa656\" id=\"u29faa656\"><span data-lake-id=\"u52342eb0\" id=\"u52342eb0\">对于以下 </span><code data-lake-id=\"u5b6f40d3\" id=\"u5b6f40d3\"><span data-lake-id=\"u29486c6d\" id=\"u29486c6d\">use</span></code><span data-lake-id=\"u16db26de\" id=\"u16db26de\"> 配置：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22use%3A%20%5B%5Cn%20%20'a-loader'%2C%5Cn%20%20'b-loader'%2C%5Cn%20%20'c-loader'%5Cn%5D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22mi1CN%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u57688636\" id=\"u57688636\"><span data-lake-id=\"u4a053fa9\" id=\"u4a053fa9\">将会发生这些步骤：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22%7C-%20a-loader%20%60pitch%60%5Cn%20%20%7C-%20b-loader%20%60pitch%60%5Cn%20%20%20%20%7C-%20c-loader%20%60pitch%60%5Cn%20%20%20%20%20%20%7C-%20requested%20module%20is%20picked%20up%20as%20a%20dependency%5Cn%20%20%20%20%7C-%20c-loader%20normal%20execution%5Cn%20%20%7C-%20b-loader%20normal%20execution%5Cn%7C-%20a-loader%20normal%20execution%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22jtrfa%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u2bb7976b\" id=\"u2bb7976b\"><span data-lake-id=\"u5da80969\" id=\"u5da80969\">那么，为什么 </span><code data-lake-id=\"u61099f96\" id=\"u61099f96\"><span data-lake-id=\"u03982dbb\" id=\"u03982dbb\">loader</span></code><span data-lake-id=\"u3ff43a60\" id=\"u3ff43a60\"> 可以利用 &quot;跳跃(</span><code data-lake-id=\"udaf79bdf\" id=\"udaf79bdf\"><span data-lake-id=\"u5fffc298\" id=\"u5fffc298\">pitching</span></code><span data-lake-id=\"u6d3562f3\" id=\"u6d3562f3\">)&quot; 阶段呢？</span></p><p data-lake-id=\"u8881bcbd\" id=\"u8881bcbd\"><span data-lake-id=\"u128f36aa\" id=\"u128f36aa\">​</span><br></p><p data-lake-id=\"ue213d7d9\" id=\"ue213d7d9\"><span data-lake-id=\"u5994772d\" id=\"u5994772d\">首先，传递给 </span><code data-lake-id=\"u56b50c5a\" id=\"u56b50c5a\"><span data-lake-id=\"uda08d3af\" id=\"uda08d3af\">pitch</span></code><span data-lake-id=\"ud8d00614\" id=\"ud8d00614\"> 方法的 </span><code data-lake-id=\"ue490df4f\" id=\"ue490df4f\"><span data-lake-id=\"u7669fd1d\" id=\"u7669fd1d\">data</span></code><span data-lake-id=\"uca963992\" id=\"uca963992\">，在执行阶段也会暴露在 </span><code data-lake-id=\"u187a6d68\" id=\"u187a6d68\"><span data-lake-id=\"ubff90c3a\" id=\"ubff90c3a\">this.data</span></code><span data-lake-id=\"u5c03d522\" id=\"u5c03d522\"> 之下，并且可以用于在循环时，捕获和共享前面的信息。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22%2F%2F%20pitch%20%E7%9A%84%E6%8D%95%E8%8E%B7%E5%92%8C%E5%85%B1%E4%BA%AB%5Cnmodule.exports%20%3D%20function(content)%20%7B%5Cn%20%20return%20someSyncOperation(content%2C%20this.data.value)%5Cn%7D%5Cn%5Cnmodule.exports.pitch%20%3D%20function(remainingRequest%2C%20precedingRequest%2C%20data)%20%7B%5Cn%20%20data.value%20%3D%2042%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22pitch%20%E7%9A%84%E6%8D%95%E8%8E%B7%E5%92%8C%E5%85%B1%E4%BA%AB%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22kkGfg%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ud9fe6865\" id=\"ud9fe6865\"><span data-lake-id=\"u4a9b9e52\" id=\"u4a9b9e52\">其次，如果某个 </span><code data-lake-id=\"ued44c50f\" id=\"ued44c50f\"><span data-lake-id=\"uc06453a2\" id=\"uc06453a2\">loader</span></code><span data-lake-id=\"ucb3f7d92\" id=\"ucb3f7d92\"> 在 </span><code data-lake-id=\"u43d4d3b6\" id=\"u43d4d3b6\"><span data-lake-id=\"ufda09f70\" id=\"ufda09f70\">pitch</span></code><span data-lake-id=\"u0fb9c1ea\" id=\"u0fb9c1ea\"> 方法中给出一个结果，那么这个过程会回过身来，并跳过剩下的 </span><code data-lake-id=\"u1b825248\" id=\"u1b825248\"><span data-lake-id=\"u327bda1f\" id=\"u327bda1f\">loader</span></code><span data-lake-id=\"u210b231a\" id=\"u210b231a\">，在上面的例子中，如果 </span><code data-lake-id=\"ua868460e\" id=\"ua868460e\"><span data-lake-id=\"ue27cb310\" id=\"ue27cb310\">loader</span></code><span data-lake-id=\"u23e198e4\" id=\"u23e198e4\"> 的 </span><code data-lake-id=\"uc1586d46\" id=\"uc1586d46\"><span data-lake-id=\"u9104e214\" id=\"u9104e214\">pitch</span></code><span data-lake-id=\"ub88a6688\" id=\"ub88a6688\"> 方法返回了一些东西：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22module.exports%20%3D%20function(content)%20%7B%5Cn%20%20return%20someSyncOperation(content)%5Cn%7D%5Cn%5Cnmodule.exports.pitch%20%3D%20function(remainingRequest%2C%20precedingRequest%2C%20data)%20%7B%5Cn%20%20if%20(someCondition())%20%7B%5Cn%20%20%20%20return%20%60module.exports%20%3D%20require(%24%7BJSON.stringify(%60-!%24%7BremainingRequest%7D%60)%7D)%60%5Cn%20%20%7D%5Cn%7D%5Cn%5Cn%2F%2F%20%E4%B8%8A%E9%9D%A2%E7%9A%84%E6%AD%A5%E9%AA%A4%E5%B0%86%E8%A2%AB%E7%BC%A9%E7%9F%AD%E4%B8%BA%5Cn%7C-%20a-loader%20%60pitch%60%5Cn%20%20%7C-%20b-loader%20%60pitch%60%20returns%20a%20module%5Cn%7C-%20a-loader%20normal%20execution%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22pA7g3%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"lyy5O\" id=\"lyy5O\"><span data-lake-id=\"u9650ac70\" id=\"u9650ac70\">同步 loader</span></h4><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22%2F%2F%20%E5%8D%95%E4%B8%AA%E7%BB%93%E6%9E%9C%5Cnmodule.exports%20%3D%20function(content%2C%20sourceMap%2C%20meta)%20%7B%5Cn%20%20return%20someSyncOperation(content)%5Cn%7D%5Cn%5Cn%2F%2F%20%E5%A4%9A%E4%B8%AA%20loader%5Cnmodule.exports%20%3D%20function(content%2C%20sourceMap%2C%20meta)%20%7B%5Cn%20%20this.callback(null%2C%20someSyncOperation(content)%2C%20sourceMap%2C%20meta)%5Cn%20%20return%20%2F%2F%20%E5%BD%93%E8%B0%83%E7%94%A8%20callback()%20%E6%97%B6%E6%80%BB%E6%98%AF%E8%BF%94%E5%9B%9E%20undefined%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%E5%90%8C%E6%AD%A5%20loader%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22gT7az%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"VaBOQ\" id=\"VaBOQ\"><span data-lake-id=\"uab947b29\" id=\"uab947b29\">异步 loader</span></h4><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22%2F%2F%20%E5%8D%95%E4%B8%AA%E7%BB%93%E6%9E%9C%5Cnmodule.exports%20%3D%20function(content%2C%20sourceMap%2C%20meta)%20%7B%5Cn%20%20var%20callback%20%3D%20this.async()%5Cn%20%20someAsyncOperation(content%2C%20function(err%2C%20result)%20%7B%5Cn%20%20%20%20if%20(err)%20return%20callback(err)%5Cn%20%20%20%20callback(null%2C%20result%2C%20sourceMap%2C%20meta)%5Cn%20%20%7D)%5Cn%7D%5Cn%5Cn%2F%2F%20%E5%A4%9A%E4%B8%AA%E7%BB%93%E6%9E%9C%5Cnmodule.exports%20%3D%20function(content%2C%20sourceMap%2C%20meta)%20%7B%5Cn%20%20var%20callback%20%3D%20this.async()%5Cn%20%20someAsyncOperation(content%2C%20function(err%2C%20result%2C%20sourceMap%2C%20meta)%20%7B%5Cn%20%20%20%20if%20(err)%20return%20callback(err)%5Cn%20%20%20%20callback(null%2C%20result%2C%20sourceMap%2C%20meta)%5Cn%20%20%7D)%5Cn%7D%20%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%E5%BC%82%E6%AD%A5%20loader%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22JXkvK%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"vHMjM\" id=\"vHMjM\"><span data-lake-id=\"ued47b97c\" id=\"ued47b97c\">案例</span></h3><h3 data-lake-id=\"ayqbZ\" id=\"ayqbZ\"><span data-lake-id=\"u022a88e6\" id=\"u022a88e6\">mini 版 style-loader</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22module.exports%20%3D%20function(source)%20%7B%5Cn%20%20return%20%60%5Cn%20%20%20%20const%20styleTag%20%3D%20document.createElement('style')%3B%5Cn%20%20%20%20styleTag.innerHTML%20%3D%20%24%7Bsource%7D%3B%5Cn%20%20%20%20document.head.appendChild(styleTag)%3B%5Cn%20%20%60%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22mfF7v%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"IhnZi\" id=\"IhnZi\"><span data-lake-id=\"u16782242\" id=\"u16782242\">mini 版 css-loader</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22module.exports%20%3D%20function(source)%20%7B%5Cn%20%20return%20JSON.stringify(source)%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22RRbQ9%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"Z1eP9\" id=\"Z1eP9\"><span data-lake-id=\"u7f4ada46\" id=\"u7f4ada46\">mini 版 less-loader</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22const%20less%20%3D%20require('less')%5Cnmodule.exports%20%3D%20function(source)%20%7B%5Cn%20%20less.render(source%2C%20(err%2C%20input)%20%3D%3E%20%7B%5Cn%20%20%20%20let%20%7B%20css%20%7D%20%3D%20output%3B%5Cn%20%20%20%20this.callback(err%2C%20css)%3B%5Cn%20%20%7D)%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22pdrI1%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"g6BEx\" id=\"g6BEx\"><span data-lake-id=\"u38a9661d\" id=\"u38a9661d\">编写一个 markdown-loader 实践</span></h3><ul list=\"u14e0ce69\"><li fid=\"u43965686\" data-lake-id=\"ue6c521d5\" id=\"ue6c521d5\"><code data-lake-id=\"u605737b0\" id=\"u605737b0\"><span data-lake-id=\"u2fc1d3fe\" id=\"u2fc1d3fe\">markdown</span></code><span data-lake-id=\"ua46f8a6f\" id=\"ua46f8a6f\">相关功能模块</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22%2F%2F%20md.js%5Cnconst%20MarkdownIt%20%3D%20require(%5C%22markdown-it%5C%22)%5Cn%5Cn%2F%2F%20%E5%86%85%E7%BD%AE%E6%8F%92%E4%BB%B6%E5%88%97%E8%A1%A8%5Cnconst%20MarkdownItPluginsList%20%3D%20%5B%5Cn%20%20'markdown-it-sup'%2C%5Cn%20%20'markdown-it-sub'%2C%5Cn%20%20'markdown-it-mark'%2C%5Cn%20%20'markdown-it-kbd'%2C%5Cn%20%20'markdown-it-kbd'%2C%5Cn%20%20'markdown-it-underline'%2C%5Cn%20%20'markdown-it-deflist'%2C%5Cn%20%20'markdown-it-checkbox'%2C%5Cn%20%20'markdown-it-emoji'%2C%5Cn%20%20'markdown-it-task-checkbox'%2C%5Cn%20%20'markdown-it-container'%2C%5Cn%20%20'markdown-it-anchor'%2C%5Cn%20%20'markdown-it-table-of-contents'%2C%5Cn%20%20'markdown-it-footnote'%2C%5Cn%20%20'markdown-it-imsize'%2C%5Cn%20%20'markdown-it-implicit-figures'%2C%5Cn%20%20'markdown-it-attrs'%2C%5Cn%20%20'markdown-it-math'%2C%5Cn%20%20'markdown-it-plantuml'%2C%5Cn%20%20'markdown-it-ins'%2C%5Cn%20%20'markdown-it-abbr'%2C%5Cn%20%20'markdown-it-smartarrows'%5Cn%5D%5Cn%5Cn%2F%2F%20%E9%BB%98%E8%AE%A4%20markdown%20%E9%85%8D%E7%BD%AE%5Cnconst%20DEFAULT_MARKDOWN_OPTIONS%20%3D%20%7B%5Cn%20%20html%3A%20false%2C%5Cn%20%20xhtmlOut%3A%20false%2C%5Cn%20%20breaks%3A%20false%2C%5Cn%20%20langPrefix%3A%20''%2C%5Cn%20%20linkify%3A%20false%2C%5Cn%20%20typographer%3A%20false%2C%5Cn%20%20quotes%3A%20'%E2%80%9C%E2%80%9D%E2%80%98%E2%80%99'%2C%5Cn%20%20highlight%3A%20null%2C%5Cn%20%20plugins%3A%20%5B%5D%2C%5Cn%20%20disable%3A%20%5B%5D%2C%5Cn%7D%5Cn%5Cnconst%20createMd%20%3D%20(options%20%3D%20%7B%7D)%20%3D%3E%20%7B%5Cn%20%20const%20finalOptions%20%3D%20Object.assign(%7B%7D%2C%20DEFAULT_MARKDOWN_OPTIONS%2C%20options)%5Cn%20%20const%20%7B%20plugins%2C%20disable%20%7D%20%3D%20finalOptions%5Cn%20%20%5Cn%20%20delete%20finalOptions.plugins%5Cn%20%20delete%20finalOptions.disable%5Cn%20%20delete%20finalOptions.enable%5Cn%20%20%5Cn%20%20const%20md%20%3D%20new%20MarkdownIt(finalOptions)%5Cn%20%20%2F%2F%20%E5%90%AF%E5%8A%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%92%E4%BB%B6%5Cn%20%20plugins.forEach(plugName%20%3D%3E%20%7B%5Cn%20%20%20%20if%20(MarkdownItPluginsList.includes(plugName))%20return%5Cn%20%20%20%20MarkdownItPluginsList.push(plugName)%5Cn%20%20%7D)%5Cn%20%20%5Cn%20%20MarkdownItPluginList.forEach(plugName%20%3D%3E%20%7B%5Cn%20%20%20%20const%20plug%20%3D%20require(plugName)%5Cn%20%20%20%20md.use(plug)%5Cn%20%20%7D)%5Cn%20%20%5Cn%20%20%2F%2F%20%E6%89%BE%E4%B8%8D%E5%88%B0%E4%B8%8D%E4%BC%9A%E6%8A%A5%E9%94%99%5Cn%20%20md.disable(disable%2C%20true)%5Cn%20%20return%20md%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ix8r0%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"uddbf28d4\"><li fid=\"u004a234c\" data-lake-id=\"u59035afb\" id=\"u59035afb\"><code data-lake-id=\"u98c3379d\" id=\"u98c3379d\"><span data-lake-id=\"ue15fc0bf\" id=\"ue15fc0bf\">loader</span></code><span data-lake-id=\"u8e4be6f2\" id=\"u8e4be6f2\">功能模块</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22const%20%7B%20getOptions%20%7D%20%3D%20require(%5C%22loader-utils%5C%22)%5Cnconst%20validateOptions%20%3D%20require(%5C%22schema-utils%5C%22)%5Cnconst%20createMd%20%3D%20require(%5C%22.%2Fmd%5C%22)%5Cn%5Cn%2F%2F%20options%20%E6%A0%A1%E9%AA%8C%5Cnconst%20MarkdownLoaderOptionsSchema%20%3D%20%7B%5Cn%20%20type%3A%20'object'%2C%5Cn%20%20properties%3A%20%7B%5Cn%20%20%20%20html%3A%20%7B%20type%3A%20'boolean'%20%7D%2C%5Cn%20%20%20%20xhtmlOut%3A%20%7B%20type%3A%20'boolean'%20%7D%2C%5Cn%20%20%20%20breaks%3A%20%7B%20type%3A%20'boolean'%20%7D%2C%5Cn%20%20%20%20langPrefix%3A%20%7B%20type%3A%20'string'%20%7D%2C%5Cn%20%20%20%20linkify%3A%20%7B%20type%3A%20'boolean'%20%7D%2C%5Cn%20%20%20%20typographer%3A%20%7B%20type%3A%20'boolean'%20%7D%2C%5Cn%20%20%20%20quotes%3A%20%7B%5Cn%20%20%20%20%20%20anyOf%3A%20%5B%7B%20type%3A%20'string'%20%7D%2C%20%7B%20type%3A%20'array'%2C%20items%3A%20%7B%20type%3A%20'string'%20%7D%20%7D%5D%2C%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20highlight%3A%20%7B%20instanceof%3A%20'Function'%20%7D%2C%5Cn%20%20%20%20plugins%3A%20%7B%20type%3A%20'array'%2C%20items%3A%20%7B%20type%3A%20'string'%20%7D%20%7D%2C%5Cn%20%20%20%20disable%3A%20%7B%20type%3A%20'array'%2C%20items%3A%20%7B%20type%3A%20'string'%20%7D%20%7D%2C%5Cn%20%20%7D%2C%5Cn%20%20additionalProperties%3A%20false%5Cn%7D%5Cn%5Cnmodule.exports%20%3D%20function(source)%20%7B%5Cn%20%20this.cacheable()%5Cn%20%20const%20options%20%3D%20getOptions(this)%5Cn%20%20validateOptions(MarkdownLoaderOptionsSchema%2C%20options%2C%20%7B%5Cn%20%20%20%20name%3A%20'MarkdownLoader'%2C%5Cn%20%20%20%20baseDataPath%3A%20'options'%5Cn%20%20%7D)%5Cn%20%20const%20md%20%3D%20createMd(options)%5Cn%20%20return%20md.render(source)%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Lri3h%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"u0222869f\"><li fid=\"u721db9b9\" data-lake-id=\"u3dfa18c0\" id=\"u3dfa18c0\"><code data-lake-id=\"uc29914d5\" id=\"uc29914d5\"><span data-lake-id=\"u233185e9\" id=\"u233185e9\">webpack.config.js</span></code></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22const%20path%20%3D%20require(%5C%22path%5C%22)%5Cn%5Cnmodule.exports%20%3D%20%7B%5Cn%20%20mode%3A%20%5C%22development%5C%22%2C%5Cn%20%20entry%3A%20%5C%22.%2Fsrc%2Findex.js%5C%22%2C%5Cn%20%20output%3A%20%7B%5Cn%20%20%20%20filename%3A%20%5C%22main.js%5C%22%2C%5Cn%20%20%20%20path%3A%20path.resolve(__dirname%2C%20%5C%22dist%5C%22)%5Cn%20%20%7D%2C%5Cn%20%20module%3A%20%7B%5Cn%20%20%20%20rules%3A%20%5B%5Cn%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20test%3A%20%2F.md%24%2F%2C%5Cn%20%20%20%20%20%20%20%20use%3A%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%7B%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20loader%3A%20%5C%22.%2Fmarkdown-webpack-loader%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20html%3A%20true%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20plugins%3A%20%5B%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20disable%3A%20%5B%5D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%5D%5Cn%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22tF8lo%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u0cf7a4d5\" id=\"u0cf7a4d5\"><span data-lake-id=\"uf0be8eb4\" id=\"uf0be8eb4\">该</span><code data-lake-id=\"u3ac6ea3e\" id=\"u3ac6ea3e\"><span data-lake-id=\"ua36db6c6\" id=\"ua36db6c6\">markdown-webpack-loader</span></code><span data-lake-id=\"u36b5c34f\" id=\"u36b5c34f\">的</span><code data-lake-id=\"u265aaa88\" id=\"u265aaa88\"><span data-lake-id=\"u32cd483b\" id=\"u32cd483b\">options</span></code><span data-lake-id=\"u191e2512\" id=\"u191e2512\">除了支持所有的</span><code data-lake-id=\"u74967d41\" id=\"u74967d41\"><span data-lake-id=\"uc2ee306c\" id=\"uc2ee306c\">markdown-it</span></code><span data-lake-id=\"u739ab688\" id=\"u739ab688\">初始化参数外，还额外支持</span><code data-lake-id=\"u0d0ee143\" id=\"u0d0ee143\"><span data-lake-id=\"u832f5588\" id=\"u832f5588\">plugins</span></code><span data-lake-id=\"u770a2dbb\" id=\"u770a2dbb\">，添加额外本地插件，以及</span><code data-lake-id=\"uc449e769\" id=\"uc449e769\"><span data-lake-id=\"u3d035330\" id=\"u3d035330\">disable</span></code><span data-lake-id=\"u9af698d8\" id=\"u9af698d8\">，禁用某些插件功能</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22qGUbq%22%7D\"></card><h2 data-lake-id=\"bquBs\" id=\"bquBs\"><span data-lake-id=\"u7a6916bc\" id=\"u7a6916bc\">plugin</span></h2><ul list=\"u0a95de0c\"><li fid=\"u98a3b41f\" data-lake-id=\"u0acc9568\" id=\"u0acc9568\"><strong><span data-lake-id=\"u94eb521a\" id=\"u94eb521a\">原理</span></strong><span data-lake-id=\"u4462ecd3\" id=\"u4462ecd3\">：</span><code data-lake-id=\"uc7d3a3de\" id=\"uc7d3a3de\"><span data-lake-id=\"u72febd7b\" id=\"u72febd7b\">plugin</span></code><span data-lake-id=\"u4ea21eea\" id=\"u4ea21eea\"> 就是插件，基于事件流框架 </span><code data-lake-id=\"u43770caf\" id=\"u43770caf\"><span data-lake-id=\"u859f9a8e\" id=\"u859f9a8e\">tapable</span></code><span data-lake-id=\"u40b9fb8e\" id=\"u40b9fb8e\">，插件可以扩展 </span><code data-lake-id=\"u0ec0db60\" id=\"u0ec0db60\"><span data-lake-id=\"uac0972fe\" id=\"uac0972fe\">webpack</span></code><span data-lake-id=\"u723b4c9f\" id=\"u723b4c9f\"> 的功能，在 </span><code data-lake-id=\"u143525ae\" id=\"u143525ae\"><span data-lake-id=\"u7e504afa\" id=\"u7e504afa\">webpack</span></code><span data-lake-id=\"ue5456944\" id=\"ue5456944\"> 运行的生命周期中会广播出许多事件，</span><code data-lake-id=\"ue4d9202f\" id=\"ue4d9202f\"><span data-lake-id=\"ud911f643\" id=\"ud911f643\">plugin</span></code><span data-lake-id=\"ue5933973\" id=\"ue5933973\"> 可以监听这些事件，在合适的时机通过 </span><code data-lake-id=\"u723232f8\" id=\"u723232f8\"><span data-lake-id=\"u10b51af8\" id=\"u10b51af8\">webpack</span></code><span data-lake-id=\"u0e34ed73\" id=\"u0e34ed73\"> 提供的 API 改变输出结果</span></li><li fid=\"u98a3b41f\" data-lake-id=\"u3b89388c\" id=\"u3b89388c\"><strong><span data-lake-id=\"u9711488d\" id=\"u9711488d\">组成</span></strong><span data-lake-id=\"uab199330\" id=\"uab199330\">：</span></li></ul><ul list=\"u0a95de0c\" data-lake-indent=\"1\"><li fid=\"u98a3b41f\" data-lake-id=\"u0702ce3d\" id=\"u0702ce3d\"><span data-lake-id=\"u6e3cd7e4\" id=\"u6e3cd7e4\">一个 </span><code data-lake-id=\"u84463f28\" id=\"u84463f28\"><span data-lake-id=\"uaf4cc20c\" id=\"uaf4cc20c\">javaScript</span></code><span data-lake-id=\"uaaf6e3ed\" id=\"uaaf6e3ed\"> 命名函数或 </span><code data-lake-id=\"u21ce67e9\" id=\"u21ce67e9\"><span data-lake-id=\"u51dd05b1\" id=\"u51dd05b1\">javaScript</span></code><span data-lake-id=\"uaea137e7\" id=\"uaea137e7\"> 类</span></li><li fid=\"u98a3b41f\" data-lake-id=\"uc27a8303\" id=\"uc27a8303\"><span data-lake-id=\"ucc8154c8\" id=\"ucc8154c8\">在插件函数的 </span><code data-lake-id=\"ubb3fefcf\" id=\"ubb3fefcf\"><span data-lake-id=\"u9569e26d\" id=\"u9569e26d\">prototype</span></code><span data-lake-id=\"uc4aa117c\" id=\"uc4aa117c\">(原型) 上定义一个 </span><code data-lake-id=\"ub3aaa149\" id=\"ub3aaa149\"><span data-lake-id=\"ue1d3225e\" id=\"ue1d3225e\">apply</span></code><span data-lake-id=\"ued2b737e\" id=\"ued2b737e\"> 方法</span></li><li fid=\"u98a3b41f\" data-lake-id=\"uda96cab3\" id=\"uda96cab3\"><span data-lake-id=\"u4d73b667\" id=\"u4d73b667\">指定一个绑定到 </span><code data-lake-id=\"ub2ad5017\" id=\"ub2ad5017\"><span data-lake-id=\"uf2aaf23b\" id=\"uf2aaf23b\">webpack</span></code><span data-lake-id=\"ufc60040b\" id=\"ufc60040b\"> 自身的事件钩子(</span><code data-lake-id=\"ufc683f3c\" id=\"ufc683f3c\"><span data-lake-id=\"u813923fe\" id=\"u813923fe\">hook</span></code><span data-lake-id=\"u71d8acc1\" id=\"u71d8acc1\">)</span></li><li fid=\"u98a3b41f\" data-lake-id=\"u98fea7dd\" id=\"u98fea7dd\"><span data-lake-id=\"uc0e404ef\" id=\"uc0e404ef\">处理 </span><code data-lake-id=\"ub4dd6523\" id=\"ub4dd6523\"><span data-lake-id=\"u977bec5b\" id=\"u977bec5b\">webpack</span></code><span data-lake-id=\"u7d8575f3\" id=\"u7d8575f3\"> 内部实例的特定数据</span></li><li fid=\"u98a3b41f\" data-lake-id=\"u6d1c9d0f\" id=\"u6d1c9d0f\"><span data-lake-id=\"u6f57c1d7\" id=\"u6f57c1d7\">功能完成后调用 </span><code data-lake-id=\"u43294650\" id=\"u43294650\"><span data-lake-id=\"ue39fecf4\" id=\"ue39fecf4\">webpack</span></code><span data-lake-id=\"uee61c97f\" id=\"uee61c97f\"> 提供的回调(</span><code data-lake-id=\"u113ae3ac\" id=\"u113ae3ac\"><span data-lake-id=\"uca666e87\" id=\"uca666e87\">callback</span></code><span data-lake-id=\"u1a157cf7\" id=\"u1a157cf7\">)</span></li></ul><ul list=\"u0a95de0c\" start=\"3\"><li fid=\"u98a3b41f\" data-lake-id=\"u7c07c9ac\" id=\"u7c07c9ac\"><strong><span data-lake-id=\"u669e2470\" id=\"u669e2470\">概念</span></strong><span data-lake-id=\"u4b37e7d6\" id=\"u4b37e7d6\">：</span><code data-lake-id=\"u1cd3c639\" id=\"u1cd3c639\"><span data-lake-id=\"ue34257ea\" id=\"ue34257ea\">webpack plugin</span></code><span data-lake-id=\"u8a3d59fd\" id=\"u8a3d59fd\"> 是一个具有 </span><code data-lake-id=\"u6f946603\" id=\"u6f946603\"><span data-lake-id=\"u9cd0d874\" id=\"u9cd0d874\">apply</span></code><span data-lake-id=\"u63babbc5\" id=\"u63babbc5\"> 属性的 </span><code data-lake-id=\"uc8837c12\" id=\"uc8837c12\"><span data-lake-id=\"u2ee0e8e5\" id=\"u2ee0e8e5\">javaScript</span></code><span data-lake-id=\"u2223e4d4\" id=\"u2223e4d4\"> 对象。</span><code data-lake-id=\"u19193f2e\" id=\"u19193f2e\"><span data-lake-id=\"u7657b092\" id=\"u7657b092\">apply</span></code><span data-lake-id=\"ud4aecee6\" id=\"ud4aecee6\"> 属性会被 </span><code data-lake-id=\"u4c30e211\" id=\"u4c30e211\"><span data-lake-id=\"udab66ef5\" id=\"udab66ef5\">webpack compiler</span></code><span data-lake-id=\"uadda4400\" id=\"uadda4400\"> 调用，并且 </span><code data-lake-id=\"ue75571e1\" id=\"ue75571e1\"><span data-lake-id=\"u7aca5eae\" id=\"u7aca5eae\">compiler</span></code><span data-lake-id=\"uc187ee5b\" id=\"uc187ee5b\"> 对象可能在整个编译生命周期内访问。</span><code data-lake-id=\"u12228c0e\" id=\"u12228c0e\"><span data-lake-id=\"u4204207a\" id=\"u4204207a\">compilation</span></code><span data-lake-id=\"u0213816a\" id=\"u0213816a\"> 模块会被 </span><code data-lake-id=\"u03982924\" id=\"u03982924\"><span data-lake-id=\"ud316542f\" id=\"ud316542f\">compiler</span></code><span data-lake-id=\"u7131bf9e\" id=\"u7131bf9e\"> 用来创建新的 </span><code data-lake-id=\"uf1551d2d\" id=\"uf1551d2d\"><span data-lake-id=\"u9b07b459\" id=\"u9b07b459\">compilation</span></code><span data-lake-id=\"ub1904936\" id=\"ub1904936\"> 对象(或新的 </span><code data-lake-id=\"u87c22a81\" id=\"u87c22a81\"><span data-lake-id=\"u6441fed1\" id=\"u6441fed1\">build</span></code><span data-lake-id=\"u587bd720\" id=\"u587bd720\"> 对象)。</span><code data-lake-id=\"u7137107c\" id=\"u7137107c\"><span data-lake-id=\"u0d3666f6\" id=\"u0d3666f6\">compilation</span></code><span data-lake-id=\"u8bc108b3\" id=\"u8bc108b3\"> 实例能够访问所有的模块和它们的依赖(大部分是循环依赖)。它会对应用程序依赖图中的所有模块，进行字面上的编译(</span><code data-lake-id=\"u2e722c0c\" id=\"u2e722c0c\"><span data-lake-id=\"u1f01d229\" id=\"u1f01d229\">literal compilation</span></code><span data-lake-id=\"uaa946182\" id=\"uaa946182\">)。在编译阶段，模块会被加、封存、优化、分块、哈希和重新创建(</span><code data-lake-id=\"u5c5b6a20\" id=\"u5c5b6a20\"><span data-lake-id=\"u7b059136\" id=\"u7b059136\">load</span></code><span data-lake-id=\"uaa64c14a\" id=\"uaa64c14a\">、</span><code data-lake-id=\"u5578e291\" id=\"u5578e291\"><span data-lake-id=\"u3799c192\" id=\"u3799c192\">seal</span></code><span data-lake-id=\"u437f2878\" id=\"u437f2878\">、</span><code data-lake-id=\"ua517f43e\" id=\"ua517f43e\"><span data-lake-id=\"u5bfc4c8b\" id=\"u5bfc4c8b\">optimize</span></code><span data-lake-id=\"ue3f79ccf\" id=\"ue3f79ccf\">、</span><code data-lake-id=\"u699e0c25\" id=\"u699e0c25\"><span data-lake-id=\"u0e9a2f87\" id=\"u0e9a2f87\">chunk</span></code><span data-lake-id=\"ufd785b63\" id=\"ufd785b63\">、</span><code data-lake-id=\"u99ba0ea0\" id=\"u99ba0ea0\"><span data-lake-id=\"uc736c60b\" id=\"uc736c60b\">hash</span></code><span data-lake-id=\"ua655e775\" id=\"ua655e775\">、</span><code data-lake-id=\"u405804d2\" id=\"u405804d2\"><span data-lake-id=\"ucb1f9f84\" id=\"ucb1f9f84\">restore</span></code><span data-lake-id=\"u59cd267e\" id=\"u59cd267e\">)</span></li></ul><ul list=\"u0a95de0c\" data-lake-indent=\"1\"><li fid=\"u98a3b41f\" data-lake-id=\"u7ab1664d\" id=\"u7ab1664d\"><card type=\"inline\" name=\"label\" value=\"data:%7B%22label%22%3A%22%E5%85%A8%E5%B1%80%E5%94%AF%E4%B8%80%22%2C%22colorIndex%22%3A5%2C%22id%22%3A%22f4hE3%22%7D\"></card><code data-lake-id=\"u14636a89\" id=\"u14636a89\"><span data-lake-id=\"u188b661e\" id=\"u188b661e\">compiler</span></code><span data-lake-id=\"ud14a7a79\" id=\"ud14a7a79\"> 实例：包含了 </span><code data-lake-id=\"u295e3fed\" id=\"u295e3fed\"><span data-lake-id=\"u31ce0dd2\" id=\"u31ce0dd2\">webpack</span></code><span data-lake-id=\"ud953ff0e\" id=\"ud953ff0e\"> 环境的所有配置信息，包含 </span><code data-lake-id=\"ua8f9b6d4\" id=\"ua8f9b6d4\"><span data-lake-id=\"u6613b6fa\" id=\"u6613b6fa\">options</span></code><span data-lake-id=\"ub4e28284\" id=\"ub4e28284\">、</span><code data-lake-id=\"u01573343\" id=\"u01573343\"><span data-lake-id=\"u850bb3b0\" id=\"u850bb3b0\">loaders</span></code><span data-lake-id=\"ue0e52a05\" id=\"ue0e52a05\">、</span><code data-lake-id=\"u12fb5e3c\" id=\"u12fb5e3c\"><span data-lake-id=\"ud8983eda\" id=\"ud8983eda\">plugins</span></code><span data-lake-id=\"ua311cb61\" id=\"ua311cb61\">，在 </span><code data-lake-id=\"u56a19c8e\" id=\"u56a19c8e\"><span data-lake-id=\"u5824af33\" id=\"u5824af33\">webpack</span></code><span data-lake-id=\"uf929c48e\" id=\"uf929c48e\"> 启动时实例化，也可以理解为 </span><code data-lake-id=\"uc8e99d6e\" id=\"uc8e99d6e\"><span data-lake-id=\"u1eb2faac\" id=\"u1eb2faac\">webpack</span></code><span data-lake-id=\"u6e96e3f3\" id=\"u6e96e3f3\"> 的实例。</span><code data-lake-id=\"u24ad5f8c\" id=\"u24ad5f8c\"><span data-lake-id=\"ud668ed9c\" id=\"ud668ed9c\">compiler</span></code><span data-lake-id=\"uc9e164a5\" id=\"uc9e164a5\"> 模块是 </span><code data-lake-id=\"ua149b13a\" id=\"ua149b13a\"><span data-lake-id=\"u7899e47a\" id=\"u7899e47a\">webpack</span></code><span data-lake-id=\"u4b3874ac\" id=\"u4b3874ac\"> 的支柱引擎，它通过 </span><code data-lake-id=\"uf1b5d906\" id=\"uf1b5d906\"><span data-lake-id=\"ua49b2664\" id=\"ua49b2664\">cli</span></code><span data-lake-id=\"ua80d6c97\" id=\"ua80d6c97\"> 或 </span><code data-lake-id=\"u5bf86a17\" id=\"u5bf86a17\"><span data-lake-id=\"u87f34ba1\" id=\"u87f34ba1\">node api</span></code><span data-lake-id=\"u3a2b9cbe\" id=\"u3a2b9cbe\"> 传递所有选项，创建出一个 </span><code data-lake-id=\"u2533b10e\" id=\"u2533b10e\"><span data-lake-id=\"uf8c78bae\" id=\"uf8c78bae\">compilation</span></code><span data-lake-id=\"u23d0c903\" id=\"u23d0c903\"> 实例。它扩展(</span><code data-lake-id=\"u795941cc\" id=\"u795941cc\"><span data-lake-id=\"uba0a1e67\" id=\"uba0a1e67\">extend</span></code><span data-lake-id=\"u3174567b\" id=\"u3174567b\">)自 </span><code data-lake-id=\"ubac6d644\" id=\"ubac6d644\"><span data-lake-id=\"uf1c8282a\" id=\"uf1c8282a\">tapable</span></code><span data-lake-id=\"u51860cf1\" id=\"u51860cf1\"> 类，以便于注册和调用插件。</span></li><li fid=\"u98a3b41f\" data-lake-id=\"u746b777a\" id=\"u746b777a\"><code data-lake-id=\"ue483576b\" id=\"ue483576b\"><span data-lake-id=\"uc88c5952\" id=\"uc88c5952\">compilation</span></code><span data-lake-id=\"ufedeef7a\" id=\"ufedeef7a\"> 钩子：包含当前模块资源，编译生成资源，</span><code data-lake-id=\"uab97b7ea\" id=\"uab97b7ea\"><span data-lake-id=\"udf868050\" id=\"udf868050\">webpack</span></code><span data-lake-id=\"u47fc168e\" id=\"u47fc168e\"> 在开发模式下运行的时候，每当监测到一个文件变化，就会创建一次新的 </span><code data-lake-id=\"ua273031a\" id=\"ua273031a\"><span data-lake-id=\"u1766c1b8\" id=\"u1766c1b8\">compilation</span></code><span data-lake-id=\"ude5928c5\" id=\"ude5928c5\">。</span></li></ul><ul list=\"u0a95de0c\" start=\"4\"><li fid=\"u98a3b41f\" data-lake-id=\"u02b36ef5\" id=\"u02b36ef5\"><strong><span data-lake-id=\"ub81e80bc\" id=\"ub81e80bc\">执行顺序</span></strong><span data-lake-id=\"ua16723af\" id=\"ua16723af\">：按照编译顺序执行</span></li></ul><ul list=\"ud08c5e10\"><li fid=\"u7b963219\" data-lake-id=\"u04292b8b\" id=\"u04292b8b\"><strong><span data-lake-id=\"ub9f5dc00\" id=\"ub9f5dc00\">配置</span></strong><span data-lake-id=\"ud313e0fe\" id=\"ud313e0fe\">：</span><code data-lake-id=\"u4aaa3735\" id=\"u4aaa3735\"><span data-lake-id=\"u0f645c48\" id=\"u0f645c48\">plugin</span></code><span data-lake-id=\"u576d7b51\" id=\"u576d7b51\"> 在 </span><code data-lake-id=\"u245e88a7\" id=\"u245e88a7\"><span data-lake-id=\"u507a260a\" id=\"u507a260a\">plugins</span></code><span data-lake-id=\"u3bf3018d\" id=\"u3bf3018d\"> 中单独配置，类型为数组，每一项都是一个 </span><code data-lake-id=\"ub476f389\" id=\"ub476f389\"><span data-lake-id=\"u23e8c71e\" id=\"u23e8c71e\">plugin</span></code><span data-lake-id=\"u92e71334\" id=\"u92e71334\"> 实例，参数都通过构造函数传入</span></li></ul><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22jcraS%22%7D\"></card><h3 data-lake-id=\"OoObb\" id=\"OoObb\"><span data-lake-id=\"ua7abaa39\" id=\"ua7abaa39\">常用 plugin</span></h3><ul list=\"u362aef9a\"><li fid=\"u7d54eb25\" data-lake-id=\"uca318fc4\" id=\"uca318fc4\"><code data-lake-id=\"u37499efa\" id=\"u37499efa\"><span data-lake-id=\"u60b54443\" id=\"u60b54443\">webpack-bar</span></code><span data-lake-id=\"ucf16a211\" id=\"ucf16a211\">：自定义构建进度条</span></li><li fid=\"u7d54eb25\" data-lake-id=\"u81e9cc2f\" id=\"u81e9cc2f\"><code data-lake-id=\"u0bc58e15\" id=\"u0bc58e15\"><span data-lake-id=\"uc8e835d1\" id=\"uc8e835d1\">html-webpack-plugin</span></code><span data-lake-id=\"u6074ed65\" id=\"u6074ed65\">：可根据模版自动生成 </span><code data-lake-id=\"uf255ae3f\" id=\"uf255ae3f\"><span data-lake-id=\"u41e7d1f9\" id=\"u41e7d1f9\">html</span></code><span data-lake-id=\"ud7f25d9a\" id=\"ud7f25d9a\"> 代码，并自动引用 </span><code data-lake-id=\"ud2d4fb15\" id=\"ud2d4fb15\"><span data-lake-id=\"u38fd270d\" id=\"u38fd270d\">css</span></code><span data-lake-id=\"udf5c9a8d\" id=\"udf5c9a8d\"> 和 </span><code data-lake-id=\"u5644757f\" id=\"u5644757f\"><span data-lake-id=\"u56b2b989\" id=\"u56b2b989\">js</span></code><span data-lake-id=\"ueedaaa13\" id=\"ueedaaa13\"> 文件</span></li><li fid=\"u7d54eb25\" data-lake-id=\"u1e367587\" id=\"u1e367587\"><code data-lake-id=\"ua534a810\" id=\"ua534a810\"><span data-lake-id=\"ubd8007d4\" id=\"ubd8007d4\">mini-css-extract-plugin</span></code><span data-lake-id=\"u54750cf4\" id=\"u54750cf4\">：常用于 </span><code data-lake-id=\"u46003a2e\" id=\"u46003a2e\"><span data-lake-id=\"u079e171e\" id=\"u079e171e\">css</span></code><span data-lake-id=\"ua9375383\" id=\"ua9375383\">包分离</span></li><li fid=\"u7d54eb25\" data-lake-id=\"u48c685e9\" id=\"u48c685e9\"><span data-lake-id=\"u07c1a539\" id=\"u07c1a539\">压缩</span><code data-lake-id=\"u5a177d32\" id=\"u5a177d32\"><span data-lake-id=\"u55398b7e\" id=\"u55398b7e\">css</span></code><span data-lake-id=\"ud75b3b9b\" id=\"ud75b3b9b\">代码、重复</span><code data-lake-id=\"u27735a9b\" id=\"u27735a9b\"><span data-lake-id=\"ueb536a97\" id=\"ueb536a97\">css</span></code><span data-lake-id=\"udec912d1\" id=\"udec912d1\">代码去重复：</span></li></ul><ul list=\"u362aef9a\" data-lake-indent=\"1\"><li fid=\"u7d54eb25\" data-lake-id=\"u5bb8fba5\" id=\"u5bb8fba5\"><code data-lake-id=\"ud83fbe5e\" id=\"ud83fbe5e\"><span data-lake-id=\"u24814be4\" id=\"u24814be4\">optimize-css-assets-webpack-plugin</span></code><card type=\"inline\" name=\"label\" value=\"data:%7B%22label%22%3A%22webpack5%E4%B8%8D%E9%80%82%E7%94%A8%22%2C%22colorIndex%22%3A0%2C%22id%22%3A%22nS7Qt%22%7D\"></card></li><li fid=\"u7d54eb25\" data-lake-id=\"u79619c0e\" id=\"u79619c0e\"><code data-lake-id=\"ubaf9bbb2\" id=\"ubaf9bbb2\"><span data-lake-id=\"u1b405001\" id=\"u1b405001\">css-minimizer-webpack-plugin</span></code><card type=\"inline\" name=\"label\" value=\"data:%7B%22label%22%3A%22webpack5%E9%80%82%E7%94%A8%22%2C%22colorIndex%22%3A2%2C%22id%22%3A%22bFlQ4%22%7D\"></card></li></ul><ul list=\"u362aef9a\" start=\"5\"><li fid=\"u7d54eb25\" data-lake-id=\"ua2f96329\" id=\"ua2f96329\"><span data-lake-id=\"uda913cc1\" id=\"uda913cc1\">压缩</span><code data-lake-id=\"u84c1aff2\" id=\"u84c1aff2\"><span data-lake-id=\"u9f53286d\" id=\"u9f53286d\">js</span></code></li></ul><ul list=\"u362aef9a\" data-lake-indent=\"1\"><li fid=\"u7d54eb25\" data-lake-id=\"ud8167da9\" id=\"ud8167da9\"><code data-lake-id=\"ua0f5967f\" id=\"ua0f5967f\"><span data-lake-id=\"u05648d18\" id=\"u05648d18\">uglifyjs-webpack-plugin</span></code><card type=\"inline\" name=\"label\" value=\"data:%7B%22label%22%3A%22webpack5%E4%B8%8D%E9%80%82%E7%94%A8%22%2C%22colorIndex%22%3A0%2C%22id%22%3A%22fdOmo%22%7D\"></card><span data-lake-id=\"ubae29f8c\" id=\"ubae29f8c\">，同时使用</span><code data-lake-id=\"u112d7663\" id=\"u112d7663\"><span data-lake-id=\"ua95c268f\" id=\"ua95c268f\">thread-loader</span></code><span data-lake-id=\"u6f4353cb\" id=\"u6f4353cb\">来开启多进程并行压缩代码</span><card type=\"inline\" name=\"label\" value=\"data:%7B%22label%22%3A%22webpack5%E4%B8%8D%E9%80%82%E7%94%A8%22%2C%22colorIndex%22%3A0%2C%22id%22%3A%22riWjZ%22%7D\"></card></li><li fid=\"u7d54eb25\" data-lake-id=\"u03c7cc3e\" id=\"u03c7cc3e\"><code data-lake-id=\"u3cef31e6\" id=\"u3cef31e6\"><span data-lake-id=\"u65b39463\" id=\"u65b39463\">terser-webpack-plugin</span></code><card type=\"inline\" name=\"label\" value=\"data:%7B%22label%22%3A%22webpack5%E9%80%82%E7%94%A8%22%2C%22colorIndex%22%3A2%2C%22id%22%3A%22h3don%22%7D\"></card><code data-lake-id=\"u3a896bf8\" id=\"u3a896bf8\"><span data-lake-id=\"uc18b167d\" id=\"uc18b167d\">parallel: true</span></code><span data-lake-id=\"ucde58bdc\" id=\"ucde58bdc\"> 使用多进程并行压缩代码</span></li></ul><ul list=\"u362aef9a\" start=\"6\"><li fid=\"u7d54eb25\" data-lake-id=\"u28723f2b\" id=\"u28723f2b\"><span data-lake-id=\"u53b74a92\" id=\"u53b74a92\">在</span><code data-lake-id=\"u28af712e\" id=\"u28af712e\"><span data-lake-id=\"u6acaead7\" id=\"u6acaead7\">webpack v4</span></code><span data-lake-id=\"ubf6b5256\" id=\"ubf6b5256\">开始，使用</span><code data-lake-id=\"ub5b7ed14\" id=\"ub5b7ed14\"><span data-lake-id=\"u36f5c1aa\" id=\"u36f5c1aa\">optimization.splitChunks</span></code><span data-lake-id=\"u11ae243e\" id=\"u11ae243e\">替代 </span><code data-lake-id=\"uc28a1478\" id=\"uc28a1478\"><span data-lake-id=\"ub0421e09\" id=\"ub0421e09\">webpack.optimize.CommonsChunkPlugin</span></code><span data-lake-id=\"ubae31a45\" id=\"ubae31a45\">，用于代码分包 </span><code data-lake-id=\"ue9dcb78e\" id=\"ue9dcb78e\"><span data-lake-id=\"u64877b01\" id=\"u64877b01\">chunk</span></code><span data-lake-id=\"uc8dace9d\" id=\"uc8dace9d\">，公共资源拆分</span></li><li fid=\"u7d54eb25\" data-lake-id=\"uae1101d1\" id=\"uae1101d1\"><code data-lake-id=\"ua4086586\" id=\"ua4086586\"><span data-lake-id=\"u7c686e91\" id=\"u7c686e91\">clean-webpack-plugin</span></code><span data-lake-id=\"u7eaec149\" id=\"u7eaec149\">：使用此插件后，</span><code data-lake-id=\"uf80b54d2\" id=\"uf80b54d2\"><span data-lake-id=\"u0fbf0ccd\" id=\"u0fbf0ccd\">webpack</span></code><span data-lake-id=\"u36d8f583\" id=\"u36d8f583\">打包后的</span><code data-lake-id=\"uaf669925\" id=\"uaf669925\"><span data-lake-id=\"u5a5c4b17\" id=\"u5a5c4b17\">dist</span></code><span data-lake-id=\"u5660e42b\" id=\"u5660e42b\">目录中的所有文件将被删除一次</span></li><li fid=\"u7d54eb25\" data-lake-id=\"u653e5004\" id=\"u653e5004\"><code data-lake-id=\"uecc87139\" id=\"uecc87139\"><span data-lake-id=\"u219df9a5\" id=\"u219df9a5\">webpack-bundle-analyzer</span></code><span data-lake-id=\"ube0d2ff2\" id=\"ube0d2ff2\">：可视化分析包体积大小</span></li><li fid=\"u7d54eb25\" data-lake-id=\"ubb4ab507\" id=\"ubb4ab507\"><code data-lake-id=\"u2301f890\" id=\"u2301f890\"><span data-lake-id=\"ua9f98ac9\" id=\"ua9f98ac9\">webpack-dev-server</span></code><span data-lake-id=\"u03e3796f\" id=\"u03e3796f\">：使用 </span><code data-lake-id=\"uc3e15ee3\" id=\"uc3e15ee3\"><span data-lake-id=\"u27abbe3a\" id=\"u27abbe3a\">webpack</span></code><span data-lake-id=\"uae9d1294\" id=\"uae9d1294\"> 和提供实时重载的开发服务器</span></li><li fid=\"u7d54eb25\" data-lake-id=\"ue4321edb\" id=\"ue4321edb\"><code data-lake-id=\"u3b5da10e\" id=\"u3b5da10e\"><span data-lake-id=\"ud05582c8\" id=\"ud05582c8\">webpack-merge</span></code><span data-lake-id=\"u485fba45\" id=\"u485fba45\">：提取公共配置，减少重复配置代码</span></li><li fid=\"u7d54eb25\" data-lake-id=\"uff87fb73\" id=\"uff87fb73\"><code data-lake-id=\"u054ab394\" id=\"u054ab394\"><span data-lake-id=\"uffba96d1\" id=\"uffba96d1\">webpack-dashboard</span></code><span data-lake-id=\"u738d01ca\" id=\"u738d01ca\">：</span><code data-lake-id=\"ude61e240\" id=\"ude61e240\"><span data-lake-id=\"u09f564a4\" id=\"u09f564a4\">webpack</span></code><span data-lake-id=\"ud2633923\" id=\"ud2633923\"> 服务器仪表盘，更友好的展示相关的打包信息</span></li><li fid=\"u7d54eb25\" data-lake-id=\"u7a297731\" id=\"u7a297731\"><code data-lake-id=\"uc6f51257\" id=\"uc6f51257\"><span data-lake-id=\"ucfa50593\" id=\"ucfa50593\">compression-webpack-plugin</span></code><span data-lake-id=\"ub2de4198\" id=\"ub2de4198\">：开启 </span><code data-lake-id=\"u1710694c\" id=\"u1710694c\"><span data-lake-id=\"ua772a038\" id=\"ua772a038\">gzip</span></code><span data-lake-id=\"u3facb2ac\" id=\"u3facb2ac\"> 压缩</span></li><li fid=\"u7d54eb25\" data-lake-id=\"ud1ecd0d8\" id=\"ud1ecd0d8\"><code data-lake-id=\"u780ebcb5\" id=\"u780ebcb5\"><span data-lake-id=\"u13a48ae4\" id=\"u13a48ae4\">eslint-webpack-plugin</span></code><span data-lake-id=\"uf509d23d\" id=\"uf509d23d\">：用于查找和修复</span><code data-lake-id=\"uf40bf792\" id=\"uf40bf792\"><span data-lake-id=\"u3144ece9\" id=\"u3144ece9\">javaScript</span></code><span data-lake-id=\"u185dc2cf\" id=\"u185dc2cf\">代码中的问题</span></li><li fid=\"u7d54eb25\" data-lake-id=\"ua16d7421\" id=\"ua16d7421\"><code data-lake-id=\"u5e75081d\" id=\"u5e75081d\"><span data-lake-id=\"u7c4d28f4\" id=\"u7c4d28f4\">speed-measure-webpack-plugin</span></code><span data-lake-id=\"udc051ba4\" id=\"udc051ba4\">：简称为</span><code data-lake-id=\"u7664d550\" id=\"u7664d550\"><span data-lake-id=\"uc3249a21\" id=\"uc3249a21\">SMP</span></code><span data-lake-id=\"u347ecc81\" id=\"u347ecc81\">，分析出</span><code data-lake-id=\"ue3211a7e\" id=\"ue3211a7e\"><span data-lake-id=\"u4dde8af9\" id=\"u4dde8af9\">webpack</span></code><span data-lake-id=\"u0c95004e\" id=\"u0c95004e\">打包过程中</span><code data-lake-id=\"u9563d68e\" id=\"u9563d68e\"><span data-lake-id=\"u029758f7\" id=\"u029758f7\">loader</span></code><span data-lake-id=\"u259c1c90\" id=\"u259c1c90\">和</span><code data-lake-id=\"u04b1ca97\" id=\"u04b1ca97\"><span data-lake-id=\"ue2865c34\" id=\"ue2865c34\">plugin</span></code><span data-lake-id=\"u355dbb3f\" id=\"u355dbb3f\">的耗时，有助于找到构建过程中的性能瓶颈</span></li><li fid=\"u7d54eb25\" data-lake-id=\"ud25506b2\" id=\"ud25506b2\"><code data-lake-id=\"u2e4ab44f\" id=\"u2e4ab44f\"><span data-lake-id=\"u3918519f\" id=\"u3918519f\">webpack</span></code><span data-lake-id=\"ucb21a371\" id=\"ucb21a371\">内置插件</span></li></ul><ul list=\"u362aef9a\" data-lake-indent=\"1\"><li fid=\"u7d54eb25\" data-lake-id=\"u1d24cdad\" id=\"u1d24cdad\"><code data-lake-id=\"u38fe0200\" id=\"u38fe0200\"><span data-lake-id=\"ue57533bb\" id=\"ue57533bb\">webpack.DefinePlugin</span></code><span data-lake-id=\"udec0d80a\" id=\"udec0d80a\">：编译时配置全局变量，对开发模式和生产模式的构建允许不同的行为非常有用(可配合 </span><code data-lake-id=\"ueaa541cc\" id=\"ueaa541cc\"><span data-lake-id=\"u4a4b76c0\" id=\"u4a4b76c0\">.env</span></code><span data-lake-id=\"u242b05a7\" id=\"u242b05a7\"> 使用)</span></li><li fid=\"u7d54eb25\" data-lake-id=\"u78cccb86\" id=\"u78cccb86\"><code data-lake-id=\"ufb23f029\" id=\"ufb23f029\"><span data-lake-id=\"u4c3d8289\" id=\"u4c3d8289\">webpack.HotModuleReplacementPlugin</span></code><span data-lake-id=\"u6b65ae23\" id=\"u6b65ae23\">：热更新，即</span><code data-lake-id=\"uc5c9a0f6\" id=\"uc5c9a0f6\"><span data-lake-id=\"uc00e5cb0\" id=\"uc00e5cb0\">HMR</span></code><span data-lake-id=\"u5666ac8a\" id=\"u5666ac8a\">。在配置了</span><code data-lake-id=\"u67a9d88e\" id=\"u67a9d88e\"><span data-lake-id=\"u8325cfc8\" id=\"u8325cfc8\">devServer.hot: true</span></code><span data-lake-id=\"ucaf194f7\" id=\"ucaf194f7\">自动添加该插件</span></li><li fid=\"u7d54eb25\" data-lake-id=\"u61c3e176\" id=\"u61c3e176\"><code data-lake-id=\"ufdac85dd\" id=\"ufdac85dd\"><span data-lake-id=\"u0a6b4263\" id=\"u0a6b4263\">webpack.DllPlugin</span></code><span data-lake-id=\"u5d5c13a7\" id=\"u5d5c13a7\">：配合</span><code data-lake-id=\"u2c9fd5f6\" id=\"u2c9fd5f6\"><span data-lake-id=\"ub0b30334\" id=\"ub0b30334\">webpack.DllReferencePlugin</span></code><span data-lake-id=\"u13767c92\" id=\"u13767c92\">使用索引链接，配合</span><code data-lake-id=\"u0a50ccdb\" id=\"u0a50ccdb\"><span data-lake-id=\"uaac3111f\" id=\"uaac3111f\">mailfest.json</span></code><span data-lake-id=\"ud86c87bb\" id=\"ud86c87bb\">来抽离第三方模块，常用于对静态不变的第三方库进行处理，从而大幅度提升构建速度。</span></li><li fid=\"u7d54eb25\" data-lake-id=\"uf4e6aadd\" id=\"uf4e6aadd\"><code data-lake-id=\"u16f1708d\" id=\"u16f1708d\"><span data-lake-id=\"u0859c16a\" id=\"u0859c16a\">webpack.SourceMapDevToolPlugin</span></code><span data-lake-id=\"u76eec65e\" id=\"u76eec65e\">：实现了对 </span><code data-lake-id=\"ua1a9cb3d\" id=\"ua1a9cb3d\"><span data-lake-id=\"u3fe6974d\" id=\"u3fe6974d\">sourceMap</span></code><span data-lake-id=\"uc22c6e9a\" id=\"uc22c6e9a\"> 生成内容进行更细粒度的控制，也可以根据</span><code data-lake-id=\"u16c89798\" id=\"u16c89798\"><span data-lake-id=\"u882917a0\" id=\"u882917a0\">devtool</span></code><span data-lake-id=\"u63c00e49\" id=\"u63c00e49\">配置选项的某些设置来自动启用</span></li></ul><h3 data-lake-id=\"fmL0C\" id=\"fmL0C\"><span data-lake-id=\"ue6d9b1f3\" id=\"ue6d9b1f3\">plugin 中的常用对象及对应 hook</span></h3><p data-lake-id=\"uae43c61d\" id=\"uae43c61d\"><span data-lake-id=\"u4694e725\" id=\"u4694e725\">在 </span><code data-lake-id=\"u250b589a\" id=\"u250b589a\"><span data-lake-id=\"u489ee7e2\" id=\"u489ee7e2\">webpack</span></code><span data-lake-id=\"ueee9832a\" id=\"ueee9832a\"> 中哪些对象可以注册 </span><code data-lake-id=\"u4960e9f7\" id=\"u4960e9f7\"><span data-lake-id=\"ubf159673\" id=\"ubf159673\">hook</span></code></p><ul list=\"u137c931a\"><li fid=\"uca064ec7\" data-lake-id=\"u90dc1df5\" id=\"u90dc1df5\"><code data-lake-id=\"u4b82517b\" id=\"u4b82517b\"><span data-lake-id=\"u13110c04\" id=\"u13110c04\">Compiler Hooks</span></code></li></ul><ul list=\"u137c931a\" data-lake-indent=\"1\"><li fid=\"uca064ec7\" data-lake-id=\"u2066510a\" id=\"u2066510a\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#environment\" target=\"_blank\" data-lake-id=\"ucf75358f\" id=\"ucf75358f\"><span data-lake-id=\"u14d43a97\" id=\"u14d43a97\">environment</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ue7d13558\" id=\"ue7d13558\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#afterenvironment\" target=\"_blank\" data-lake-id=\"u30cc6e76\" id=\"u30cc6e76\"><span data-lake-id=\"u3e48237f\" id=\"u3e48237f\">afterEnvironment</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uc8737639\" id=\"uc8737639\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#entryoption\" target=\"_blank\" data-lake-id=\"u0562ea0d\" id=\"u0562ea0d\"><span data-lake-id=\"ube6bf48b\" id=\"ube6bf48b\">entryOption</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u04c9b3cc\" id=\"u04c9b3cc\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#afterplugins\" target=\"_blank\" data-lake-id=\"uf2b84707\" id=\"uf2b84707\"><span data-lake-id=\"u9b40d842\" id=\"u9b40d842\">afterPlugins</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uff02fd08\" id=\"uff02fd08\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#afterresolvers\" target=\"_blank\" data-lake-id=\"u98851091\" id=\"u98851091\"><span data-lake-id=\"ufd991e1d\" id=\"ufd991e1d\">afterResolvers</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ube32d1ab\" id=\"ube32d1ab\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#initialize\" target=\"_blank\" data-lake-id=\"u34b17507\" id=\"u34b17507\"><span data-lake-id=\"ucac69fd4\" id=\"ucac69fd4\">initialize</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uf7746093\" id=\"uf7746093\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#beforerun\" target=\"_blank\" data-lake-id=\"u9e56f9ef\" id=\"u9e56f9ef\"><span data-lake-id=\"ud792cdfd\" id=\"ud792cdfd\">beforeRun</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u0ec15bc3\" id=\"u0ec15bc3\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#run\" target=\"_blank\" data-lake-id=\"u058bf2eb\" id=\"u058bf2eb\"><span data-lake-id=\"ua9594e1c\" id=\"ua9594e1c\">run</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u8e3b48c4\" id=\"u8e3b48c4\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#watchrun\" target=\"_blank\" data-lake-id=\"u978570c0\" id=\"u978570c0\"><span data-lake-id=\"u6b31d7e7\" id=\"u6b31d7e7\">watchRun</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u8dbf93be\" id=\"u8dbf93be\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#normalmodulefactory\" target=\"_blank\" data-lake-id=\"u53dd1eb0\" id=\"u53dd1eb0\"><span data-lake-id=\"ud85c6d6a\" id=\"ud85c6d6a\">normalModuleFactory</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u8d9628a6\" id=\"u8d9628a6\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#contextmodulefactory\" target=\"_blank\" data-lake-id=\"ud015883d\" id=\"ud015883d\"><span data-lake-id=\"u0a779f4d\" id=\"u0a779f4d\">contextModuleFactory</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u77c02549\" id=\"u77c02549\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#beforecompile\" target=\"_blank\" data-lake-id=\"u16db4e79\" id=\"u16db4e79\"><span data-lake-id=\"uf18ef552\" id=\"uf18ef552\">beforeCompile</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ue59827d7\" id=\"ue59827d7\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#compile\" target=\"_blank\" data-lake-id=\"u49d73b82\" id=\"u49d73b82\"><span data-lake-id=\"u52cbd587\" id=\"u52cbd587\">compile</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u7f490bb0\" id=\"u7f490bb0\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#thiscompilation\" target=\"_blank\" data-lake-id=\"u47eccb20\" id=\"u47eccb20\"><span data-lake-id=\"u3efae3e7\" id=\"u3efae3e7\">thisCompilation</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ub30942b0\" id=\"ub30942b0\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#compilation\" target=\"_blank\" data-lake-id=\"u4b62e18e\" id=\"u4b62e18e\"><span data-lake-id=\"uca4c0c04\" id=\"uca4c0c04\">compilation</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u884db974\" id=\"u884db974\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#make\" target=\"_blank\" data-lake-id=\"uc66f0cef\" id=\"uc66f0cef\"><span data-lake-id=\"udb55b883\" id=\"udb55b883\">make</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ua1b8ff10\" id=\"ua1b8ff10\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#aftercompile\" target=\"_blank\" data-lake-id=\"ud67f803e\" id=\"ud67f803e\"><span data-lake-id=\"ub5114ece\" id=\"ub5114ece\">afterCompile</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uf77bada5\" id=\"uf77bada5\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#shouldemit\" target=\"_blank\" data-lake-id=\"uaf46be1c\" id=\"uaf46be1c\"><span data-lake-id=\"ue797cd16\" id=\"ue797cd16\">shouldEmit</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u8e92b57c\" id=\"u8e92b57c\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#emit\" target=\"_blank\" data-lake-id=\"uca9a52be\" id=\"uca9a52be\"><span data-lake-id=\"u38915ca2\" id=\"u38915ca2\">emit</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u598e86a5\" id=\"u598e86a5\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#afteremit\" target=\"_blank\" data-lake-id=\"u720bf590\" id=\"u720bf590\"><span data-lake-id=\"u61918a61\" id=\"u61918a61\">afterEmit</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u9ad68faa\" id=\"u9ad68faa\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#assetemitted\" target=\"_blank\" data-lake-id=\"udd9d9133\" id=\"udd9d9133\"><span data-lake-id=\"ufdd012dc\" id=\"ufdd012dc\">assetEmitted</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u3d72bdde\" id=\"u3d72bdde\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#done\" target=\"_blank\" data-lake-id=\"ubd50a855\" id=\"ubd50a855\"><span data-lake-id=\"u77b01bfc\" id=\"u77b01bfc\">done</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ud6be3b91\" id=\"ud6be3b91\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#additionalpass\" target=\"_blank\" data-lake-id=\"u9b5781e2\" id=\"u9b5781e2\"><span data-lake-id=\"u4045c94e\" id=\"u4045c94e\">additionalPass</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u6d165631\" id=\"u6d165631\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#failed\" target=\"_blank\" data-lake-id=\"u7bce5436\" id=\"u7bce5436\"><span data-lake-id=\"u23c37865\" id=\"u23c37865\">failed</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uba67388b\" id=\"uba67388b\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#invalid\" target=\"_blank\" data-lake-id=\"u1bad0a88\" id=\"u1bad0a88\"><span data-lake-id=\"u8865b7b3\" id=\"u8865b7b3\">invalid</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u3bb5dbdd\" id=\"u3bb5dbdd\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#watchclose\" target=\"_blank\" data-lake-id=\"ue3ce7774\" id=\"ue3ce7774\"><span data-lake-id=\"u6141a68f\" id=\"u6141a68f\">watchClose</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u49db3151\" id=\"u49db3151\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#infrastructurelog\" target=\"_blank\" data-lake-id=\"uf1719437\" id=\"uf1719437\"><span data-lake-id=\"u5d9199e7\" id=\"u5d9199e7\">infrastructureLog</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u44c21058\" id=\"u44c21058\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/compiler-hooks/#log\" target=\"_blank\" data-lake-id=\"u25b3ade2\" id=\"u25b3ade2\"><span data-lake-id=\"uea70a86f\" id=\"uea70a86f\">log</span></a></li></ul><ul list=\"u137c931a\" start=\"2\"><li fid=\"uca064ec7\" data-lake-id=\"ucae37532\" id=\"ucae37532\"><code data-lake-id=\"u95fbbe9c\" id=\"u95fbbe9c\"><span data-lake-id=\"ufdaaa0bc\" id=\"ufdaaa0bc\">Compilation Hook</span></code></li></ul><ul list=\"u137c931a\" data-lake-indent=\"1\"><li fid=\"uca064ec7\" data-lake-id=\"uf47e26f7\" id=\"uf47e26f7\"><a href=\"https://webpack.js.org/api/compilation-hooks/#buildmodule\" target=\"_blank\" data-lake-id=\"u0371d899\" id=\"u0371d899\"><span data-lake-id=\"uee986fd2\" id=\"uee986fd2\">buildModule</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u590f1d8e\" id=\"u590f1d8e\"><a href=\"https://webpack.js.org/api/compilation-hooks/#rebuildmodule\" target=\"_blank\" data-lake-id=\"uf41c8b83\" id=\"uf41c8b83\"><span data-lake-id=\"u6d641966\" id=\"u6d641966\">rebuildModule</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ub768d625\" id=\"ub768d625\"><a href=\"https://webpack.js.org/api/compilation-hooks/#failedmodule\" target=\"_blank\" data-lake-id=\"uf0071cf9\" id=\"uf0071cf9\"><span data-lake-id=\"ue1c68044\" id=\"ue1c68044\">failedModule</span></a><span data-lake-id=\"u81fed8bf\" id=\"u81fed8bf\">\t</span></li><li fid=\"uca064ec7\" data-lake-id=\"u5eb5c2fd\" id=\"u5eb5c2fd\"><a href=\"https://webpack.js.org/api/compilation-hooks/#succeedmodule\" target=\"_blank\" data-lake-id=\"u23aba11c\" id=\"u23aba11c\"><span data-lake-id=\"u1c45e33a\" id=\"u1c45e33a\">succeedModule</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u3882efd2\" id=\"u3882efd2\"><a href=\"https://webpack.js.org/api/compilation-hooks/#finishmodules\" target=\"_blank\" data-lake-id=\"ud8a0f864\" id=\"ud8a0f864\"><span data-lake-id=\"uc054db1e\" id=\"uc054db1e\">finishModules</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uc5d53a0d\" id=\"uc5d53a0d\"><a href=\"https://webpack.js.org/api/compilation-hooks/#finishrebuildingmodule\" target=\"_blank\" data-lake-id=\"udfeadbf6\" id=\"udfeadbf6\"><span data-lake-id=\"u216db08e\" id=\"u216db08e\">finishRebuildingModule</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u0556ba38\" id=\"u0556ba38\"><a href=\"https://webpack.js.org/api/compilation-hooks/#seal\" target=\"_blank\" data-lake-id=\"u4bfd5cfe\" id=\"u4bfd5cfe\"><span data-lake-id=\"u7a566cdd\" id=\"u7a566cdd\">seal</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u2d04f029\" id=\"u2d04f029\"><a href=\"https://webpack.js.org/api/compilation-hooks/#unseal\" target=\"_blank\" data-lake-id=\"u3237e29c\" id=\"u3237e29c\"><span data-lake-id=\"uc876fd0c\" id=\"uc876fd0c\">unseal</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u5bd79cac\" id=\"u5bd79cac\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizedependencies\" target=\"_blank\" data-lake-id=\"u192d1ec9\" id=\"u192d1ec9\"><span data-lake-id=\"u81ace795\" id=\"u81ace795\">optimizeDependencies</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u9bacbedf\" id=\"u9bacbedf\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizedependencies\" target=\"_blank\" data-lake-id=\"u5dc3875b\" id=\"u5dc3875b\"><span data-lake-id=\"u139675ce\" id=\"u139675ce\">afterOptimizeDependencies</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uf901fc9c\" id=\"uf901fc9c\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimize\" target=\"_blank\" data-lake-id=\"uf56cf0bf\" id=\"uf56cf0bf\"><span data-lake-id=\"u82075713\" id=\"u82075713\">optimize</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u6bdab38b\" id=\"u6bdab38b\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizemodules\" target=\"_blank\" data-lake-id=\"u7f9d5472\" id=\"u7f9d5472\"><span data-lake-id=\"u95b333cd\" id=\"u95b333cd\">optimizeModules</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u0f4ca4b1\" id=\"u0f4ca4b1\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizemodules\" target=\"_blank\" data-lake-id=\"u1dae1bd6\" id=\"u1dae1bd6\"><span data-lake-id=\"ua72ec1dd\" id=\"ua72ec1dd\">afterOptimizeModules</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uf9833cc8\" id=\"uf9833cc8\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizechunks\" target=\"_blank\" data-lake-id=\"u3bbda111\" id=\"u3bbda111\"><span data-lake-id=\"ub420d1c0\" id=\"ub420d1c0\">optimizeChunks</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u1a504f05\" id=\"u1a504f05\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizechunks\" target=\"_blank\" data-lake-id=\"u4e367fb3\" id=\"u4e367fb3\"><span data-lake-id=\"u6af30304\" id=\"u6af30304\">afterOptimizeChunks</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uc12e0586\" id=\"uc12e0586\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizetree\" target=\"_blank\" data-lake-id=\"u5566b5ef\" id=\"u5566b5ef\"><span data-lake-id=\"u98d8a3e9\" id=\"u98d8a3e9\">optimizeTree</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u3309ec7d\" id=\"u3309ec7d\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizetree\" target=\"_blank\" data-lake-id=\"u46f93117\" id=\"u46f93117\"><span data-lake-id=\"u0aba9b5c\" id=\"u0aba9b5c\">afterOptimizeTree</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ud89dd174\" id=\"ud89dd174\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizechunkmodules\" target=\"_blank\" data-lake-id=\"ufc5fd39d\" id=\"ufc5fd39d\"><span data-lake-id=\"ub7a039b2\" id=\"ub7a039b2\">optimizeChunkModules</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ue0c299aa\" id=\"ue0c299aa\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizechunkmodules\" target=\"_blank\" data-lake-id=\"u0dc7b3e5\" id=\"u0dc7b3e5\"><span data-lake-id=\"u01f408b4\" id=\"u01f408b4\">afterOptimizeChunkModules</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u868383ca\" id=\"u868383ca\"><a href=\"https://webpack.js.org/api/compilation-hooks/#shouldrecord\" target=\"_blank\" data-lake-id=\"u1c02bccb\" id=\"u1c02bccb\"><span data-lake-id=\"ub55fbdba\" id=\"ub55fbdba\">shouldRecord</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uefe60ada\" id=\"uefe60ada\"><a href=\"https://webpack.js.org/api/compilation-hooks/#revivemodules\" target=\"_blank\" data-lake-id=\"u72f471b0\" id=\"u72f471b0\"><span data-lake-id=\"ud47a68f4\" id=\"ud47a68f4\">reviveModules</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ueee537aa\" id=\"ueee537aa\"><a href=\"https://webpack.js.org/api/compilation-hooks/#beforemoduleids\" target=\"_blank\" data-lake-id=\"uc13e1dd3\" id=\"uc13e1dd3\"><span data-lake-id=\"u1320c4d2\" id=\"u1320c4d2\">beforeModuleIds</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ucbdcb2ca\" id=\"ucbdcb2ca\"><a href=\"https://webpack.js.org/api/compilation-hooks/#moduleids\" target=\"_blank\" data-lake-id=\"u66f72861\" id=\"u66f72861\"><span data-lake-id=\"ube474a0a\" id=\"ube474a0a\">moduleIds</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ub363a04b\" id=\"ub363a04b\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizemoduleids\" target=\"_blank\" data-lake-id=\"uca89a9f0\" id=\"uca89a9f0\"><span data-lake-id=\"u3ac66666\" id=\"u3ac66666\">optimizeModuleIds</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ubf20d10d\" id=\"ubf20d10d\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizemoduleids\" target=\"_blank\" data-lake-id=\"u284429e8\" id=\"u284429e8\"><span data-lake-id=\"u9795ad1c\" id=\"u9795ad1c\">afterOptimizeModuleIds</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uc56ee917\" id=\"uc56ee917\"><a href=\"https://webpack.js.org/api/compilation-hooks/#revivechunks\" target=\"_blank\" data-lake-id=\"ud9ac3f4d\" id=\"ud9ac3f4d\"><span data-lake-id=\"uf5e24341\" id=\"uf5e24341\">reviveChunks</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ua3609498\" id=\"ua3609498\"><a href=\"https://webpack.js.org/api/compilation-hooks/#beforechunkids\" target=\"_blank\" data-lake-id=\"uc0765412\" id=\"uc0765412\"><span data-lake-id=\"ucb7743f3\" id=\"ucb7743f3\">beforeChunkIds</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u7f8697a2\" id=\"u7f8697a2\"><a href=\"https://webpack.js.org/api/compilation-hooks/#chunkids\" target=\"_blank\" data-lake-id=\"u347750ee\" id=\"u347750ee\"><span data-lake-id=\"u9f363de8\" id=\"u9f363de8\">chunkIds</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u2883ad00\" id=\"u2883ad00\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizechunkids\" target=\"_blank\" data-lake-id=\"ubd5a5eb4\" id=\"ubd5a5eb4\"><span data-lake-id=\"u16d77678\" id=\"u16d77678\">optimizeChunkIds</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u71a78b3d\" id=\"u71a78b3d\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizechunkids\" target=\"_blank\" data-lake-id=\"udb3682cf\" id=\"udb3682cf\"><span data-lake-id=\"u6b8bdbb5\" id=\"u6b8bdbb5\">afterOptimizeChunkIds</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u99559354\" id=\"u99559354\"><a href=\"https://webpack.js.org/api/compilation-hooks/#recordmodules\" target=\"_blank\" data-lake-id=\"ud11ea9b4\" id=\"ud11ea9b4\"><span data-lake-id=\"uf59aa401\" id=\"uf59aa401\">recordModules</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u4e5758e3\" id=\"u4e5758e3\"><a href=\"https://webpack.js.org/api/compilation-hooks/#recordchunks\" target=\"_blank\" data-lake-id=\"u7a0cd8ba\" id=\"u7a0cd8ba\"><span data-lake-id=\"u2de5c7ea\" id=\"u2de5c7ea\">recordChunks</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ua9bea725\" id=\"ua9bea725\"><a href=\"https://webpack.js.org/api/compilation-hooks/#beforemodulehash\" target=\"_blank\" data-lake-id=\"uf5f1dfb7\" id=\"uf5f1dfb7\"><span data-lake-id=\"uc7bc446e\" id=\"uc7bc446e\">beforeModuleHash</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ufb584927\" id=\"ufb584927\"><a href=\"https://webpack.js.org/api/compilation-hooks/#aftermodulehash\" target=\"_blank\" data-lake-id=\"uf1e8f8f8\" id=\"uf1e8f8f8\"><span data-lake-id=\"ue08c73de\" id=\"ue08c73de\">afterModuleHash</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u155ed50a\" id=\"u155ed50a\"><a href=\"https://webpack.js.org/api/compilation-hooks/#beforehash\" target=\"_blank\" data-lake-id=\"u68e6f84f\" id=\"u68e6f84f\"><span data-lake-id=\"uc9b65273\" id=\"uc9b65273\">beforeHash</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u0e256e9f\" id=\"u0e256e9f\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afterhash\" target=\"_blank\" data-lake-id=\"ue0224f9b\" id=\"ue0224f9b\"><span data-lake-id=\"u27afb0cb\" id=\"u27afb0cb\">afterHash</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u932b99b1\" id=\"u932b99b1\"><a href=\"https://webpack.js.org/api/compilation-hooks/#recordhash\" target=\"_blank\" data-lake-id=\"uc6f32001\" id=\"uc6f32001\"><span data-lake-id=\"u1c9357bc\" id=\"u1c9357bc\">recordHash</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uf7878f6e\" id=\"uf7878f6e\"><a href=\"https://webpack.js.org/api/compilation-hooks/#record\" target=\"_blank\" data-lake-id=\"uc30bd23d\" id=\"uc30bd23d\"><span data-lake-id=\"ud9f4c174\" id=\"ud9f4c174\">record</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u5356397f\" id=\"u5356397f\"><a href=\"https://webpack.js.org/api/compilation-hooks/#beforemoduleassets\" target=\"_blank\" data-lake-id=\"uec344784\" id=\"uec344784\"><span data-lake-id=\"u39086b71\" id=\"u39086b71\">beforeModuleAssets</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ube3e68cb\" id=\"ube3e68cb\"><a href=\"https://webpack.js.org/api/compilation-hooks/#additionalchunkassets\" target=\"_blank\" data-lake-id=\"uca5bf049\" id=\"uca5bf049\"><span data-lake-id=\"u8672a0f4\" id=\"u8672a0f4\">additionalChunkAssets</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uc137ebcf\" id=\"uc137ebcf\"><a href=\"https://webpack.js.org/api/compilation-hooks/#shouldgeneratechunkassets\" target=\"_blank\" data-lake-id=\"ud407e6eb\" id=\"ud407e6eb\"><span data-lake-id=\"u25fec7a2\" id=\"u25fec7a2\">shouldGenerateChunkAssets</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uc6fb9143\" id=\"uc6fb9143\"><a href=\"https://webpack.js.org/api/compilation-hooks/#beforechunkassets\" target=\"_blank\" data-lake-id=\"u45d3ae8a\" id=\"u45d3ae8a\"><span data-lake-id=\"u61d2766b\" id=\"u61d2766b\">beforeChunkAssets</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u30f63fdf\" id=\"u30f63fdf\"><a href=\"https://webpack.js.org/api/compilation-hooks/#additionalassets\" target=\"_blank\" data-lake-id=\"u917e2215\" id=\"u917e2215\"><span data-lake-id=\"u40de59e5\" id=\"u40de59e5\">additionalAssets</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ue38667ea\" id=\"ue38667ea\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizechunkassets\" target=\"_blank\" data-lake-id=\"u1ab72bd0\" id=\"u1ab72bd0\"><span data-lake-id=\"u6d6dd505\" id=\"u6d6dd505\">optimizeChunkAssets</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u72b8d7d3\" id=\"u72b8d7d3\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizechunkassets\" target=\"_blank\" data-lake-id=\"u6a627207\" id=\"u6a627207\"><span data-lake-id=\"u7f0ffad8\" id=\"u7f0ffad8\">afterOptimizeChunkAssets</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ub6028e9f\" id=\"ub6028e9f\"><a href=\"https://webpack.js.org/api/compilation-hooks/#optimizeassets\" target=\"_blank\" data-lake-id=\"ue4e090d3\" id=\"ue4e090d3\"><span data-lake-id=\"udc371000\" id=\"udc371000\">optimizeAssets</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ufeed1ec7\" id=\"ufeed1ec7\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afteroptimizeassets\" target=\"_blank\" data-lake-id=\"ubf68fdcd\" id=\"ubf68fdcd\"><span data-lake-id=\"u6d688635\" id=\"u6d688635\">afterOptimizeAssets</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uad97b4e3\" id=\"uad97b4e3\"><a href=\"https://webpack.js.org/api/compilation-hooks/#processassets\" target=\"_blank\" data-lake-id=\"u2df7645a\" id=\"u2df7645a\"><span data-lake-id=\"uae46858e\" id=\"uae46858e\">processAssets</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uff5e0922\" id=\"uff5e0922\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afterprocessassets\" target=\"_blank\" data-lake-id=\"u2bc1e872\" id=\"u2bc1e872\"><span data-lake-id=\"u9e03d5c3\" id=\"u9e03d5c3\">afterProcessAssets</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u44dca7fd\" id=\"u44dca7fd\"><a href=\"https://webpack.js.org/api/compilation-hooks/#needadditionalseal\" target=\"_blank\" data-lake-id=\"u58b7f817\" id=\"u58b7f817\"><span data-lake-id=\"uc59e574a\" id=\"uc59e574a\">needAdditionalSeal</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u323490a4\" id=\"u323490a4\"><a href=\"https://webpack.js.org/api/compilation-hooks/#afterseal\" target=\"_blank\" data-lake-id=\"u6ff57ea1\" id=\"u6ff57ea1\"><span data-lake-id=\"u95012051\" id=\"u95012051\">afterSeal</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u1e32177e\" id=\"u1e32177e\"><a href=\"https://webpack.js.org/api/compilation-hooks/#chunkhash\" target=\"_blank\" data-lake-id=\"ub8b70e34\" id=\"ub8b70e34\"><span data-lake-id=\"ufaff6328\" id=\"ufaff6328\">chunkHash</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ub7d6d207\" id=\"ub7d6d207\"><a href=\"https://webpack.js.org/api/compilation-hooks/#moduleasset\" target=\"_blank\" data-lake-id=\"u6bab3514\" id=\"u6bab3514\"><span data-lake-id=\"u91e12524\" id=\"u91e12524\">moduleAsset</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ud9e2cd59\" id=\"ud9e2cd59\"><a href=\"https://webpack.js.org/api/compilation-hooks/#chunkasset\" target=\"_blank\" data-lake-id=\"ub956d1fb\" id=\"ub956d1fb\"><span data-lake-id=\"ub1241aa2\" id=\"ub1241aa2\">chunkAsset</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u2bccbafc\" id=\"u2bccbafc\"><a href=\"https://webpack.js.org/api/compilation-hooks/#assetpath\" target=\"_blank\" data-lake-id=\"u3bb3e3cf\" id=\"u3bb3e3cf\"><span data-lake-id=\"u650c65f9\" id=\"u650c65f9\">assetPath</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u85745d5f\" id=\"u85745d5f\"><a href=\"https://webpack.js.org/api/compilation-hooks/#needadditionalpass\" target=\"_blank\" data-lake-id=\"u760edc67\" id=\"u760edc67\"><span data-lake-id=\"uae92c5a1\" id=\"uae92c5a1\">needAdditionalPass</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ub1d4a248\" id=\"ub1d4a248\"><a href=\"https://webpack.js.org/api/compilation-hooks/#childcompiler\" target=\"_blank\" data-lake-id=\"u7c4c108b\" id=\"u7c4c108b\"><span data-lake-id=\"ucfd75b4b\" id=\"ucfd75b4b\">childCompiler</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uc35c3c20\" id=\"uc35c3c20\"><a href=\"https://webpack.js.org/api/compilation-hooks/#normalmoduleloader\" target=\"_blank\" data-lake-id=\"u5f26180e\" id=\"u5f26180e\"><span data-lake-id=\"u3fa9a9ff\" id=\"u3fa9a9ff\">normalModuleLoader</span></a></li></ul><ul list=\"u137c931a\" start=\"3\"><li fid=\"uca064ec7\" data-lake-id=\"uc602dbdc\" id=\"uc602dbdc\"><code data-lake-id=\"u1d5df381\" id=\"u1d5df381\"><span data-lake-id=\"u4cec4904\" id=\"u4cec4904\">ContextModuleFactory Hooks</span></code></li></ul><ul list=\"u137c931a\" data-lake-indent=\"1\"><li fid=\"uca064ec7\" data-lake-id=\"u2c86a5c6\" id=\"u2c86a5c6\"><a href=\"https://webpack.js.org/api/contextmodulefactory-hooks/#beforeresolve\" target=\"_blank\" data-lake-id=\"uad3f3cad\" id=\"uad3f3cad\"><span data-lake-id=\"u289d8cfb\" id=\"u289d8cfb\">beforeResolve</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u6c1cd611\" id=\"u6c1cd611\"><a href=\"https://webpack.js.org/api/contextmodulefactory-hooks/#afterresolve\" target=\"_blank\" data-lake-id=\"ud81a491d\" id=\"ud81a491d\"><span data-lake-id=\"u61240053\" id=\"u61240053\">afterResolve</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ud8e6fc14\" id=\"ud8e6fc14\"><a href=\"https://webpack.js.org/api/contextmodulefactory-hooks/#contextmodulefiles\" target=\"_blank\" data-lake-id=\"ue2e94646\" id=\"ue2e94646\"><span data-lake-id=\"uafd68b20\" id=\"uafd68b20\">contextModuleFiles</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ue7028d18\" id=\"ue7028d18\"><a href=\"https://webpack.js.org/api/contextmodulefactory-hooks/#alternativerequests\" target=\"_blank\" data-lake-id=\"uf5a7a586\" id=\"uf5a7a586\"><span data-lake-id=\"ud4c20aac\" id=\"ud4c20aac\">alternativeRequests</span></a></li></ul><ul list=\"u137c931a\" start=\"4\"><li fid=\"uca064ec7\" data-lake-id=\"uacc1d3b7\" id=\"uacc1d3b7\"><code data-lake-id=\"ue6b4b629\" id=\"ue6b4b629\"><span data-lake-id=\"u40e3c0ab\" id=\"u40e3c0ab\">JavascriptParser Hooks</span></code></li></ul><ul list=\"u137c931a\" data-lake-indent=\"1\"><li fid=\"uca064ec7\" data-lake-id=\"u43737f40\" id=\"u43737f40\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#evaluatetypeof\" target=\"_blank\" data-lake-id=\"u02dd423c\" id=\"u02dd423c\"><span data-lake-id=\"ud32c725d\" id=\"ud32c725d\">evaluateTypeof</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u6c825f86\" id=\"u6c825f86\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#evaluate\" target=\"_blank\" data-lake-id=\"u3fce4219\" id=\"u3fce4219\"><span data-lake-id=\"u569a99f7\" id=\"u569a99f7\">evaluate</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ud483590c\" id=\"ud483590c\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#evaluateidentifier\" target=\"_blank\" data-lake-id=\"ua42f2bf3\" id=\"ua42f2bf3\"><span data-lake-id=\"uae55098c\" id=\"uae55098c\">evaluateIdentifier</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u12eb9640\" id=\"u12eb9640\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#evaluatedefinedidentifier\" target=\"_blank\" data-lake-id=\"u0a4ad87c\" id=\"u0a4ad87c\"><span data-lake-id=\"u9afbd803\" id=\"u9afbd803\">evaluateDefinedIdentifier</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uc0667e70\" id=\"uc0667e70\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#evaluatecallexpressionmember\" target=\"_blank\" data-lake-id=\"u5a1600be\" id=\"u5a1600be\"><span data-lake-id=\"u427bf94e\" id=\"u427bf94e\">evaluateCallExpressionMember</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u5c6ef4b6\" id=\"u5c6ef4b6\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#statement\" target=\"_blank\" data-lake-id=\"uedfca030\" id=\"uedfca030\"><span data-lake-id=\"u8696800c\" id=\"u8696800c\">statement</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u15e2fac8\" id=\"u15e2fac8\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#statementif\" target=\"_blank\" data-lake-id=\"u66a46d04\" id=\"u66a46d04\"><span data-lake-id=\"u816d4232\" id=\"u816d4232\">statementIf</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u8a5be525\" id=\"u8a5be525\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#label\" target=\"_blank\" data-lake-id=\"u6d800f89\" id=\"u6d800f89\"><span data-lake-id=\"ub90321e8\" id=\"ub90321e8\">label</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u795271d2\" id=\"u795271d2\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#import\" target=\"_blank\" data-lake-id=\"uc2bad452\" id=\"uc2bad452\"><span data-lake-id=\"uf55193ed\" id=\"uf55193ed\">import</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u623d7325\" id=\"u623d7325\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#importspecifier\" target=\"_blank\" data-lake-id=\"u91373980\" id=\"u91373980\"><span data-lake-id=\"u5ba824dc\" id=\"u5ba824dc\">importSpecifier</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ua10d5270\" id=\"ua10d5270\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#export\" target=\"_blank\" data-lake-id=\"u81366a58\" id=\"u81366a58\"><span data-lake-id=\"ud8f4d032\" id=\"ud8f4d032\">export</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uca537f79\" id=\"uca537f79\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#exportimport\" target=\"_blank\" data-lake-id=\"uff8808f3\" id=\"uff8808f3\"><span data-lake-id=\"uc65673c4\" id=\"uc65673c4\">exportImport</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ucf5fc316\" id=\"ucf5fc316\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#exportdeclaration\" target=\"_blank\" data-lake-id=\"uc13e5ac2\" id=\"uc13e5ac2\"><span data-lake-id=\"uc1abaaab\" id=\"uc1abaaab\">exportDeclaration</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u255c7960\" id=\"u255c7960\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#exportexpression\" target=\"_blank\" data-lake-id=\"u58a99494\" id=\"u58a99494\"><span data-lake-id=\"u8c286697\" id=\"u8c286697\">exportExpression</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uda45262c\" id=\"uda45262c\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#exportspecifier\" target=\"_blank\" data-lake-id=\"uf9dcd242\" id=\"uf9dcd242\"><span data-lake-id=\"u3f7f491c\" id=\"u3f7f491c\">exportSpecifier</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uea75d307\" id=\"uea75d307\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#exportimportspecifier\" target=\"_blank\" data-lake-id=\"u0f072640\" id=\"u0f072640\"><span data-lake-id=\"ue2077fad\" id=\"ue2077fad\">exportImportSpecifier</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u9c538f32\" id=\"u9c538f32\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#vardeclaration\" target=\"_blank\" data-lake-id=\"ude8d3ab7\" id=\"ude8d3ab7\"><span data-lake-id=\"u514f65ce\" id=\"u514f65ce\">varDeclaration</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"uc29e1d05\" id=\"uc29e1d05\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#vardeclarationlet\" target=\"_blank\" data-lake-id=\"uc920891c\" id=\"uc920891c\"><span data-lake-id=\"u31ac1d96\" id=\"u31ac1d96\">varDeclarationLet</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u092f497d\" id=\"u092f497d\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#vardeclarationconst\" target=\"_blank\" data-lake-id=\"u901cff64\" id=\"u901cff64\"><span data-lake-id=\"u7574c8c9\" id=\"u7574c8c9\">varDeclarationConst</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u1e34e12e\" id=\"u1e34e12e\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#vardeclarationvar\" target=\"_blank\" data-lake-id=\"u936ac648\" id=\"u936ac648\"><span data-lake-id=\"ua922b3b3\" id=\"ua922b3b3\">varDeclarationVar</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u4dda06fa\" id=\"u4dda06fa\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#canrename\" target=\"_blank\" data-lake-id=\"u5779f0e7\" id=\"u5779f0e7\"><span data-lake-id=\"u94927cf4\" id=\"u94927cf4\">canRename</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u79b3ec7f\" id=\"u79b3ec7f\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#rename\" target=\"_blank\" data-lake-id=\"uada1bacb\" id=\"uada1bacb\"><span data-lake-id=\"u459a752d\" id=\"u459a752d\">rename</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ue547d36c\" id=\"ue547d36c\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#assigned\" target=\"_blank\" data-lake-id=\"u11a966c1\" id=\"u11a966c1\"><span data-lake-id=\"uc76742bb\" id=\"uc76742bb\">assigned</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ua60fda2d\" id=\"ua60fda2d\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#assign\" target=\"_blank\" data-lake-id=\"u936550a4\" id=\"u936550a4\"><span data-lake-id=\"ub2592da9\" id=\"ub2592da9\">assign</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u0e98a2f2\" id=\"u0e98a2f2\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#typeof\" target=\"_blank\" data-lake-id=\"ud1dba14f\" id=\"ud1dba14f\"><span data-lake-id=\"u50e091a7\" id=\"u50e091a7\">typeof</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ubf3d0125\" id=\"ubf3d0125\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#call\" target=\"_blank\" data-lake-id=\"ub3421d35\" id=\"ub3421d35\"><span data-lake-id=\"ucbca1442\" id=\"ucbca1442\">call</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u1d364a39\" id=\"u1d364a39\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#callmemberchain\" target=\"_blank\" data-lake-id=\"u74a1b7fa\" id=\"u74a1b7fa\"><span data-lake-id=\"u426fd84d\" id=\"u426fd84d\">callMemberChain</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u093c9aca\" id=\"u093c9aca\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#new\" target=\"_blank\" data-lake-id=\"uc42fcaea\" id=\"uc42fcaea\"><span data-lake-id=\"u8adaa96f\" id=\"u8adaa96f\">new</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u283e40e0\" id=\"u283e40e0\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#expression\" target=\"_blank\" data-lake-id=\"u5dfeeed2\" id=\"u5dfeeed2\"><span data-lake-id=\"ud87da204\" id=\"ud87da204\">expression</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u4ed8279b\" id=\"u4ed8279b\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#expressionconditionaloperator\" target=\"_blank\" data-lake-id=\"u435f72de\" id=\"u435f72de\"><span data-lake-id=\"u85416672\" id=\"u85416672\">expressionConditionalOperator</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ue7712932\" id=\"ue7712932\" style=\"text-align: left\"><a href=\"https://webpack.js.org/api/parser/#program\" target=\"_blank\" data-lake-id=\"uc27535ad\" id=\"uc27535ad\"><span data-lake-id=\"u92403ca2\" id=\"u92403ca2\">program</span></a></li></ul><ul list=\"u137c931a\" start=\"5\"><li fid=\"uca064ec7\" data-lake-id=\"u13da1515\" id=\"u13da1515\"><code data-lake-id=\"uf3610031\" id=\"uf3610031\"><span data-lake-id=\"uebc445e5\" id=\"uebc445e5\">NormalModuleFactory Hooks</span></code></li></ul><ul list=\"u137c931a\" data-lake-indent=\"1\"><li fid=\"uca064ec7\" data-lake-id=\"u127e1c7b\" id=\"u127e1c7b\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#beforeresolve\" target=\"_blank\" data-lake-id=\"ufbcdc499\" id=\"ufbcdc499\"><span data-lake-id=\"u3a09b283\" id=\"u3a09b283\">beforeResolve</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u19144415\" id=\"u19144415\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#factorize\" target=\"_blank\" data-lake-id=\"ud01fd808\" id=\"ud01fd808\"><span data-lake-id=\"uc7ad1aa5\" id=\"uc7ad1aa5\">factorize</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u144f4131\" id=\"u144f4131\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#resolve\" target=\"_blank\" data-lake-id=\"u7af60e74\" id=\"u7af60e74\"><span data-lake-id=\"ud9055e1d\" id=\"ud9055e1d\">resolve</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"ua8ffd98c\" id=\"ua8ffd98c\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#resolveforscheme\" target=\"_blank\" data-lake-id=\"u998aac7c\" id=\"u998aac7c\"><span data-lake-id=\"u9eecb5d0\" id=\"u9eecb5d0\">resolveForScheme</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u3de48e99\" id=\"u3de48e99\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#afterresolve\" target=\"_blank\" data-lake-id=\"u6af47125\" id=\"u6af47125\"><span data-lake-id=\"ue6e83ed6\" id=\"ue6e83ed6\">afterResolve</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u8bbecd18\" id=\"u8bbecd18\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#createmodule\" target=\"_blank\" data-lake-id=\"ub17b5741\" id=\"ub17b5741\"><span data-lake-id=\"u4e3d1e25\" id=\"u4e3d1e25\">createModule</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u6b2b6bab\" id=\"u6b2b6bab\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#module\" target=\"_blank\" data-lake-id=\"ue8c3b39e\" id=\"ue8c3b39e\"><span data-lake-id=\"u30628112\" id=\"u30628112\">module</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u9cbb39ca\" id=\"u9cbb39ca\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#createparser\" target=\"_blank\" data-lake-id=\"u96b7b116\" id=\"u96b7b116\"><span data-lake-id=\"u37ff268f\" id=\"u37ff268f\">createParser</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u63e70dc0\" id=\"u63e70dc0\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#parser\" target=\"_blank\" data-lake-id=\"u0be3ce6a\" id=\"u0be3ce6a\"><span data-lake-id=\"ue35a6e98\" id=\"ue35a6e98\">parser</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u11373879\" id=\"u11373879\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#creategenerator\" target=\"_blank\" data-lake-id=\"u882c1cc5\" id=\"u882c1cc5\"><span data-lake-id=\"u01ea7848\" id=\"u01ea7848\">createGenerator</span></a></li><li fid=\"uca064ec7\" data-lake-id=\"u2ae053ec\" id=\"u2ae053ec\"><a href=\"https://webpack.js.org/api/normalmodulefactory-hooks/#generator\" target=\"_blank\" data-lake-id=\"ub2076e6c\" id=\"ub2076e6c\"><span data-lake-id=\"uc2b83c20\" id=\"uc2b83c20\">generator</span></a></li></ul><h3 data-lake-id=\"k6FRY\" id=\"k6FRY\"><span data-lake-id=\"u630f625a\" id=\"u630f625a\">插件的不同类型</span></h3><p data-lake-id=\"u67d38bda\" id=\"u67d38bda\"><code data-lake-id=\"u17c3f7fa\" id=\"u17c3f7fa\"><span data-lake-id=\"u553fe67f\" id=\"u553fe67f\">webpack</span></code><span data-lake-id=\"uabff3eee\" id=\"uabff3eee\"> 插件可以按照它所注册的事件分成不同的类型。每一个事件钩子都预先定义为同步、异步、瀑布或并行钩子，钩子在内部用 </span><code data-lake-id=\"udc01547f\" id=\"udc01547f\"><span data-lake-id=\"u1ba10a8b\" id=\"u1ba10a8b\">call/callAsync</span></code><span data-lake-id=\"u0adfdfe0\" id=\"u0adfdfe0\"> 方法调用。支持的钩子清单或可被绑定的钩子清单，通常在 </span><code data-lake-id=\"u961dfc97\" id=\"u961dfc97\"><span data-lake-id=\"u1f0cdd9a\" id=\"u1f0cdd9a\">this.hooks</span></code><span data-lake-id=\"u0fede1ef\" id=\"u0fede1ef\"> 属性指定。</span></p><ul list=\"uc7dae722\"><li fid=\"u6494557a\" data-lake-id=\"uabac2d45\" id=\"uabac2d45\"><span data-lake-id=\"u31d94fe9\" id=\"u31d94fe9\">例如：</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22this.hooks%20%3D%20%7B%5Cn%20%20shouldEmit%3A%20new%20SyncBailHook(%5B'compilation'%5D)%2C%5Cn%7D%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22McnSm%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u9784238d\" id=\"u9784238d\"><span data-lake-id=\"u4af58676\" id=\"u4af58676\">表示唯一支持的钩子是 </span><code data-lake-id=\"ucf745e0e\" id=\"ucf745e0e\"><span data-lake-id=\"u8f8a5237\" id=\"u8f8a5237\">shouldEmit</span></code><span data-lake-id=\"uedb4b341\" id=\"uedb4b341\"> ，这是一个 </span><code data-lake-id=\"u80bc7385\" id=\"u80bc7385\"><span data-lake-id=\"u2a84ad5f\" id=\"u2a84ad5f\">SyncBailHook</span></code><span data-lake-id=\"u386027c6\" id=\"u386027c6\"> 类型的钩子，传入插件的唯一参数是 </span><code data-lake-id=\"u7e04383d\" id=\"u7e04383d\"><span data-lake-id=\"u46e6ed05\" id=\"u46e6ed05\">compilation</span></code><span data-lake-id=\"u4d87cf0f\" id=\"u4d87cf0f\"> 。</span></p><p data-lake-id=\"u09518401\" id=\"u09518401\"><span data-lake-id=\"u2f7439bb\" id=\"u2f7439bb\">支持的各类型钩子：</span></p><h3 data-lake-id=\"QXII3\" id=\"QXII3\"><span data-lake-id=\"ufb673bbe\" id=\"ufb673bbe\">同步 hooks</span></h3><ul list=\"u73a4525e\"><li fid=\"u0e3fad8b\" data-lake-id=\"u0f356623\" id=\"u0f356623\"><code data-lake-id=\"ueaaedbfd\" id=\"ueaaedbfd\"><span data-lake-id=\"u51f22fe7\" id=\"u51f22fe7\">SyncHook</span></code></li></ul><ul list=\"u73a4525e\" data-lake-indent=\"1\"><li fid=\"u71b36133\" data-lake-id=\"ub708204e\" id=\"ub708204e\"><span data-lake-id=\"u452e11ba\" id=\"u452e11ba\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\">通过 </span><code data-lake-id=\"u0a53cd0f\" id=\"u0a53cd0f\"><span data-lake-id=\"uda81904b\" id=\"uda81904b\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">new SyncHook([params])</span></code><span data-lake-id=\"u74b3fcdb\" id=\"u74b3fcdb\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\"> 定义。</span></li><li fid=\"u71b36133\" data-lake-id=\"u1f3c1ec4\" id=\"u1f3c1ec4\"><span data-lake-id=\"uee320fe7\" id=\"uee320fe7\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\">用 </span><code data-lake-id=\"u5df11397\" id=\"u5df11397\"><span data-lake-id=\"ue109b74c\" id=\"ue109b74c\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">tap</span></code><span data-lake-id=\"uc3ab3576\" id=\"uc3ab3576\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\"> 方法绑定。</span></li><li fid=\"u71b36133\" data-lake-id=\"uf9897c59\" id=\"uf9897c59\"><span data-lake-id=\"u4351d6ce\" id=\"u4351d6ce\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\">用 </span><code data-lake-id=\"u617d8ba8\" id=\"u617d8ba8\"><span data-lake-id=\"uce6f8af0\" id=\"uce6f8af0\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">call(...params)</span></code><span data-lake-id=\"ufd0a2456\" id=\"ufd0a2456\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\"> 方法调用。</span></li></ul><ul list=\"u73a4525e\" start=\"2\"><li fid=\"u0e3fad8b\" data-lake-id=\"ue4d425e5\" id=\"ue4d425e5\"><code data-lake-id=\"u2b6e7d66\" id=\"u2b6e7d66\"><span data-lake-id=\"u944a86cc\" id=\"u944a86cc\">Bail</span></code><span data-lake-id=\"u88114844\" id=\"u88114844\">(保险) </span><code data-lake-id=\"u1e226e53\" id=\"u1e226e53\"><span data-lake-id=\"uf5b5f127\" id=\"uf5b5f127\">Hooks</span></code></li></ul><ul list=\"u73a4525e\" data-lake-indent=\"1\"><li fid=\"ufe5a76ab\" data-lake-id=\"uc4899266\" id=\"uc4899266\"><span data-lake-id=\"ud3747cf6\" id=\"ud3747cf6\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\">通过 </span><code data-lake-id=\"u3d3aa5d6\" id=\"u3d3aa5d6\"><span data-lake-id=\"u14c93c4d\" id=\"u14c93c4d\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">new SyncBailHook([params])</span></code><span data-lake-id=\"u95d16344\" id=\"u95d16344\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\"> 定义。</span></li><li fid=\"ufe5a76ab\" data-lake-id=\"ua2224f70\" id=\"ua2224f70\"><span data-lake-id=\"u38eb787b\" id=\"u38eb787b\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\">用 </span><code data-lake-id=\"uabc6fc61\" id=\"uabc6fc61\"><span data-lake-id=\"u3b17167f\" id=\"u3b17167f\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">tap</span></code><span data-lake-id=\"u17dad977\" id=\"u17dad977\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\"> 方法绑定。</span></li><li fid=\"ufe5a76ab\" data-lake-id=\"u5085c066\" id=\"u5085c066\"><span data-lake-id=\"u7f09efcc\" id=\"u7f09efcc\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\">用 </span><code data-lake-id=\"u998ec144\" id=\"u998ec144\"><span data-lake-id=\"ue7c4cc1f\" id=\"ue7c4cc1f\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">call(...params)</span></code><span data-lake-id=\"ubdbbdb09\" id=\"ubdbbdb09\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\"> 方法调用。</span></li></ul><blockquote data-lake-id=\"ueef79480\" id=\"ueef79480\" class=\"lake-alert lake-alert-info\"><p data-lake-id=\"ub254f84b\" id=\"ub254f84b\"><code data-lake-id=\"u714eef43\" id=\"u714eef43\"><span data-lake-id=\"ua950d9d8\" id=\"ua950d9d8\">Bail</span></code><span data-lake-id=\"ub7f19dbe\" id=\"ub7f19dbe\"> 类型的钩子，其插件回调函数是串行调用，任意一个插件回调函数返回非 </span><code data-lake-id=\"u0c32a884\" id=\"u0c32a884\"><span data-lake-id=\"u3e32b18b\" id=\"u3e32b18b\">undefined</span></code><span data-lake-id=\"u116bd925\" id=\"u116bd925\"> 值，则停止执行插件，该值作为钩子的返回值。</span><code data-lake-id=\"ua15d0506\" id=\"ua15d0506\"><span data-lake-id=\"ude1e3be8\" id=\"ude1e3be8\">optimizeChunks</span></code><span data-lake-id=\"ua2616a06\" id=\"ua2616a06\">，</span><code data-lake-id=\"ub0bff163\" id=\"ub0bff163\"><span data-lake-id=\"uc0061260\" id=\"uc0061260\">optimizeChunkModules</span></code><span data-lake-id=\"ufcf0950a\" id=\"ufcf0950a\"> 等很有用的事件都是 </span><code data-lake-id=\"u1426d61e\" id=\"u1426d61e\"><span data-lake-id=\"ub59dbbbc\" id=\"ub59dbbbc\">SyncBailHooks</span></code><span data-lake-id=\"u725f175c\" id=\"u725f175c\"> 。</span></p></blockquote><ul list=\"u21c5c8c1\"><li fid=\"ub8905a31\" data-lake-id=\"u8b206693\" id=\"u8b206693\" style=\"text-align: left\"><span data-lake-id=\"ufa98a1be\" id=\"ufa98a1be\">Waterfall(瀑布) Hooks</span></li></ul><ul list=\"u92173ed2\" data-lake-indent=\"1\"><li fid=\"ua055c65d\" data-lake-id=\"u72e9b869\" id=\"u72e9b869\" style=\"text-align: left\"><span data-lake-id=\"u6242f4c6\" id=\"u6242f4c6\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\">通过 </span><code data-lake-id=\"u21da5e5b\" id=\"u21da5e5b\"><span data-lake-id=\"u936608f8\" id=\"u936608f8\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">new SyncWaterfallHook([params])</span></code><span data-lake-id=\"ucf95e5a1\" id=\"ucf95e5a1\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\"> 定义。</span></li><li fid=\"ua055c65d\" data-lake-id=\"u21be0786\" id=\"u21be0786\" style=\"text-align: left\"><span data-lake-id=\"u66438341\" id=\"u66438341\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\">用 </span><code data-lake-id=\"u7ccd281a\" id=\"u7ccd281a\"><span data-lake-id=\"u6466d60d\" id=\"u6466d60d\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">tap</span></code><span data-lake-id=\"uab85dd71\" id=\"uab85dd71\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\"> 方法绑定。</span></li><li fid=\"ua055c65d\" data-lake-id=\"uff9d02f3\" id=\"uff9d02f3\" style=\"text-align: left\"><span data-lake-id=\"u91d10f7b\" id=\"u91d10f7b\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\">用 </span><code data-lake-id=\"u71101b1c\" id=\"u71101b1c\"><span data-lake-id=\"u02ca149c\" id=\"u02ca149c\" class=\"lake-fontsize-11\" style=\"color: rgb(43, 58, 66)\">call(...params)</span></code><span data-lake-id=\"ue06e68a0\" id=\"ue06e68a0\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\"> 方法调用。</span></li></ul><blockquote data-lake-id=\"u5be98eaa\" id=\"u5be98eaa\" class=\"lake-alert lake-alert-info\"><p data-lake-id=\"u2449293f\" id=\"u2449293f\"><span data-lake-id=\"ucad07fd2\" id=\"ucad07fd2\">该类型的插件是一个接一个串行执行，前一个的返回值作为后一个的入参。插件需要考虑执行的顺序，因为后一个插件必须接受前一个插件执行的结果作为入参。第一个插件的参数为 </span><code data-lake-id=\"u75451c85\" id=\"u75451c85\"><span data-lake-id=\"uc8d4f721\" id=\"uc8d4f721\">init</span></code><span data-lake-id=\"ua34151a7\" id=\"ua34151a7\"> 。 所以 </span><code data-lake-id=\"ueba28259\" id=\"ueba28259\"><span data-lake-id=\"uae9013d0\" id=\"uae9013d0\">waterfall</span></code><span data-lake-id=\"u8cbdc7df\" id=\"u8cbdc7df\"> 钩子至少要制定一个参数。这种模式用于和 </span><code data-lake-id=\"u545ecafc\" id=\"u545ecafc\"><span data-lake-id=\"ue434a585\" id=\"ue434a585\">ModuleTemplate</span></code><span data-lake-id=\"u7f1cf77e\" id=\"u7f1cf77e\">，</span><code data-lake-id=\"ufde25fca\" id=\"ufde25fca\"><span data-lake-id=\"u8a953f89\" id=\"u8a953f89\">ChunkTemplate</span></code><span data-lake-id=\"ubd3e1585\" id=\"ubd3e1585\"> 等 </span><code data-lake-id=\"u03efa3e5\" id=\"u03efa3e5\"><span data-lake-id=\"ue01253ef\" id=\"ue01253ef\">webpack</span></code><span data-lake-id=\"u788074f7\" id=\"u788074f7\"> 模板相关的 </span><code data-lake-id=\"u42b928b2\" id=\"u42b928b2\"><span data-lake-id=\"ud3fe5797\" id=\"ud3fe5797\">Tapable</span></code><span data-lake-id=\"u5ed2dfca\" id=\"u5ed2dfca\"> 实例。</span></p></blockquote><h3 data-lake-id=\"hLMyk\" id=\"hLMyk\"><span data-lake-id=\"u325abee1\" id=\"u325abee1\">异步 hooks</span></h3><ul list=\"ub5575668\"><li fid=\"u9efc7178\" data-lake-id=\"u07013bf8\" id=\"u07013bf8\"><code data-lake-id=\"u6fd7ac9a\" id=\"u6fd7ac9a\"><span data-lake-id=\"ud6954d05\" id=\"ud6954d05\">Async Series</span></code><span data-lake-id=\"u70d87fe5\" id=\"u70d87fe5\">(异步串联) </span><code data-lake-id=\"u4f9cc733\" id=\"u4f9cc733\"><span data-lake-id=\"ued335ff5\" id=\"ued335ff5\">Hook</span></code></li></ul><ul list=\"ub5575668\" data-lake-indent=\"1\"><li fid=\"ud1b9352c\" data-lake-id=\"u91bee8cd\" id=\"u91bee8cd\"><span data-lake-id=\"u2cbf1d03\" id=\"u2cbf1d03\">通过 </span><code data-lake-id=\"ud21e5735\" id=\"ud21e5735\"><span data-lake-id=\"u5a224590\" id=\"u5a224590\">new AsyncSeriesHook([params])</span></code><span data-lake-id=\"ub81a0bf3\" id=\"ub81a0bf3\">定义。</span></li><li fid=\"ud1b9352c\" data-lake-id=\"u604b8971\" id=\"u604b8971\"><span data-lake-id=\"u079f5afc\" id=\"u079f5afc\">用 </span><code data-lake-id=\"ufcab64a9\" id=\"ufcab64a9\"><span data-lake-id=\"u3cc210e9\" id=\"u3cc210e9\">tap/tapAsync/tapPromise</span></code><span data-lake-id=\"ua4385382\" id=\"ua4385382\">方法绑定。</span></li><li fid=\"ud1b9352c\" data-lake-id=\"u1c1f8d65\" id=\"u1c1f8d65\"><span data-lake-id=\"u4821158e\" id=\"u4821158e\">用 </span><code data-lake-id=\"uc901315f\" id=\"uc901315f\"><span data-lake-id=\"u4f997898\" id=\"u4f997898\">callAsync(...params)</span></code><span data-lake-id=\"udc82e716\" id=\"udc82e716\">方法调用。</span></li></ul><ul list=\"ub5575668\" start=\"2\"><li fid=\"u9efc7178\" data-lake-id=\"ubfbef61f\" id=\"ubfbef61f\" style=\"text-align: left\"><code data-lake-id=\"u5473bb8e\" id=\"u5473bb8e\"><span data-lake-id=\"u24e7c0d7\" id=\"u24e7c0d7\">Async waterfall</span></code><span data-lake-id=\"uda56d9c8\" id=\"uda56d9c8\">(异步瀑布) </span><span data-lake-id=\"u79889b3c\" id=\"u79889b3c\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\">插件会用 </span><code data-lake-id=\"u8ed3e438\" id=\"u8ed3e438\"><span data-lake-id=\"u15af3d4f\" id=\"u15af3d4f\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\">waterfall</span></code><span data-lake-id=\"u4830d7b5\" id=\"u4830d7b5\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\"> 方式异步应用</span></li></ul><ul list=\"ub5575668\" data-lake-indent=\"1\"><li fid=\"u9efc7178\" data-lake-id=\"u52036dfa\" id=\"u52036dfa\"><span data-lake-id=\"ufbe46fb8\" id=\"ufbe46fb8\">通过 </span><code data-lake-id=\"u61e4d803\" id=\"u61e4d803\"><span data-lake-id=\"ue0d712a1\" id=\"ue0d712a1\">new AsyncWaterfallHook([params])</span></code><span data-lake-id=\"ua6f1c915\" id=\"ua6f1c915\">定义。</span></li><li fid=\"u9efc7178\" data-lake-id=\"u5caceddc\" id=\"u5caceddc\"><span data-lake-id=\"u9e21b2b6\" id=\"u9e21b2b6\">用 </span><code data-lake-id=\"ueafb29ec\" id=\"ueafb29ec\"><span data-lake-id=\"ua60c966f\" id=\"ua60c966f\">tap/tapAsync/tapPromise</span></code><span data-lake-id=\"u873658c0\" id=\"u873658c0\">方法绑定。</span></li><li fid=\"u9efc7178\" data-lake-id=\"u81309fc1\" id=\"u81309fc1\"><span data-lake-id=\"u31bc0ef8\" id=\"u31bc0ef8\">用 </span><code data-lake-id=\"ucd59005d\" id=\"ucd59005d\"><span data-lake-id=\"u2e7fb8f2\" id=\"u2e7fb8f2\">callAsync(...params)</span></code><span data-lake-id=\"u626eef9a\" id=\"u626eef9a\">方法调用。</span></li></ul><blockquote data-lake-id=\"u62fdfbec\" id=\"u62fdfbec\" class=\"lake-alert lake-alert-info\"><p data-lake-id=\"u09896960\" id=\"u09896960\"><span data-lake-id=\"uf362b135\" id=\"uf362b135\">插件处理函数的参数为当前值，以及一个签名为 </span><code data-lake-id=\"ub0c6f5f5\" id=\"ub0c6f5f5\"><span data-lake-id=\"uef177660\" id=\"uef177660\">(err: Error, nextValue: any) -&gt; void</span></code><span data-lake-id=\"u9aadd3e3\" id=\"u9aadd3e3\">的 </span><code data-lake-id=\"u6aa1bc5d\" id=\"u6aa1bc5d\"><span data-lake-id=\"uadf02d04\" id=\"uadf02d04\">callback</span></code><span data-lake-id=\"ub10b331c\" id=\"ub10b331c\">函数。调用时 </span><code data-lake-id=\"ua85d27c1\" id=\"ua85d27c1\"><span data-lake-id=\"ufd7d2814\" id=\"ufd7d2814\">nextValue</span></code><span data-lake-id=\"uaf37d8fa\" id=\"uaf37d8fa\">是下一个处理函数的当前值。第一个处理函数的当前是只 </span><code data-lake-id=\"u2193229d\" id=\"u2193229d\"><span data-lake-id=\"u39864953\" id=\"u39864953\">init</span></code><span data-lake-id=\"ue6c0ec2a\" id=\"ue6c0ec2a\">。当所有 </span><code data-lake-id=\"u1b399a7a\" id=\"u1b399a7a\"><span data-lake-id=\"u79871905\" id=\"u79871905\">handler</span></code><span data-lake-id=\"u938d44df\" id=\"u938d44df\">都执行后，</span><code data-lake-id=\"ubebe8867\" id=\"ubebe8867\"><span data-lake-id=\"uc0c47bd8\" id=\"uc0c47bd8\">callback</span></code><span data-lake-id=\"u1c76211c\" id=\"u1c76211c\">执行，参数为最后一个值。任一个 </span><code data-lake-id=\"ub859c1b9\" id=\"ub859c1b9\"><span data-lake-id=\"u7732108f\" id=\"u7732108f\">handler</span></code><span data-lake-id=\"u9671d50c\" id=\"u9671d50c\">传入 </span><code data-lake-id=\"u6303c156\" id=\"u6303c156\"><span data-lake-id=\"u0f3b21ad\" id=\"u0f3b21ad\">err</span></code><span data-lake-id=\"u9d59fd1d\" id=\"u9d59fd1d\">值，停止调用 </span><code data-lake-id=\"u402d94df\" id=\"u402d94df\"><span data-lake-id=\"ud5a25547\" id=\"ud5a25547\">handler</span></code><span data-lake-id=\"u572e43af\" id=\"u572e43af\">且 </span><code data-lake-id=\"u8350347c\" id=\"u8350347c\"><span data-lake-id=\"u77beedae\" id=\"u77beedae\">callback</span></code><span data-lake-id=\"u7d2e6443\" id=\"u7d2e6443\">被调用。 这种模式在 </span><code data-lake-id=\"ud1fc0243\" id=\"ud1fc0243\"><span data-lake-id=\"u31a1b029\" id=\"u31a1b029\">before-resolve</span></code><span data-lake-id=\"ue4a67a0d\" id=\"ue4a67a0d\">和 </span><code data-lake-id=\"u1845bf2a\" id=\"u1845bf2a\"><span data-lake-id=\"uf83e8924\" id=\"uf83e8924\">after-resolve</span></code><span data-lake-id=\"u7fb09639\" id=\"u7fb09639\">事件中常见。</span></p></blockquote><ul list=\"u70984c2d\"><li fid=\"u3c8e5bea\" data-lake-id=\"uf6b4f983\" id=\"uf6b4f983\"><span data-lake-id=\"uf0b4d111\" id=\"uf0b4d111\">Async Series Bail</span></li></ul><ul list=\"u70984c2d\" data-lake-indent=\"1\"><li fid=\"uc50f062e\" data-lake-id=\"u3a4d2fd9\" id=\"u3a4d2fd9\"><span data-lake-id=\"u252ee81e\" id=\"u252ee81e\">通过 </span><code data-lake-id=\"ua02ff262\" id=\"ua02ff262\"><span data-lake-id=\"uc2ac8095\" id=\"uc2ac8095\">new AsyncSeriesBailHook([params]) </span></code><span data-lake-id=\"u0935032a\" id=\"u0935032a\">定义。</span></li><li fid=\"uc50f062e\" data-lake-id=\"u315cf4ba\" id=\"u315cf4ba\"><span data-lake-id=\"u930e8d1f\" id=\"u930e8d1f\">用 </span><code data-lake-id=\"ucc7b7137\" id=\"ucc7b7137\"><span data-lake-id=\"uc9d4abda\" id=\"uc9d4abda\">tap/tapAsync/tapPromise</span></code><span data-lake-id=\"udf961dbd\" id=\"udf961dbd\"> 方法绑定。</span></li><li fid=\"uc50f062e\" data-lake-id=\"ucee4a914\" id=\"ucee4a914\"><span data-lake-id=\"uce247a19\" id=\"uce247a19\">用 </span><code data-lake-id=\"u2288b116\" id=\"u2288b116\"><span data-lake-id=\"u277b2a61\" id=\"u277b2a61\">callAsync(...params)</span></code><span data-lake-id=\"ub776f835\" id=\"ub776f835\"> 方法调用。</span></li></ul><ul list=\"u70984c2d\" start=\"2\"><li fid=\"u3c8e5bea\" data-lake-id=\"u9aed82a4\" id=\"u9aed82a4\"><span data-lake-id=\"ucb82584f\" id=\"ucb82584f\">Async Parallel</span></li></ul><ul list=\"u70984c2d\" data-lake-indent=\"1\"><li fid=\"u020dfc22\" data-lake-id=\"ude6b1c59\" id=\"ude6b1c59\"><span data-lake-id=\"u8caf4ca5\" id=\"u8caf4ca5\">通过 </span><code data-lake-id=\"uf44c5bb1\" id=\"uf44c5bb1\"><span data-lake-id=\"uf18c177e\" id=\"uf18c177e\">new AsyncParallelHook([params])</span></code><span data-lake-id=\"ub417c90b\" id=\"ub417c90b\"> 定义。</span></li><li fid=\"u020dfc22\" data-lake-id=\"uf5c3172f\" id=\"uf5c3172f\"><span data-lake-id=\"u2c989d68\" id=\"u2c989d68\">用 </span><code data-lake-id=\"uce8e56d6\" id=\"uce8e56d6\"><span data-lake-id=\"ub5225340\" id=\"ub5225340\">tap/tapAsync/tapPromise</span></code><span data-lake-id=\"u573a91c4\" id=\"u573a91c4\"> 方法绑定。</span></li><li fid=\"u020dfc22\" data-lake-id=\"u1f58da73\" id=\"u1f58da73\"><span data-lake-id=\"u1fd64de2\" id=\"u1fd64de2\">用 </span><code data-lake-id=\"u79d4977b\" id=\"u79d4977b\"><span data-lake-id=\"u931373c4\" id=\"u931373c4\">callAsync(...params)</span></code><span data-lake-id=\"u9666cc8d\" id=\"u9666cc8d\"> 方法调用。</span></li></ul><h3 data-lake-id=\"jW5lj\" id=\"jW5lj\"><span data-lake-id=\"u004ce978\" id=\"u004ce978\">案例</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22%2F%2F%20%E4%B8%80%E4%B8%AA%20JavaScript%20%E7%B1%BB%5Cnclass%20MyExampleWebpackPlugin%20%7B%5Cn%20%20%2F%2F%20%E5%9C%A8%E6%8F%92%E4%BB%B6%E5%87%BD%E6%95%B0%E7%9A%84%20prototype%20%E4%B8%8A%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%20%60apply%60%20%E6%96%B9%E6%B3%95%EF%BC%8C%E4%BB%A5%20compiler%20%E4%B8%BA%E5%8F%82%E6%95%B0%5Cn%20%20apply(compiler)%20%7B%5Cn%20%20%20%20%2F%2F%20%E6%8C%87%E5%AE%9A%E4%B8%80%E4%B8%AA%E6%8C%82%E8%BD%BD%E5%88%B0%20webpack%20%E8%87%AA%E8%BA%AB%E7%9A%84%E4%BA%8B%E4%BB%B6%E9%92%A9%E5%AD%90%5Cn%20%20%20%20compiler.hooks.emit.tapAsync('MyExampleWebpackPLugin'%2C%20(compilation%2C%20callback)%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20console.log('%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%20example%20plugin')%5Cn%20%20%20%20%20%20console.log('%E8%B5%84%E6%BA%90%E5%8D%95%E6%AC%A1%E6%9E%84%E5%BB%BA%E7%9A%84%20compilation%20%E5%AF%B9%E8%B1%A1'%2C%20%20compilation)%5Cn%20%20%20%20%20%20%2F%2F%20%E7%94%A8%20webpack%20%E6%8F%90%E4%BE%9B%E7%9A%84%E6%8F%92%E4%BB%B6%20api%20%E5%A4%84%E7%90%86%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B%5Cn%20%20%20%20%20%20compilation.addModule(%2F*%20...%20*%2F)%5Cn%20%20%20%20%20%20callback()%5Cn%20%20%20%20%7D)%5Cn%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ZTbPa%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"u46684b26\"><li fid=\"uc7a10cb9\" data-lake-id=\"u0ce42dae\" id=\"u0ce42dae\"><span data-lake-id=\"u873341c0\" id=\"u873341c0\">案例一</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22const%20%7B%20validate%20%7D%20%3D%20require(%5C%22schema-utils%5C%22)%5Cn%5Cn%2F%2F%20%E9%80%89%E9%A1%B9%E5%AF%B9%E8%B1%A1%E7%9A%84%20schema%5Cnconst%20schema%20%3D%20%7B%5Cn%20%20%20%20type%3A%20%5C%22object%5C%22%2C%5Cn%20%20%20%20properties%3A%20%7B%5Cn%20%20%20%20%20%20%20%20test%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%5C%22string%5C%22%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%5Cnclass%20HelloWorldPlugin%20%7B%5Cn%20%20%20%20constructor(options%20%3D%20%7B%7D)%20%7B%5Cn%20%20%20%20%20%20%20%20validate(schema%2C%20options%2C%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%5C%22hello%20world%20plugin%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20baseDataPath%3A%20%5C%22options%5C%22%5Cn%20%20%20%20%20%20%20%20%7D)%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20apply(compiler)%20%7B%5Cn%20%20%20%20%20%20%20%20compiler.hooks.done.tap(%5C%22hello%20world%20plugin%5C%22%2C%20stats%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20console.log(%5C%22hello%2C%20world!%5C%22)%5Cn%20%20%20%20%20%20%20%20%7D)%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%5Cnmodule.exports%20%3D%20HelloWorldPlugin%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22OqY9C%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"uac83ba9a\"><li fid=\"u33ff2da0\" data-lake-id=\"u3af05610\" id=\"u3af05610\"><span data-lake-id=\"u6d959955\" id=\"u6d959955\">案例二</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22class%20HelloCompilationPlugin%20%7B%5Cn%20%20%20%20apply(compiler)%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E6%8C%87%E5%AE%9A%E4%B8%80%E4%B8%AA%E6%8C%82%E8%BD%BD%E5%88%B0%20compilation%20%E7%9A%84%E9%92%A9%E5%AD%90%EF%BC%8C%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0%E4%B8%BA%20compilation%5Cn%20%20%20%20%20%20%20%20compiler.hooks.compilation.tap('HelloCompilationPlugin'%2C%20compilation%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E7%8E%B0%E5%9C%A8%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%20compilation%20%E5%AF%B9%E8%B1%A1%E7%BB%91%E5%AE%9A%E5%90%84%E7%A7%8D%E9%92%A9%E5%AD%90%5Cn%20%20%20%20%20%20%20%20%20%20%20%20compilation.hooks.optimize.tap('HelloCompilationPlugin'%2C%20()%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('%E8%B5%84%E6%BA%90%E5%B7%B2%E4%BC%98%E5%8C%96%E5%AE%8C%E6%AF%95')%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D)%5Cn%20%20%20%20%20%20%20%20%7D)%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%5Cnmodule.exports%20%3D%20HelloCompilationPlugin%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22iYbzF%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"u4fc83720\"><li fid=\"u4bea30e3\" data-lake-id=\"u096718db\" id=\"u096718db\"><span data-lake-id=\"uce24a4cf\" id=\"uce24a4cf\">案例三(生成一个叫做 </span><code data-lake-id=\"ua7053d9a\" id=\"ua7053d9a\"><span data-lake-id=\"u69d2bfba\" id=\"u69d2bfba\">assets.md</span></code><span data-lake-id=\"u9d018599\" id=\"u9d018599\"> 的新文件；文件内容是所有构建生成的文件的列表)</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22class%20FileListPlugin%20%7B%5Cn%20%20static%20defaultOptions%20%3D%20%7B%5Cn%20%20%20%20outputFile%3A%20'assets.md'%2C%5Cn%20%20%7D%3B%5Cn%5Cn%20%20%2F%2F%20%E9%9C%80%E8%A6%81%E4%BC%A0%E5%85%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%92%E4%BB%B6%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E4%BB%BB%E6%84%8F%E9%80%89%E9%A1%B9%5Cn%20%20%2F%2F%EF%BC%88%E8%BF%99%E6%98%AF%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%92%E4%BB%B6%E7%9A%84%E5%85%AC%E5%BC%80API%EF%BC%89%5Cn%20%20constructor(options%20%3D%20%7B%7D)%20%7B%5Cn%20%20%20%20%2F%2F%20%E5%9C%A8%E5%BA%94%E7%94%A8%E9%BB%98%E8%AE%A4%E9%80%89%E9%A1%B9%E5%89%8D%EF%BC%8C%E5%85%88%E5%BA%94%E7%94%A8%E7%94%A8%E6%88%B7%E6%8C%87%E5%AE%9A%E9%80%89%E9%A1%B9%5Cn%20%20%20%20%2F%2F%20%E5%90%88%E5%B9%B6%E5%90%8E%E7%9A%84%E9%80%89%E9%A1%B9%E6%9A%B4%E9%9C%B2%E7%BB%99%E6%8F%92%E4%BB%B6%E6%96%B9%E6%B3%95%5Cn%20%20%20%20%2F%2F%20%E8%AE%B0%E5%BE%97%E5%9C%A8%E8%BF%99%E9%87%8C%E6%A0%A1%E9%AA%8C%E6%89%80%E6%9C%89%E9%80%89%E9%A1%B9%5Cn%20%20%20%20this.options%20%3D%20%7B%20...FileListPlugin.defaultOptions%2C%20...options%20%7D%3B%5Cn%20%20%7D%5Cn%5Cn%20%20apply(compiler)%20%7B%5Cn%20%20%20%20const%20pluginName%20%3D%20FileListPlugin.name%3B%5Cn%5Cn%20%20%20%20%2F%2F%20webpack%20%E6%A8%A1%E5%9D%97%E5%AE%9E%E4%BE%8B%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%20compiler%20%E5%AF%B9%E8%B1%A1%E8%AE%BF%E9%97%AE%EF%BC%8C%5Cn%20%20%20%20%2F%2F%20%E8%BF%99%E6%A0%B7%E7%A1%AE%E4%BF%9D%E4%BD%BF%E7%94%A8%E7%9A%84%E6%98%AF%E6%A8%A1%E5%9D%97%E7%9A%84%E6%AD%A3%E7%A1%AE%E7%89%88%E6%9C%AC%5Cn%20%20%20%20%2F%2F%20%EF%BC%88%E4%B8%8D%E8%A6%81%E7%9B%B4%E6%8E%A5%20require%2Fimport%20webpack%EF%BC%89%5Cn%20%20%20%20const%20%7B%20webpack%20%7D%20%3D%20compiler%3B%5Cn%5Cn%20%20%20%20%2F%2F%20Compilation%20%E5%AF%B9%E8%B1%A1%E6%8F%90%E4%BE%9B%E4%BA%86%E5%AF%B9%E4%B8%80%E4%BA%9B%E6%9C%89%E7%94%A8%E5%B8%B8%E9%87%8F%E7%9A%84%E8%AE%BF%E9%97%AE%E3%80%82%5Cn%20%20%20%20const%20%7B%20Compilation%20%7D%20%3D%20webpack%3B%5Cn%5Cn%20%20%20%20%2F%2F%20RawSource%20%E6%98%AF%E5%85%B6%E4%B8%AD%E4%B8%80%E7%A7%8D%20%E2%80%9C%E6%BA%90%E7%A0%81%E2%80%9D(%5C%22sources%5C%22)%20%E7%B1%BB%E5%9E%8B%EF%BC%8C%5Cn%20%20%20%20%2F%2F%20%E7%94%A8%E6%9D%A5%E5%9C%A8%20compilation%20%E4%B8%AD%E8%A1%A8%E7%A4%BA%E8%B5%84%E6%BA%90%E7%9A%84%E6%BA%90%E7%A0%81%5Cn%20%20%20%20const%20%7B%20RawSource%20%7D%20%3D%20webpack.sources%3B%5Cn%5Cn%20%20%20%20%2F%2F%20%E7%BB%91%E5%AE%9A%E5%88%B0%20%E2%80%9CthisCompilation%E2%80%9D%20%E9%92%A9%E5%AD%90%EF%BC%8C%5Cn%20%20%20%20%2F%2F%20%E4%BB%A5%E4%BE%BF%E8%BF%9B%E4%B8%80%E6%AD%A5%E7%BB%91%E5%AE%9A%E5%88%B0%20compilation%20%E8%BF%87%E7%A8%8B%E6%9B%B4%E6%97%A9%E6%9C%9F%E7%9A%84%E9%98%B6%E6%AE%B5%5Cn%20%20%20%20compiler.hooks.thisCompilation.tap(pluginName%2C%20(compilation)%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%2F%2F%20%E7%BB%91%E5%AE%9A%E5%88%B0%E8%B5%84%E6%BA%90%E5%A4%84%E7%90%86%E6%B5%81%E6%B0%B4%E7%BA%BF(assets%20processing%20pipeline)%5Cn%20%20%20%20%20%20compilation.hooks.processAssets.tap(%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20name%3A%20pluginName%2C%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E7%94%A8%E6%9F%90%E4%B8%AA%E9%9D%A0%E5%90%8E%E7%9A%84%E8%B5%84%E6%BA%90%E5%A4%84%E7%90%86%E9%98%B6%E6%AE%B5%EF%BC%8C%5Cn%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E7%A1%AE%E4%BF%9D%E6%89%80%E6%9C%89%E8%B5%84%E6%BA%90%E5%B7%B2%E8%A2%AB%E6%8F%92%E4%BB%B6%E6%B7%BB%E5%8A%A0%E5%88%B0%20compilation%5Cn%20%20%20%20%20%20%20%20%20%20stage%3A%20Compilation.PROCESS_ASSETS_STAGE_SUMMARIZE%2C%5Cn%20%20%20%20%20%20%20%20%7D%2C%5Cn%20%20%20%20%20%20%20%20(assets)%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%2F%2F%20%5C%22assets%5C%22%20%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8C%85%E5%90%AB%20compilation%20%E4%B8%AD%E6%89%80%E6%9C%89%E8%B5%84%E6%BA%90(assets)%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%5Cn%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%AF%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%94%AE%E6%98%AF%E8%B5%84%E6%BA%90%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%8C%5Cn%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%80%BC%E6%98%AF%E6%96%87%E4%BB%B6%E7%9A%84%E6%BA%90%E7%A0%81%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E9%81%8D%E5%8E%86%E6%89%80%E6%9C%89%E8%B5%84%E6%BA%90%EF%BC%8C%5Cn%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E7%94%9F%E6%88%90%20Markdown%20%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E5%AE%B9%5Cn%20%20%20%20%20%20%20%20%20%20const%20content%20%3D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'%23%20In%20this%20build%3A%5C%5Cn%5C%5Cn'%20%2B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Object.keys(assets)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map((filename)%20%3D%3E%20%60-%20%24%7Bfilename%7D%60)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20.join('%5C%5Cn')%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%90%91%20compilation%20%E6%B7%BB%E5%8A%A0%E6%96%B0%E7%9A%84%E8%B5%84%E6%BA%90%EF%BC%8C%5Cn%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E6%A0%B7%20webpack%20%E5%B0%B1%E4%BC%9A%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E5%B9%B6%E8%BE%93%E5%87%BA%E5%88%B0%20output%20%E7%9B%AE%E5%BD%95%5Cn%20%20%20%20%20%20%20%20%20%20compilation.emitAsset(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20this.options.outputFile%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20new%20RawSource(content)%5Cn%20%20%20%20%20%20%20%20%20%20)%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20)%3B%5Cn%20%20%20%20%7D)%3B%5Cn%20%20%7D%5Cn%7D%5Cn%5Cnmodule.exports%20%3D%20%7B%20FileListPlugin%20%7D%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22UmBZX%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22const%20%7B%20FileListPlugin%20%7D%20%3D%20require('.%2Ffile-list-plugin.js')%3B%5Cn%5Cn%2F%2F%20%E5%9C%A8%20webpack%20%E9%85%8D%E7%BD%AE%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E6%8F%92%E4%BB%B6%EF%BC%9A%5Cnmodule.exports%20%3D%20%7B%5Cn%20%20%2F%2F%20%E2%80%A6%5Cn%5Cn%20%20plugins%3A%20%5B%5Cn%20%20%20%20%2F%2F%20%E6%B7%BB%E5%8A%A0%E6%8F%92%E4%BB%B6%EF%BC%8C%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E9%80%89%E9%A1%B9%5Cn%20%20%20%20new%20FileListPlugin()%2C%5Cn%5Cn%20%20%20%20%2F%2F%20%E6%88%96%E8%80%85%3A%5Cn%5Cn%20%20%20%20%2F%2F%20%E4%BD%BF%E7%94%A8%E4%BB%BB%E6%84%8F%E6%94%AF%E6%8C%81%E7%9A%84%E9%80%89%E9%A1%B9%5Cn%20%20%20%20new%20FileListPlugin(%7B%5Cn%20%20%20%20%20%20outputFile%3A%20'my-assets.md'%2C%5Cn%20%20%20%20%7D)%2C%5Cn%20%20%5D%2C%5Cn%7D%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22iOg4N%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uced70a02\" id=\"uced70a02\"><span data-lake-id=\"u1c368ea3\" id=\"u1c368ea3\">这样就生成了一个指定名称的 </span><code data-lake-id=\"u0dc2bc3f\" id=\"u0dc2bc3f\"><span data-lake-id=\"u3a49809e\" id=\"u3a49809e\">markdown</span></code><span data-lake-id=\"uf6b472c5\" id=\"uf6b472c5\"> 文件：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22%23%20In%20this%20build%3A%5Cn%5Cn-%20main.css%5Cn-%20main.js%5Cn-%20index.html%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22zydVx%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"NLgvK\" id=\"NLgvK\"><span data-lake-id=\"ue79d0262\" id=\"ue79d0262\">异步编译插件</span></h4><p data-lake-id=\"u6063c110\" id=\"u6063c110\"><span data-lake-id=\"u0c771f45\" id=\"u0c771f45\">有些插件钩子是异步的。我们可以像同步方式一样用 </span><code data-lake-id=\"ue5b75b8c\" id=\"ue5b75b8c\"><span data-lake-id=\"u1b3f3758\" id=\"u1b3f3758\">tap</span></code><span data-lake-id=\"u7384882f\" id=\"u7384882f\"> 方法来绑定，也可以用 </span><code data-lake-id=\"u6ca8c5b3\" id=\"u6ca8c5b3\"><span data-lake-id=\"u3e494d90\" id=\"u3e494d90\">tapAsync</span></code><span data-lake-id=\"ua01b4630\" id=\"ua01b4630\"> 或 </span><code data-lake-id=\"u653d5a00\" id=\"u653d5a00\"><span data-lake-id=\"u4914c151\" id=\"u4914c151\">tapPromise</span></code><span data-lake-id=\"u9a31e762\" id=\"u9a31e762\"> 这两个异步方法来绑定。</span></p><h5 data-lake-id=\"PbqEc\" id=\"PbqEc\"><span data-lake-id=\"uda0405ff\" id=\"uda0405ff\">tapAsync</span></h5><p data-lake-id=\"u28f4fffc\" id=\"u28f4fffc\"><span data-lake-id=\"udf5d1cf3\" id=\"udf5d1cf3\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\">当我们用 </span><code data-lake-id=\"ubdca6d12\" id=\"ubdca6d12\"><span data-lake-id=\"u0d2ee175\" id=\"u0d2ee175\">tapAsync</span></code><span data-lake-id=\"u4f09053d\" id=\"u4f09053d\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\"> 方法来绑定插件时，必须调用函数的最后一个参数 </span><code data-lake-id=\"u28b2507b\" id=\"u28b2507b\"><span data-lake-id=\"u253e984e\" id=\"u253e984e\">callback</span></code><span data-lake-id=\"uc8ca3c99\" id=\"uc8ca3c99\" class=\"lake-fontsize-12\" style=\"color: rgb(43, 58, 66)\"> 指定的回调函数。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22class%20HelloAsyncPlugin%20%7B%5Cn%20%20apply(compiler)%20%7B%5Cn%20%20%20%20compiler.hooks.emit.tapAsync('HelloAsyncPlugin'%2C%20(compilation%2C%20callback)%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%20%20console.log('%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E5%AE%8C%E6%88%90...')%5Cn%20%20%20%20%20%20%20%20callback()%5Cn%20%20%20%20%20%20%7D%2C%201000)%5Cn%20%20%20%20%7D)%5Cn%20%20%7D%5Cn%7D%5Cnmodule.exports%20%3D%20HelloAsyncPlugin%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22rBch1%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h5 data-lake-id=\"i7T1y\" id=\"i7T1y\"><span data-lake-id=\"ud0ca70a6\" id=\"ud0ca70a6\">tapPromise</span></h5><p data-lake-id=\"u56c43776\" id=\"u56c43776\"><span data-lake-id=\"ucfc07861\" id=\"ucfc07861\" class=\"lake-fontsize-12\">当我们用 </span><code data-lake-id=\"u571435f6\" id=\"u571435f6\"><span data-lake-id=\"u5c31865a\" id=\"u5c31865a\" class=\"lake-fontsize-12\">tapPromise</span></code><span data-lake-id=\"u13480d79\" id=\"u13480d79\" class=\"lake-fontsize-12\"> 方法来绑定插件时，必须返回一个 </span><code data-lake-id=\"u292f3bd2\" id=\"u292f3bd2\"><span data-lake-id=\"ua1ae6568\" id=\"ua1ae6568\" class=\"lake-fontsize-12\">promise</span></code><span data-lake-id=\"u76e8a745\" id=\"u76e8a745\" class=\"lake-fontsize-12\">，异步任务完成后 </span><code data-lake-id=\"ua90c623d\" id=\"ua90c623d\"><span data-lake-id=\"u8fc6b3f4\" id=\"u8fc6b3f4\" class=\"lake-fontsize-12\">resolve</span></code></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22class%20HelloAsyncPlugin%20%7B%5Cn%20%20apply(compiler)%20%7B%5Cn%20%20%20%20compiler.hooks.emit.tapPromise('HelloAsyncPlugin'%2C%20compilation%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%2F%2F%20%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%20promise%EF%BC%8C%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E5%AE%8C%E6%88%90%E5%90%8E%20resolve%5Cn%20%20%20%20%20%20return%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20console.log('%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E5%AE%8C%E6%88%90...')%5Cn%20%20%20%20%20%20%20%20%20%20resolve()%5Cn%20%20%20%20%20%20%20%20%7D%2C%201000)%5Cn%20%20%20%20%20%20%7D)%5Cn%20%20%20%20%7D)%5Cn%20%20%7D%5Cn%7D%5Cnmodule.exports%20%3D%20HelloAsyncPlugin%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22mXEW4%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"ByCN1\" id=\"ByCN1\"><span data-lake-id=\"u9f74088b\" id=\"u9f74088b\">编写一个支持 Gzip 和 Brotli 压缩插件实践</span></h3><p data-lake-id=\"ud0c25058\" id=\"ud0c25058\"><span data-lake-id=\"u66e24ee7\" id=\"u66e24ee7\" class=\"lake-fontsize-12\">压缩核心功能依赖</span><code data-lake-id=\"u219cbb24\" id=\"u219cbb24\"><span data-lake-id=\"u7ec8954f\" id=\"u7ec8954f\" class=\"lake-fontsize-12\">Node zlib</span></code><span data-lake-id=\"u08382614\" id=\"u08382614\" class=\"lake-fontsize-12\">模块处理编译后的资源即可</span></p><ul list=\"ufaf934ad\"><li fid=\"u65f9fa88\" data-lake-id=\"u1c7fb145\" id=\"u1c7fb145\"><code data-lake-id=\"uf2132c9e\" id=\"uf2132c9e\"><span data-lake-id=\"u62012ace\" id=\"u62012ace\" class=\"lake-fontsize-12\">plugin</span></code><span data-lake-id=\"u0c90986f\" id=\"u0c90986f\" class=\"lake-fontsize-12\">功能模块</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22const%20zlib%20%3D%20require('zlib')%3B%5Cn%5Cnconst%20DEFAULT_COMPRESS_OPTIONS%20%3D%20%7B%5Cn%20%20deleteOriginalAssets%3A%20false%2C%20%2F%2F%20%E6%98%AF%E5%90%A6%E5%88%A0%E9%99%A4%E5%8E%8B%E7%BC%A9%E5%89%8D%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%8C%E7%9C%8B%E6%83%85%E5%86%B5%E9%85%8D%E7%BD%AE%5Cn%20%20algorithm%3A%20'gzip'%2C%20%2F%2F%20%E5%8E%8B%E7%BC%A9%E7%AE%97%E6%B3%95%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%B0%B1%E6%98%AFgzip%5Cn%20%20test%3A%20%2F.%2F%2C%20%2F%2F%20%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6%E9%83%BD%E5%8E%8B%E7%BC%A9%5Cn%20%20threshold%3A%201000%2C%20%2F%2F%20%E5%8F%AA%E5%A4%84%E7%90%86%E6%AF%94%E8%BF%99%E4%B8%AA%E5%80%BC%E5%A4%A7%E7%9A%84%E8%B5%84%E6%BA%90%E3%80%82%E6%8C%89%E5%AD%97%E8%8A%82%E8%AE%A1%E7%AE%97%5Cn%20%20minRatio%3A%200.8%2C%20%2F%2F%20%E5%8F%AA%E6%9C%89%E5%8E%8B%E7%BC%A9%E7%8E%87%E6%AF%94%E8%BF%99%E4%B8%AA%E5%80%BC%E5%B0%8F%E7%9A%84%E8%B5%84%E6%BA%90%E6%89%8D%E4%BC%9A%E8%A2%AB%E5%A4%84%E7%90%86%5Cn%7D%3B%5Cn%5Cnclass%20CompressPlugin%20%7B%5Cn%20%20constructor(options%20%3D%20%7B%7D)%20%7B%5Cn%20%20%20%20this.options%20%3D%20%7B%5Cn%20%20%20%20%20%20...DEFAULT_COMPRESS_OPTIONS%2C%5Cn%20%20%20%20%20%20...options%2C%5Cn%20%20%20%20%7D%3B%5Cn%20%20%7D%5Cn%5Cn%20%20compressSync(buf)%20%7B%5Cn%20%20%20%20const%20%7B%20algorithm%20%7D%20%3D%20this.options%3B%5Cn%20%20%20%20switch%20(algorithm.toLowerCase())%20%7B%5Cn%20%20%20%20%20%20case%20'brotli'%3A%5Cn%20%20%20%20%20%20%20%20return%20zlib.brotliCompressSync(buf)%3B%5Cn%20%20%20%20%20%20case%20'gzip'%3A%5Cn%20%20%20%20%20%20%20%20return%20zlib.gzipSync(buf)%3B%5Cn%20%20%20%20%20%20default%3A%5Cn%20%20%20%20%20%20%20%20return%20buf%3B%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%20%20getComporessedName(filename)%20%7B%5Cn%20%20%20%20const%20%7B%20algorithm%20%7D%20%3D%20this.options%3B%5Cn%20%20%20%20switch%20(algorithm.toLowerCase())%20%7B%5Cn%20%20%20%20%20%20case%20'brotli'%3A%5Cn%20%20%20%20%20%20%20%20return%20%60%24%7Bfilename%7D.br%60%3B%5Cn%20%20%20%20%20%20case%20'gzip'%3A%5Cn%20%20%20%20%20%20%20%20return%20%60%24%7Bfilename%7D.gz%60%3B%5Cn%20%20%20%20%20%20default%3A%5Cn%20%20%20%20%20%20%20%20return%20filename%3B%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%20%20apply(compiler)%20%7B%5Cn%20%20%20%20const%20%7B%20deleteOriginalAssets%2C%20test%2C%20threshold%2C%20minRatio%20%7D%20%3D%20this.options%3B%5Cn%5Cn%20%20%20%20compiler.hooks.emit.tap('CompressPlugin'%2C%20compilation%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20const%20assets%20%3D%20compilation.assets%3B%5Cn%20%20%20%20%20%20Object.keys(assets).forEach(filename%20%3D%3E%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E6%8C%89%E6%96%87%E4%BB%B6%E5%90%8D%E8%BF%87%E6%BB%A4%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%B8%8D%E8%BF%87%E6%BB%A4%5Cn%20%20%20%20%20%20%20%20if%20(!test.test(filename))%20return%3B%5Cn%20%20%20%20%20%20%20%20const%20asset%20%3D%20assets%5Bfilename%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E5%8F%AA%E5%A4%84%E7%90%86%E6%AF%94%E8%BF%99%E4%B8%AA%E5%80%BC%E5%A4%A7%E7%9A%84%E8%B5%84%E6%BA%90%E3%80%82%E6%8C%89%E5%AD%97%E8%8A%82%E8%AE%A1%E7%AE%97%5Cn%20%20%20%20%20%20%20%20if%20(asset.size()%20%3C%3D%20threshold)%20return%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E4%B8%8D%E6%94%AF%E6%8C%81%E7%9A%84%E5%8E%8B%E7%BC%A9%E6%96%B9%E5%BC%8F%E4%B8%8D%E5%A4%84%E7%90%86%5Cn%20%20%20%20%20%20%20%20const%20compressedAssetName%20%3D%20this.getComporessedName(filename)%3B%5Cn%20%20%20%20%20%20%20%20if%20(filename%20%3D%3D%3D%20compressedAssetName)%20return%3B%5Cn%20%20%20%20%20%20%20%20const%20compressedAsset%20%3D%20this.compressSync(asset.source())%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%94%E5%9B%9E%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%EF%BC%8C%20%E6%8C%89%E5%AD%97%E8%8A%82%E7%AE%97%5Cn%20%20%20%20%20%20%20%20const%20compressedAssetSize%20%3D%20Buffer.isBuffer(compressedAsset)%5Cn%20%20%20%20%20%20%20%20%20%20%3F%20Buffer.byteLength(compressedAsset%2C%20'utf8')%5Cn%20%20%20%20%20%20%20%20%20%20%3A%20compressedAsset.length%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E5%8F%AA%E6%9C%89%E5%8E%8B%E7%BC%A9%E7%8E%87%E6%AF%94%E8%BF%99%E4%B8%AA%E5%80%BC%E5%B0%8F%E7%9A%84%E8%B5%84%E6%BA%90%E6%89%8D%E4%BC%9A%E8%A2%AB%E5%A4%84%E7%90%86%5Cn%20%20%20%20%20%20%20%20if%20(compressedAssetSize%20%2F%20asset.size()%20%3E%3D%20minRatio)%20return%3B%5Cn%5Cn%20%20%20%20%20%20%20%20assets%5BcompressedAssetName%5D%20%3D%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%94%E5%9B%9E%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%5Cn%20%20%20%20%20%20%20%20%20%20source%3A%20()%20%3D%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20fileContent%20%E6%97%A2%E5%8F%AF%E4%BB%A5%E6%98%AF%E4%BB%A3%E8%A1%A8%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%98%AF%E4%BB%A3%E8%A1%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E7%9A%84%20Buffer%5Cn%20%20%20%20%20%20%20%20%20%20%20%20compressedAsset%2C%5Cn%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%94%E5%9B%9E%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%EF%BC%8C%20%E6%8C%89%E5%AD%97%E8%8A%82%E7%AE%97%5Cn%20%20%20%20%20%20%20%20%20%20size%3A%20()%20%3D%3E%20compressedAssetSize%2C%5Cn%20%20%20%20%20%20%20%20%7D%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E6%98%AF%E5%90%A6%E5%88%A0%E9%99%A4%E5%8E%8B%E7%BC%A9%E5%89%8D%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%8C%E7%9C%8B%E6%83%85%E5%86%B5%E9%85%8D%E7%BD%AE%5Cn%20%20%20%20%20%20%20%20if%20(deleteOriginalAssets)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20delete%20assets%5Bfilename%5D%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%7D)%3B%5Cn%20%20%20%20%7D)%3B%5Cn%20%20%7D%5Cn%7D%5Cn%5Cnmodule.exports%20%3D%20CompressPlugin%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Ni0VQ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"uc0c24378\"><li fid=\"ufdd0a481\" data-lake-id=\"u257c56b5\" id=\"u257c56b5\"><code data-lake-id=\"ubcb652ee\" id=\"ubcb652ee\"><span data-lake-id=\"u89119be3\" id=\"u89119be3\" class=\"lake-fontsize-12\">webpack.config.js</span></code></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22const%20path%20%3D%20require(%5C%22path%5C%22)%5Cnconst%20CompressPlugin%20%3D%20require(%5C%22.%2Fcompress-webpack-plugin%5C%22)%5Cn%5Cnmodule.exports%20%3D%20%7B%5Cn%20%20mode%3A%20%5C%22development%5C%22%2C%5Cn%20%20entry%3A%20%5C%22.%2Fsrc%2Findex.js%5C%22%2C%5Cn%20%20output%3A%20%7B%5Cn%20%20%20%20filename%3A%20%5C%22main.js%5C%22%2C%5Cn%20%20%20%20path%3A%20path.resolve(__dirname%2C%20%5C%22dist%5C%22)%5Cn%20%20%7D%2C%5Cn%20%20plugins%3A%20%5B%5Cn%20%20%20%20new%20CompressPlugin(%7B%5Cn%20%20%20%20%20%20deleteOriginalAssets%3A%20true%2C%20%2F%2F%20%E6%98%AF%E5%90%A6%E5%88%A0%E9%99%A4%E5%8E%8B%E7%BC%A9%E5%89%8D%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%8C%E7%9C%8B%E6%83%85%E5%86%B5%E9%85%8D%E7%BD%AE%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%B8%BA%20false%5Cn%20%20%20%20%20%20algorithm%3A%20%5C%22brotli%5C%22%20%2F%2F%20%E5%8E%8B%E7%BC%A9%E7%AE%97%E6%B3%95%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%98%AF%20gzip%5Cn%20%20%20%20%7D)%5Cn%20%20%5D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22zthOM%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
  "body_draft_lake": "",
  "public": 0,
  "status": 1,
  "view_status": 0,
  "read_status": 1,
  "likes_count": 0,
  "comments_count": 0,
  "content_updated_at": "2022-04-27T08:10:09.000Z",
  "deleted_at": null,
  "created_at": "2022-04-04T11:33:22.000Z",
  "updated_at": "2022-04-27T08:12:21.000Z",
  "published_at": "2022-04-27T08:12:20.000Z",
  "first_published_at": "2022-04-04T11:33:21.887Z",
  "word_count": 5210,
  "cover": null,
  "description": "loader概念：loader 本质是一个函数，loader runner 会调用这个函数，该函数接收一个参数，参数是：上一个 loader 产生的结果 或者 资源文件内容，然后进行转换，返回转换后的结果。函数的 this 上下文将由 webpack 填充，并且 loader runner 具...",
  "custom_description": null,
  "hits": 0,
  "_serializer": "v2.doc_detail"
}