{
  "id": 75214621,
  "slug": "cqgawt",
  "title": "ts 中类型保护",
  "book_id": 26225124,
  "book": {
    "id": 26225124,
    "type": "Book",
    "slug": "mxunh7",
    "name": "八股文 eight-part essay writing",
    "user_id": 732231,
    "description": "前端八股文",
    "creator_id": 732231,
    "public": 0,
    "items_count": 239,
    "likes_count": 0,
    "watches_count": 1,
    "content_updated_at": "2023-11-11T18:15:57.023Z",
    "updated_at": "2023-11-11T18:15:57.000Z",
    "created_at": "2022-04-04T11:31:45.000Z",
    "namespace": "wcywxq/mxunh7",
    "user": {
      "id": 732231,
      "type": "User",
      "login": "wcywxq",
      "name": "magic",
      "description": null,
      "avatar_url": "https://cdn.nlark.com/yuque/0/2020/png/732231/1606968271774-avatar/886ad88b-d2cc-4c9e-a674-f70eb51a679c.png",
      "books_count": 18,
      "public_books_count": 0,
      "followers_count": 0,
      "following_count": 0,
      "created_at": "2020-01-08T14:21:31.000Z",
      "updated_at": "2023-11-13T09:32:35.000Z",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.book"
  },
  "user_id": 732231,
  "creator": {
    "id": 732231,
    "type": "User",
    "login": "wcywxq",
    "name": "magic",
    "description": null,
    "avatar_url": "https://cdn.nlark.com/yuque/0/2020/png/732231/1606968271774-avatar/886ad88b-d2cc-4c9e-a674-f70eb51a679c.png",
    "books_count": 18,
    "public_books_count": 0,
    "followers_count": 0,
    "following_count": 0,
    "created_at": "2020-01-08T14:21:31.000Z",
    "updated_at": "2023-11-13T09:32:35.000Z",
    "_serializer": "v2.user"
  },
  "format": "lake",
  "body": "<a name=\"XbQKL\"></a>\n## 类型保护方法\n<a name=\"hGfCi\"></a>\n### in 关键字\n```typescript\ninterface Admin {\n  name: string;\n  privileges: string[];\n}\n\ninterface Employee {\n  name: string;\n  startDate: Date;\n}\n\ntype UnknownEmployee = Employee | Admin;\n\nfunction printEmployeeInformation(emp: UnknownEmployee) {\n  console.log(\"Name: \" + emp.name);\n  if (\"privileges\" in emp) {\n    console.log(\"Privileges: \" + emp.privileges);\n  }\n  if (\"startDate\" in emp) {\n    console.log(\"Start Date: \" + emp.startDate);\n  }\n}\n```\n<a name=\"pCoLw\"></a>\n### typeof 关键字\n```typescript\nfunction padLeft(value: string, padding: string | number) {\n  if (typeof padding === \"number\") {\n      return Array(padding + 1).join(\" \") + value;\n  }\n  if (typeof padding === \"string\") {\n      return padding + value;\n  }\n  throw new Error(`Expected string or number, got '${padding}'.`);\n}\n```\n<a name=\"TYzkn\"></a>\n### instanceof 关键字\n```typescript\ninterface Padder {\n  getPaddingString(): string;\n}\n\nclass SpaceRepeatingPadder implements Padder {\n  constructor(private numSpaces: number) {}\n  getPaddingString() {\n    return Array(this.numSpaces + 1).join(\" \");\n  }\n}\n\nclass StringPadder implements Padder {\n  constructor(private value: string) {}\n  getPaddingString() {\n    return this.value;\n  }\n}\n\nlet padder: Padder = new SpaceRepeatingPadder(6);\n\nif (padder instanceof SpaceRepeatingPadder) {\n  // padder的类型收窄为 'SpaceRepeatingPadder'\n}\n```\n<a name=\"mO3FF\"></a>\n### 自定义类型保护的类型谓词\n```typescript\nfunction isNumber(x: any): x is number {\n  return typeof x === \"number\"\n}\n\nfunction isString(x: any): x is number {\n  return typeof x === \"string\"\n}\n```\n<a name=\"t1Zfq\"></a>\n## 通用类型保护函数\n```typescript\nfunction is<T>(varToBeChecked: unknown, propertyToCheckFor: keyof T): varToBeChecked is T {\n  return (varToBeChecked as T)[propertyToCheckFor] !== undefined;\n}\n```\n",
  "body_draft": "",
  "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><h2 id=\"XbQKL\"><span class=\"ne-text\">类型保护方法</span></h2><h3 id=\"hGfCi\"><span class=\"ne-text\">in 关键字</span></h3><pre data-language=\"typescript\" id=\"O9sTJ\" class=\"ne-codeblock language-typescript\">interface Admin {\n  name: string;\n  privileges: string[];\n}\n\ninterface Employee {\n  name: string;\n  startDate: Date;\n}\n\ntype UnknownEmployee = Employee | Admin;\n\nfunction printEmployeeInformation(emp: UnknownEmployee) {\n  console.log(&quot;Name: &quot; + emp.name);\n  if (&quot;privileges&quot; in emp) {\n    console.log(&quot;Privileges: &quot; + emp.privileges);\n  }\n  if (&quot;startDate&quot; in emp) {\n    console.log(&quot;Start Date: &quot; + emp.startDate);\n  }\n}</pre><h3 id=\"pCoLw\"><span class=\"ne-text\">typeof 关键字</span></h3><pre data-language=\"typescript\" id=\"CRIMM\" class=\"ne-codeblock language-typescript\">function padLeft(value: string, padding: string | number) {\n  if (typeof padding === &quot;number&quot;) {\n      return Array(padding + 1).join(&quot; &quot;) + value;\n  }\n  if (typeof padding === &quot;string&quot;) {\n      return padding + value;\n  }\n  throw new Error(`Expected string or number, got '${padding}'.`);\n}</pre><h3 id=\"TYzkn\"><span class=\"ne-text\">instanceof 关键字</span></h3><pre data-language=\"typescript\" id=\"Nk9GG\" class=\"ne-codeblock language-typescript\">interface Padder {\n  getPaddingString(): string;\n}\n\nclass SpaceRepeatingPadder implements Padder {\n  constructor(private numSpaces: number) {}\n  getPaddingString() {\n    return Array(this.numSpaces + 1).join(&quot; &quot;);\n  }\n}\n\nclass StringPadder implements Padder {\n  constructor(private value: string) {}\n  getPaddingString() {\n    return this.value;\n  }\n}\n\nlet padder: Padder = new SpaceRepeatingPadder(6);\n\nif (padder instanceof SpaceRepeatingPadder) {\n  // padder的类型收窄为 'SpaceRepeatingPadder'\n}</pre><h3 id=\"mO3FF\"><span class=\"ne-text\">自定义类型保护的类型谓词</span></h3><pre data-language=\"typescript\" id=\"JIdwg\" class=\"ne-codeblock language-typescript\">function isNumber(x: any): x is number {\n  return typeof x === &quot;number&quot;\n}\n\nfunction isString(x: any): x is number {\n  return typeof x === &quot;string&quot;\n}</pre><h2 id=\"t1Zfq\"><span class=\"ne-text\">通用类型保护函数</span></h2><pre data-language=\"typescript\" id=\"ns26o\" class=\"ne-codeblock language-typescript\">function is&lt;T&gt;(varToBeChecked: unknown, propertyToCheckFor: keyof T): varToBeChecked is T {\n  return (varToBeChecked as T)[propertyToCheckFor] !== undefined;\n}</pre></div>",
  "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"adapt\" /><h2 data-lake-id=\"XbQKL\" id=\"XbQKL\"><span data-lake-id=\"uc5c1ef54\" id=\"uc5c1ef54\">类型保护方法</span></h2><h3 data-lake-id=\"hGfCi\" id=\"hGfCi\"><span data-lake-id=\"u297a14c2\" id=\"u297a14c2\">in 关键字</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22typescript%22%2C%22code%22%3A%22interface%20Admin%20%7B%5Cn%20%20name%3A%20string%3B%5Cn%20%20privileges%3A%20string%5B%5D%3B%5Cn%7D%5Cn%5Cninterface%20Employee%20%7B%5Cn%20%20name%3A%20string%3B%5Cn%20%20startDate%3A%20Date%3B%5Cn%7D%5Cn%5Cntype%20UnknownEmployee%20%3D%20Employee%20%7C%20Admin%3B%5Cn%5Cnfunction%20printEmployeeInformation(emp%3A%20UnknownEmployee)%20%7B%5Cn%20%20console.log(%5C%22Name%3A%20%5C%22%20%2B%20emp.name)%3B%5Cn%20%20if%20(%5C%22privileges%5C%22%20in%20emp)%20%7B%5Cn%20%20%20%20console.log(%5C%22Privileges%3A%20%5C%22%20%2B%20emp.privileges)%3B%5Cn%20%20%7D%5Cn%20%20if%20(%5C%22startDate%5C%22%20in%20emp)%20%7B%5Cn%20%20%20%20console.log(%5C%22Start%20Date%3A%20%5C%22%20%2B%20emp.startDate)%3B%5Cn%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22O9sTJ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"pCoLw\" id=\"pCoLw\"><span data-lake-id=\"u8486af16\" id=\"u8486af16\">typeof 关键字</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22typescript%22%2C%22code%22%3A%22function%20padLeft(value%3A%20string%2C%20padding%3A%20string%20%7C%20number)%20%7B%5Cn%20%20if%20(typeof%20padding%20%3D%3D%3D%20%5C%22number%5C%22)%20%7B%5Cn%20%20%20%20%20%20return%20Array(padding%20%2B%201).join(%5C%22%20%5C%22)%20%2B%20value%3B%5Cn%20%20%7D%5Cn%20%20if%20(typeof%20padding%20%3D%3D%3D%20%5C%22string%5C%22)%20%7B%5Cn%20%20%20%20%20%20return%20padding%20%2B%20value%3B%5Cn%20%20%7D%5Cn%20%20throw%20new%20Error(%60Expected%20string%20or%20number%2C%20got%20'%24%7Bpadding%7D'.%60)%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22CRIMM%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"TYzkn\" id=\"TYzkn\"><span data-lake-id=\"u5fbe67d4\" id=\"u5fbe67d4\">instanceof 关键字</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22typescript%22%2C%22code%22%3A%22interface%20Padder%20%7B%5Cn%20%20getPaddingString()%3A%20string%3B%5Cn%7D%5Cn%5Cnclass%20SpaceRepeatingPadder%20implements%20Padder%20%7B%5Cn%20%20constructor(private%20numSpaces%3A%20number)%20%7B%7D%5Cn%20%20getPaddingString()%20%7B%5Cn%20%20%20%20return%20Array(this.numSpaces%20%2B%201).join(%5C%22%20%5C%22)%3B%5Cn%20%20%7D%5Cn%7D%5Cn%5Cnclass%20StringPadder%20implements%20Padder%20%7B%5Cn%20%20constructor(private%20value%3A%20string)%20%7B%7D%5Cn%20%20getPaddingString()%20%7B%5Cn%20%20%20%20return%20this.value%3B%5Cn%20%20%7D%5Cn%7D%5Cn%5Cnlet%20padder%3A%20Padder%20%3D%20new%20SpaceRepeatingPadder(6)%3B%5Cn%5Cnif%20(padder%20instanceof%20SpaceRepeatingPadder)%20%7B%5Cn%20%20%2F%2F%20padder%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%94%B6%E7%AA%84%E4%B8%BA%20'SpaceRepeatingPadder'%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Nk9GG%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"mO3FF\" id=\"mO3FF\"><span data-lake-id=\"ua5b64a13\" id=\"ua5b64a13\">自定义类型保护的类型谓词</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22typescript%22%2C%22code%22%3A%22function%20isNumber(x%3A%20any)%3A%20x%20is%20number%20%7B%5Cn%20%20return%20typeof%20x%20%3D%3D%3D%20%5C%22number%5C%22%5Cn%7D%5Cn%5Cnfunction%20isString(x%3A%20any)%3A%20x%20is%20number%20%7B%5Cn%20%20return%20typeof%20x%20%3D%3D%3D%20%5C%22string%5C%22%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22JIdwg%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"t1Zfq\" id=\"t1Zfq\"><span data-lake-id=\"u5d8fa4ff\" id=\"u5d8fa4ff\">通用类型保护函数</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22typescript%22%2C%22code%22%3A%22function%20is%3CT%3E(varToBeChecked%3A%20unknown%2C%20propertyToCheckFor%3A%20keyof%20T)%3A%20varToBeChecked%20is%20T%20%7B%5Cn%20%20return%20(varToBeChecked%20as%20T)%5BpropertyToCheckFor%5D%20!%3D%3D%20undefined%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ns26o%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
  "body_draft_lake": "",
  "public": 0,
  "status": 1,
  "view_status": 0,
  "read_status": 1,
  "likes_count": 0,
  "comments_count": 0,
  "content_updated_at": "2022-06-26T11:58:24.000Z",
  "deleted_at": null,
  "created_at": "2022-04-26T17:32:50.000Z",
  "updated_at": "2022-06-26T11:58:24.000Z",
  "published_at": "2022-06-26T11:58:24.000Z",
  "first_published_at": "2022-04-26T17:41:04.070Z",
  "word_count": 235,
  "cover": null,
  "description": "类型保护方法in 关键字interface Admin {   name: string;   privileges: string[]; }  interface Employee {   name: string;   startDate: Date; }  type UnknownEmp...",
  "custom_description": null,
  "hits": 0,
  "_serializer": "v2.doc_detail"
}