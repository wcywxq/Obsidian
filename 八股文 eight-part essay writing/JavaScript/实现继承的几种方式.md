---
title: 实现继承的几种方式
url: https://www.yuque.com/wcywxq/mxunh7/ka9kuf
---

<a name="a9eF8"></a>

## 原型链继承

:::info
**核心**：将父类实例作为子类实例
**优点**：因为方法定义在原型上，所以可以做到方法复用
**问题**：子类实例化时不能给父类构造函数传递参数，原型包含的引用类型的属性将被所有实例所共享
:::

```javascript
function Animal() {
	this.colors = ['black', white]
}

Animal.prototype.getColor = function() {
	return this.colors
}

function Dog() {}

Dog.prototype = new Animal()

var husky = new Dog()
husky.colors.push('gray')
var corgi = new Dog()
console.log(husky.getColors(), corgi.getColors())
```

<a name="zLYaC"></a>

## 借用构造函数继承

:::info
**核心**：借用父类的构造函数来增强子类实例 = 复制父类的实例属性给子类
**优点**：实例之间相互独立，可以向父类构造函数传参，解决了引用类型的属性被所有实例所共享的问题
**问题**：方法都定义在构造函数中，无法进行复用；子类实例无法继承父类原型上的属性。
:::

```javascript
function Animal() {
	this.colors =  ['black', 'white']
  this.getColors = function() {
  	return this.colors
  }
}

function Dog() {
	Animal.call(this)
}

var husky = new Dog()
husky.colors.push('gray')
var corgi = new Dog()
console.log(husky.getColors(), corgi.getColors())
```

<a name="mOl0Z"></a>

## 组合式继承

:::info
**核心**：通过调用父类构造函数，继承父类的属性并保留传参的优点；然后通过将父类实例作为子类的原型，实现函数复用
**优点**：保留构造函数的优点，创建子类实例，可以向父类构造函数传参；保留原型链的优点，父类的实例方法定义在父类的原型对象上，可以实现方法的复用。不会共享父类引用类型的属性
**问题**：由于调用了 2 次父类的构造方法，会存在一份多余的父类实例方法。(第一次：`父类.call(this)`，第二次：`子类.prototype = new 父类` )
:::

```javascript
function Animal(name) {
	this.name = name
  this.colors = ['black', 'white']
}

Animal.prototype.getName = function() {
	return this.name
}

function Dog(name, age) {
	Animal.call(this, name)
  this.age = age
}

Dog.prototype = new Animal()
Dog.prototype.constructor = Dog
```

<a name="ONJ3p"></a>

## 寄生组合继承

:::info
为了解决组合式继承调用两次构造函数的问题
解决方案：不直接调用父类构造函数给子类原型赋值，而是通过创建空函数 F 获取父类原型的副本
:::

```javascript
function Animal(name) {
	this.name = name
  this.colors = ['black', 'white']
}

Animal.prototype.getName = function(){
	return this.name
}

function Dog(name, age) {
	Animal.call(this, name)
  this.age = age
}

// 最简单的替换
Dog.prototype = Object.create(Animal.prototype)
Dog.prototype.constructor = Dog

var husky = new Dog('哈士奇', 2)
husky.colors.push('gray')
var corgi = new Dog('柯基', 1)
console.log(husky, corgi)
```

<a name="Ru130"></a>

## es6 继承

```javascript
class Animal {
	constructor(name) {
  	this.name = name
    this.colors = ['black', 'white']
  }
  getColors() {
  	return this.colors
  }
}

class Dog extends Animal {
	constructor(name, age) {
  	this.name = name
    this.age = age
  }
}

var husky = new Dog('哈士奇', 2)
husky.colors.push('gray')
var corgi = new Dog('柯基', 1)
console.log(husky, corgi)
```
