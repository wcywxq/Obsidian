---
title: vue 和 react 中的 key
url: https://www.yuque.com/wcywxq/mxunh7/ycltzx
---

<a name="LrRWN"></a>

## key 的作用

- 在开发过程中，我们需要保证某个元素的 `key` 在其统计元素中具有唯一性
- 在 `vue` 中
  - 如果不使用 `key`，`vue` 默认会使用一种最大限度减少动态元素并且尽可能的尝试就地修改或者复用相同类型元素的做法
  - `key` 是 `vnode` 的唯一标记，用来使 `diff` 节点的操纵更准确、更便捷
    - 更准确：如果元素提供了 `key`，将不会走默认的就地复用逻辑，因此会更加准确
    - 更快捷：如果元素提供了 `key`，将可以利用 `key` 的唯一性生成 `map` 对象来获取对应节点，整体而言比遍历查找的方式更迅速
- 在 `react`中
  - `react` 的 `diff` 算法会借助元素的 `key` 值来判断元素是最新创建的还是被移动而来的元素，从而减少不必要的元素重渲染
  - 此外，`react` 还需要借助 `key` 值来判断元素与本地状态的关联关系 <a name="GifFx"></a>

## 为什么不建议用 index 作为 key

使用 `index` 作为 `key` 和没写基本上没区别，因为无论数组的顺序如何变换，`index` 的顺序是不会改变的，导致 `vue` 会复用错误的旧节点，耗费很多时间去做额外的工作。
