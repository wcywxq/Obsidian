---
title: 238 é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯
url: https://www.yuque.com/wcywxq/gklbh2/pnbw26bnt40vohxk
---

[238. é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯](https://leetcode.cn/problems/product-of-array-except-self) <a name="rakRG"></a>

## é¢˜ç›®æè¿°

```javascript
//ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œè¿”å› æ•°ç»„ answer ï¼Œå…¶ä¸­ answer[i] ç­‰äº nums ä¸­é™¤ nums[i] ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯ ã€‚ 
//
// é¢˜ç›®æ•°æ® ä¿è¯ æ•°ç»„ numsä¹‹ä¸­ä»»æ„å…ƒç´ çš„å…¨éƒ¨å‰ç¼€å…ƒç´ å’Œåç¼€çš„ä¹˜ç§¯éƒ½åœ¨ 32 ä½ æ•´æ•°èŒƒå›´å†…ã€‚ 
//
// è¯· ä¸è¦ä½¿ç”¨é™¤æ³•ï¼Œä¸”åœ¨ O(n) æ—¶é—´å¤æ‚åº¦å†…å®Œæˆæ­¤é¢˜ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1: 
//
// 
//è¾“å…¥: nums = [1,2,3,4]
//è¾“å‡º: [24,12,8,6]
// 
//
// ç¤ºä¾‹ 2: 
//
// 
//è¾“å…¥: nums = [-1,1,0,-3,3]
//è¾“å‡º: [0,0,9,0,0]
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 2 <= nums.length <= 10âµ 
// -30 <= nums[i] <= 30 
// ä¿è¯ æ•°ç»„ numsä¹‹ä¸­ä»»æ„å…ƒç´ çš„å…¨éƒ¨å‰ç¼€å…ƒç´ å’Œåç¼€çš„ä¹˜ç§¯éƒ½åœ¨ 32 ä½ æ•´æ•°èŒƒå›´å†… 
// 
//
// 
//
// è¿›é˜¶ï¼šä½ å¯ä»¥åœ¨ O(1) çš„é¢å¤–ç©ºé—´å¤æ‚åº¦å†…å®Œæˆè¿™ä¸ªé¢˜ç›®å—ï¼Ÿï¼ˆ å‡ºäºå¯¹ç©ºé—´å¤æ‚åº¦åˆ†æçš„ç›®çš„ï¼Œè¾“å‡ºæ•°ç»„ ä¸è¢«è§†ä¸º é¢å¤–ç©ºé—´ã€‚ï¼‰ 
//
// Related Topics æ•°ç»„ å‰ç¼€å’Œ ğŸ‘ 1641 ğŸ‘ 0
```

<a name="p2B24"></a>

## é¢˜è§£

<a name="ZoBsX"></a>

### å‰ç¼€å’Œ - å·¦å³åˆ—è¡¨ä¹˜ç§¯æ³•

```javascript
/**
 * å·¦å³ä¹˜ç§¯åˆ—è¡¨æ³•
 * @param {number[]} nums
 * @return {number[]}
 */
var productExceptSelf = function (nums) {
  let len = nums.length
  const L = new Array(len)
  const R = new Array(len)
  const ans = new Array(len)

  // L[i] è¡¨ç¤º i å·¦ä¾§æ‰€æœ‰å…ƒç´ ä¹˜ç§¯
  L[0] = 1
  for (let i = 1; i < len; i++) {
    L[i] = L[i - 1] * nums[i - 1]
  }

  // R[i] è¡¨ç¤º i å³ä¾§æ‰€æœ‰å…ƒç´ ä¹˜ç§¯
  R[len - 1] = 1
  for (let i = len - 2; i >= 0; i--) {
    R[i] = R[i + 1] * nums[i + 1]
  }

  // é™¤ i å¤–å…¶ä»–å…ƒç´ ä¹˜ç§¯ = L * R
  for (let i = 0; i < len; i++) {
    ans[i] = L[i] * R[i]
  }

  return ans
}
```

<a name="uX4kY"></a>

### ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦ O(1)

```javascript
/**
 * ç©ºé—´å¤æ‚åº¦ O(1)
 * @param {number[]} nums
 * @return {number[]}
 */
var productExceptSelf = function (nums) {
  // å°† L æˆ– R æ•°ç»„ç”¨è¾“å‡ºæ•°ç»„æ¥è®¡ç®—
  let len = nums.length
  let ans = new Array(len)

  // ans[i] è¡¨ç¤º i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ï¼Œåˆšå¼€å§‹ i = 0 å·¦ä¾§æ— å…ƒç´ ï¼Œå› æ­¤ = 1
  ans[0] = 1
  for (let i = 1; i < nums.length; i++) {
    ans[i] = ans[i - 1] * nums[i - 1]
  }
  // R ä¸ºå³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ï¼Œåˆšå¼€å§‹å³è¾¹æ— å…ƒç´ ï¼Œå› æ­¤ = 1
  let R = 1
  for (let i = len - 1; i >= 0; i--) {
    // å¯¹äºç´¢å¼• iï¼Œå·¦è¾¹ä¹˜ç§¯ä¸º ans[i]ï¼Œå³è¾¹ä¸º R
    ans[i] *= R
    // R éœ€è¦åŒ…å«å³è¾¹æ‰€æœ‰ä¹˜ç§¯ï¼Œæ‰€ä»¥è¦ç´¯ä¹˜
    R *= nums[i]
  }
  return ans
}
```
